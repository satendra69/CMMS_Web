(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[8647],{21362:(e,r,o)=>{"use strict";o.d(r,{Z:()=>m});o(75012);var n=o(27060),i=o(19945),t=o(71502),a=o(4204),l=o(65469),s=o(83854),d=o(32471),c=o(66934),h=o(12065);const x=(0,c.ZP)("div")((e=>{let{theme:r}=e;const o="light"===r.palette.mode;return{h1:{margin:0,...r.typography.h1},h2:{margin:0,...r.typography.h2},h3:{margin:0,...r.typography.h3},h4:{margin:0,...r.typography.h4},h5:{margin:0,...r.typography.h5},h6:{margin:0,...r.typography.h6},p:{margin:0,...r.typography.body1},br:{display:"grid",content:'""',marginTop:"0.75em"},hr:{margin:0,flexShrink:0,borderWidth:0,msFlexNegative:0,WebkitFlexShrink:0,borderStyle:"solid",borderBottomWidth:"thin",borderColor:r.palette.divider},"& ul, & ol":{margin:0,"& li":{lineHeight:2}},"& blockquote":{lineHeight:1.5,fontSize:"1.5em",margin:"40px auto",position:"relative",fontFamily:"Georgia, serif",padding:r.spacing(3,3,3,8),color:r.palette.text.secondary,borderRadius:2*r.shape.borderRadius,backgroundColor:r.palette.background.neutral,[r.breakpoints.up("md")]:{width:"80%"},"& p, & span":{marginBottom:0,fontSize:"inherit",fontFamily:"inherit"},"&:before":{left:16,top:-8,display:"block",fontSize:"3em",content:'"\\201C"',position:"absolute",color:r.palette.text.disabled}},"& pre, & pre > code":{fontSize:16,overflowX:"auto",whiteSpace:"pre",padding:r.spacing(2),color:r.palette.common.white,borderRadius:r.shape.borderRadius,backgroundColor:o?r.palette.grey[900]:(0,h.Fq)(r.palette.grey[500],.16)},"& code":{fontSize:14,borderRadius:4,whiteSpace:"pre",padding:r.spacing(.2,.5),color:r.palette.warning[o?"darker":"lighter"],backgroundColor:r.palette.warning[o?"lighter":"darker"],"&.hljs":{padding:0,backgroundColor:"transparent"}},table:{width:"100%",borderCollapse:"collapse",border:"1px solid ".concat(r.palette.divider),"th, td":{padding:r.spacing(1),border:"1px solid ".concat(r.palette.divider)},"tbody tr:nth-of-type(odd)":{backgroundColor:r.palette.background.neutral}},input:{"&[type=checkbox]":{position:"relative",cursor:"pointer","&:before":{content:'""',top:-2,left:-2,width:17,height:17,borderRadius:3,position:"absolute",backgroundColor:r.palette.grey[o?300:700]},"&:checked":{"&:before":{backgroundColor:r.palette.primary.main},"&:after":{content:'""',top:1,left:5,width:4,height:9,position:"absolute",transform:"rotate(45deg)",msTransform:"rotate(45deg)",WebkitTransform:"rotate(45deg)",border:"solid ".concat(r.palette.common.white),borderWidth:"0 2px 2px 0"}}}}}}));var p=o(80184);function m(e){let{sx:r,...o}=e;return(0,p.jsx)(x,{sx:r,children:(0,p.jsx)(n.D,{rehypePlugins:[i.Z,a.Z,[t.Z,{singleTilde:!1}]],components:u,...o})})}const u={img:e=>{let{...r}=e;return(0,p.jsx)(d.Z,{alt:r.alt,ratio:"16/9",sx:{borderRadius:2},...r})},a:e=>{let{...r}=e;return r.href.includes("http")?(0,p.jsx)(l.Z,{target:"_blank",rel:"noopener",...r}):(0,p.jsx)(l.Z,{component:s.r,href:r.href,...r,children:r.children})}}},80211:(e,r,o)=>{"use strict";o.d(r,{Z:()=>c,t:()=>t});var n=o(13967),i=o(38887);function t(e){const r=(0,n.Z)(),o=(0,i.z)(),t=r.breakpoints.up("xl"===o?"lg":o),a=("h1"===e||"h2"===e||"h3"===e||"h4"===e||"h5"===e||"h6"===e)&&r.typography[e][t]?r.typography[e][t]:r.typography[e],l=(s=a.fontSize,Math.round(16*parseFloat(s)));var s;const d=Number(r.typography[e].lineHeight)*l,{fontWeight:c,letterSpacing:h}=r.typography[e];return{fontSize:l,lineHeight:d,fontWeight:c,letterSpacing:h}}var a=o(72791),l=o(65469),s=o(4567),d=o(80184);const c=(0,a.forwardRef)(((e,r)=>{let{asLink:o,variant:n="body1",line:i=2,persistent:a=!1,children:c,sx:h,...x}=e;const{lineHeight:p}=t(n),m={overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:i,WebkitBoxOrient:"vertical",...a&&{height:p*i},...h};return o?(0,d.jsx)(l.Z,{color:"inherit",ref:r,variant:n,sx:{...m},...x,children:c}):(0,d.jsx)(s.Z,{ref:r,variant:n,sx:{...m},...x,children:c})}))},8647:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>ce});var n=o(6907),i=o(72791),t=o(53767),a=o(10266),l=o(4567),s=o(22459),d=o(38887),c=o(38072),h=o(19208),x=o(44887),p=o(6075),m=o.n(p),u=o(89731);var g=o(11633),b=o(47630),f=o(60720),j=o(88654),Z=o(5849),v=o(40268),y=o(63454),w=o(49900),k=o(76278),C=o(80184);const I={all:"fluent:mail-24-filled",inbox:"solar:inbox-bold",trash:"solar:trash-bin-trash-bold",drafts:"solar:file-text-bold",spam:"solar:danger-bold",sent:"iconamoon:send-fill",starred:"eva:star-fill",important:"material-symbols:label-important-rounded",social:"solar:tag-horizontal-bold-duotone",promotions:"solar:tag-horizontal-bold-duotone",forums:"solar:tag-horizontal-bold-duotone"};function S(e){let{selected:r,label:o,onClickNavItem:n,...i}=e;const{unreadCount:t,color:a,name:s}=o,d=I[o.id];return(0,C.jsxs)(k.Z,{disableRipple:!0,onClick:n,sx:{px:0,height:40,color:"text.secondary",...r&&{color:"text.primary"},"&:hover":{bgcolor:"transparent"}},...i,children:[(0,C.jsx)(v.Z,{icon:d,width:22,sx:{mr:2,color:a}}),(0,C.jsx)(w.Z,{primary:s,primaryTypographyProps:{textTransform:"capitalize",typography:r?"subtitle2":"body2"}}),!!t&&(0,C.jsx)(l.Z,{variant:"caption",children:t})]})}var M=o(12065),F=o(85239);function R(e){let{sx:r,...o}=e;return(0,C.jsxs)(t.Z,{spacing:2,direction:"row",alignItems:"center",sx:{py:1,color:e=>(0,M.Fq)(e.palette.grey[500],.24),...r},...o,children:[(0,C.jsx)(F.Z,{variant:"circular",sx:{width:32,height:32,bgcolor:"currentColor"}}),(0,C.jsx)(F.Z,{sx:{width:.5,height:10,bgcolor:"currentColor"}})]})}function D(e){let{sx:r,...o}=e;return(0,C.jsxs)(t.Z,{spacing:2,direction:"row",alignItems:"center",sx:{py:1,...r},...o,children:[(0,C.jsx)(F.Z,{variant:"circular",sx:{width:40,height:40}}),(0,C.jsxs)(t.Z,{spacing:1,flexGrow:1,children:[(0,C.jsx)(F.Z,{sx:{width:.75,height:10}}),(0,C.jsx)(F.Z,{sx:{width:.5,height:10}})]})]})}function T(e){let{loading:r,openNav:o,onCloseNav:n,labels:i,selectedLabelId:a,handleClickLabel:l,onToggleCompose:s}=e;const c=(0,d.F)("up","md"),h=(0,C.jsx)(C.Fragment,{children:[...Array(8)].map(((e,r)=>(0,C.jsx)(R,{},r)))}),x=(0,C.jsx)(C.Fragment,{children:i.map((e=>(0,C.jsx)(S,{label:e,selected:a===e.id,onClickNavItem:()=>{l(e.id)}},e.id)))}),p=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(t.Z,{sx:{p:e=>({xs:e.spacing(2.5,2.5,2,2.5),md:e.spacing(2,1.5)})},children:(0,C.jsx)(Z.Z,{fullWidth:!0,color:"inherit",variant:"contained",startIcon:(0,C.jsx)(v.Z,{icon:"solar:pen-bold"}),onClick:s,children:"Compose"})}),(0,C.jsx)(y.Z,{children:(0,C.jsxs)(t.Z,{sx:{px:{xs:3.5,md:2.5}},children:[r&&h,!!i.length&&x]})})]});return c?(0,C.jsx)(t.Z,{sx:{width:200,flexShrink:0},children:p}):(0,C.jsx)(j.ZP,{open:o,onClose:n,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:260}},children:p})}var z=o(93006),P=o(97808),W=o(31207),L=o(64554),E=o(60220);function N(e){let{mail:r,selected:o,onClickMail:n,sx:i,...a}=e;return(0,C.jsxs)(k.Z,{onClick:n,sx:{p:1,mb:.5,borderRadius:1,...o&&{bgcolor:"action.selected"},...i},...a,children:[(0,C.jsx)(E.Z,{alt:r.from.name,src:"".concat(r.from.avatarUrl),sx:{mr:2},children:r.from.name.charAt(0).toUpperCase()}),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(w.Z,{primary:r.from.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:r.message,secondaryTypographyProps:{noWrap:!0,component:"span",variant:r.isUnread?"subtitle2":"body2",color:r.isUnread?"text.primary":"text.secondary"}}),(0,C.jsxs)(t.Z,{alignItems:"flex-end",sx:{ml:2,height:44},children:[(0,C.jsx)(l.Z,{noWrap:!0,variant:"body2",component:"span",sx:{mb:1.5,fontSize:12,color:"text.disabled"},children:(0,W.Z)(new Date(r.createdAt),{addSuffix:!1})}),!!r.isUnread&&(0,C.jsx)(L.Z,{sx:{bgcolor:"info.main",width:8,height:8,borderRadius:"50%"}})]})]})]})}function H(e){let{loading:r,mails:o,openMail:n,onCloseMail:i,onClickMail:a,selectedLabelId:s,selectedMailId:c}=e;const h=(0,d.F)("up","md"),x=(0,C.jsx)(C.Fragment,{children:[...Array(8)].map(((e,r)=>(0,C.jsx)(D,{},r)))}),p=(0,C.jsx)(C.Fragment,{children:o.allIds.map((e=>(0,C.jsx)(N,{mail:o.byId[e],selected:c===e,onClickMail:()=>{a(e)}},e)))}),m=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(t.Z,{sx:{p:2},children:h?(0,C.jsx)(z.Z,{placeholder:"Search...",InputProps:{startAdornment:(0,C.jsx)(P.Z,{position:"start",children:(0,C.jsx)(v.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}):(0,C.jsx)(l.Z,{variant:"h6",sx:{textTransform:"capitalize"},children:s})}),(0,C.jsxs)(y.Z,{sx:{px:2},children:[r&&x,!!o.allIds.length&&p]})]});return h?(0,C.jsx)(t.Z,{sx:{width:320,flexShrink:0,borderRadius:1.5,bgcolor:"background.default"},children:m}):(0,C.jsx)(j.ZP,{open:n,onClose:i,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:m})}var _=o(90977);function A(e){let{onOpenNav:r,onOpenMail:o,...n}=e;return(0,C.jsxs)(t.Z,{spacing:2,direction:"row",alignItems:"center",sx:{py:1},...n,children:[(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",children:[(0,C.jsx)(_.Z,{onClick:r,children:(0,C.jsx)(v.Z,{icon:"fluent:mail-24-filled"})}),o&&(0,C.jsx)(_.Z,{onClick:o,children:(0,C.jsx)(v.Z,{icon:"solar:chat-round-dots-bold"})})]}),(0,C.jsx)(z.Z,{fullWidth:!0,size:"small",placeholder:"Search...",InputProps:{startAdornment:(0,C.jsx)(P.Z,{position:"start",children:(0,C.jsx)(v.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})]})}var G=o(4841),O=o(50209),U=o(18060),q=o(40139),B=o(55942);const V=1998,Y=24;function $(e){let{onCloseCompose:r}=e;const o=(0,d.F)("up","sm"),[n,a]=(0,i.useState)(""),c=(0,s.k)(),h=(0,i.useCallback)((e=>{a(e)}),[]);return(0,C.jsxs)(O.h,{children:[(c.value||!o)&&(0,C.jsx)(U.Z,{open:!0,sx:{zIndex:V}}),(0,C.jsxs)(G.Z,{sx:{right:0,bottom:0,borderRadius:2,display:"flex",position:"fixed",zIndex:V+1,m:"".concat(Y,"px"),overflow:"hidden",flexDirection:"column",boxShadow:e=>e.customShadows.dropdown,...c.value&&{m:0,right:Y/2,bottom:Y/2,width:"calc(100% - ".concat(Y,"px)"),height:"calc(100% - ".concat(Y,"px)")}},children:[(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",sx:{bgcolor:"background.neutral",p:e=>e.spacing(1.5,1,1.5,2)},children:[(0,C.jsx)(l.Z,{variant:"h6",sx:{flexGrow:1},children:"New Message"}),(0,C.jsx)(_.Z,{onClick:c.onToggle,children:(0,C.jsx)(v.Z,{icon:c?"eva:collapse-fill":"eva:expand-fill"})}),(0,C.jsx)(_.Z,{onClick:r,children:(0,C.jsx)(v.Z,{icon:"mingcute:close-line"})})]}),(0,C.jsx)(q.ZP,{placeholder:"To",endAdornment:(0,C.jsxs)(t.Z,{direction:"row",spacing:.5,sx:{typography:"subtitle2"},children:[(0,C.jsx)(L.Z,{sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Cc"}),(0,C.jsx)(L.Z,{sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Bcc"})]}),sx:{px:2,height:48,borderBottom:e=>"solid 1px ".concat((0,M.Fq)(e.palette.grey[500],.08))}}),(0,C.jsx)(q.ZP,{placeholder:"Subject",sx:{px:2,height:48,borderBottom:e=>"solid 1px ".concat((0,M.Fq)(e.palette.grey[500],.08))}}),(0,C.jsxs)(t.Z,{spacing:2,flexGrow:1,sx:{p:2},children:[(0,C.jsx)(B.Z,{simple:!0,id:"compose-mail",value:n,onChange:h,placeholder:"Type a message",sx:{"& .ql-editor":{},...c.value&&{height:1,"& .quill":{height:1},"& .ql-editor":{maxHeight:"unset"}}}}),(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",children:[(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",flexGrow:1,children:[(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"solar:gallery-add-bold"})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"eva:attach-2-fill"})})]}),(0,C.jsx)(Z.Z,{variant:"contained",color:"primary",endIcon:(0,C.jsx)(v.Z,{icon:"iconamoon:send-fill"}),children:"Send"})]})]})]})]})}var K=o(65469),X=o(94721),J=o(97639),Q=o(76090),ee=o(13034),re=o(53915),oe=o(87183),ne=o(80160),ie=o(21362),te=o(80211),ae=o(18197);function le(e){let{mail:r,renderLabel:o}=e;const n=(0,s.k)(!0);if(!r)return(0,C.jsx)(g.Z,{title:"No Conversation Selected",description:"Select a conversation to read",imgUrl:"/assets/icons/empty/ic_email_selected.svg",sx:{borderRadius:1.5,bgcolor:"background.default"}});const i=(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",flexShrink:0,sx:{height:56,pl:2,pr:1},children:[(0,C.jsx)(t.Z,{direction:"row",spacing:1,flexGrow:1,children:r.labelIds.map((e=>{const r=o(e);return r?(0,C.jsx)(ne.Z,{sx:{bgcolor:(0,M.Fq)(r.color,.16),color:e=>"light"===e.palette.mode?(0,M._j)(r.color,.24):(0,M.$n)(r.color,.24)},children:r.name},r.id):null}))}),(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",children:[(0,C.jsx)(ee.Z,{color:"warning",icon:(0,C.jsx)(v.Z,{icon:"eva:star-outline"}),checkedIcon:(0,C.jsx)(v.Z,{icon:"eva:star-fill"}),checked:r.isStarred}),(0,C.jsx)(ee.Z,{color:"warning",icon:(0,C.jsx)(v.Z,{icon:"material-symbols:label-important-rounded"}),checkedIcon:(0,C.jsx)(v.Z,{icon:"material-symbols:label-important-rounded"}),checked:r.isImportant}),(0,C.jsx)(J.Z,{title:"Archive",children:(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"solar:archive-down-minimlistic-bold"})})}),(0,C.jsx)(J.Z,{title:"Mark Unread",children:(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"fluent:mail-unread-20-filled"})})}),(0,C.jsx)(J.Z,{title:"Trash",children:(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"solar:trash-bin-trash-bold"})})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"eva:more-vertical-fill"})})]})]}),a=(0,C.jsxs)(t.Z,{spacing:2,direction:"row",flexShrink:0,sx:{p:2},children:[(0,C.jsxs)(te.Z,{variant:"subtitle2",sx:{flexGrow:1},children:["Re: ",r.subject]}),(0,C.jsxs)(t.Z,{spacing:.5,children:[(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:[(0,C.jsx)(_.Z,{size:"small",children:(0,C.jsx)(v.Z,{width:18,icon:"solar:reply-bold"})}),(0,C.jsx)(_.Z,{size:"small",children:(0,C.jsx)(v.Z,{width:18,icon:"solar:multiple-forward-left-broken"})}),(0,C.jsx)(_.Z,{size:"small",children:(0,C.jsx)(v.Z,{width:18,icon:"solar:forward-bold"})})]}),(0,C.jsx)(l.Z,{variant:"caption",noWrap:!0,sx:{color:"text.disabled"},children:(0,oe.zM)(r.createdAt)})]})]}),d=(0,C.jsxs)(t.Z,{flexShrink:0,direction:"row",alignItems:"center",sx:{p:e=>e.spacing(2,2,1,2)},children:[(0,C.jsx)(E.Z,{alt:r.from.name,src:"".concat(r.from.avatarUrl),sx:{mr:2},children:r.from.name.charAt(0).toUpperCase()}),(0,C.jsx)(w.Z,{primary:(0,C.jsxs)(C.Fragment,{children:[r.from.name,(0,C.jsx)(L.Z,{component:"span",sx:{typography:"body2",color:"text.disabled"},children:" <".concat(r.from.email,">")})]}),secondary:(0,C.jsxs)(C.Fragment,{children:["To: ",r.to.map((e=>(0,C.jsx)(K.Z,{sx:{color:"text.secondary"},children:"".concat(e.email,", ")},e.email)))]}),secondaryTypographyProps:{mt:.5,noWrap:!0,component:"span",typography:"caption"}})]}),c=(0,C.jsxs)(t.Z,{spacing:1,sx:{p:1,borderRadius:1,bgcolor:"background.neutral"},children:[(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,C.jsxs)(re.Z,{onClick:n.onToggle,sx:{color:"text.secondary",typography:"caption",borderRadius:.5},children:[(0,C.jsx)(v.Z,{icon:"eva:attach-2-fill",sx:{mr:.5}}),r.attachments.length," attachments",(0,C.jsx)(v.Z,{icon:n.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",width:16,sx:{ml:.5}})]}),(0,C.jsx)(Z.Z,{startIcon:(0,C.jsx)(v.Z,{icon:"eva:cloud-download-fill"}),children:"Download"})]}),(0,C.jsx)(Q.Z,{in:n.value,unmountOnExit:!0,timeout:"auto",children:(0,C.jsx)(t.Z,{direction:"row",flexWrap:"wrap",spacing:1,children:r.attachments.map((e=>(0,C.jsx)(t.Z,{alignItems:"center",justifyContent:"center",sx:{width:40,height:40,flexShrink:0,borderRadius:1,overflow:"hidden",position:"relative",backgroundColor:"background.neutral"},children:(0,C.jsx)(ae.ZP,{tooltip:!0,imageView:!0,file:e.preview,onDownload:()=>console.info("DOWNLOAD"),sx:{width:24,height:24}})},e.id)))})})]}),h=(0,C.jsx)(L.Z,{sx:{py:3,overflow:"hidden",flexGrow:1},children:(0,C.jsx)(y.Z,{children:(0,C.jsx)(ie.Z,{children:r.message,sx:{px:2,"& p":{typography:"body2"}}})})}),x=(0,C.jsxs)(t.Z,{spacing:2,sx:{p:e=>e.spacing(0,2,2,2)},children:[(0,C.jsx)(B.Z,{simple:!0,id:"reply-mail"}),(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",children:[(0,C.jsxs)(t.Z,{direction:"row",alignItems:"center",flexGrow:1,children:[(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"solar:gallery-add-bold"})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(v.Z,{icon:"eva:attach-2-fill"})})]}),(0,C.jsx)(Z.Z,{variant:"contained",color:"primary",endIcon:(0,C.jsx)(v.Z,{icon:"iconamoon:send-fill"}),children:"Send"})]})]});return(0,C.jsxs)(t.Z,{flexGrow:1,sx:{width:1,minWidth:0,borderRadius:1.5,bgcolor:"background.default"},children:[i,(0,C.jsx)(X.Z,{sx:{borderStyle:"dashed"}}),a,(0,C.jsx)(X.Z,{sx:{borderStyle:"dashed"}}),d,!!r.attachments.length&&(0,C.jsxs)(t.Z,{sx:{px:2},children:[" ",c," "]}),h,x]})}const se="inbox";function de(){const e=(0,h.tv)(),r=(0,h.lr)(),o=r.get("label")||se,n=r.get("id")||"",p=(0,d.F)("up","md"),j=(0,f.K$)(),Z=(0,s.k)(),v=(0,s.k)(),y=(0,s.k)(),{labels:w,labelsLoading:k}=function(){const e=u.Hv.mail.labels,{data:r,isLoading:o,error:n,isValidating:t}=(0,x.ZP)(e,u._i);return(0,i.useMemo)((()=>({labels:(null===r||void 0===r?void 0:r.labels)||[],labelsLoading:o,labelsError:n,labelsValidating:t,labelsEmpty:!o&&!(null!==r&&void 0!==r&&r.labels.length)})),[null===r||void 0===r?void 0:r.labels,n,o,t])}(),{mails:I,mailsLoading:S,mailsError:M,mailsEmpty:F}=function(e){const r=e?[u.Hv.mail.list,{params:{labelId:e}}]:null,{data:o,isLoading:n,error:t,isValidating:a}=(0,x.ZP)(r,u._i);return(0,i.useMemo)((()=>{const e=m()(null===o||void 0===o?void 0:o.mails,"id")||{},r=Object.keys(e)||[];return{mails:{byId:e,allIds:r},mailsLoading:n,mailsError:t,mailsValidating:a,mailsEmpty:!n&&!r.length}}),[null===o||void 0===o?void 0:o.mails,t,n,a])}(o),{mail:R,mailLoading:D,mailError:z}=function(e){const r=e?[u.Hv.mail.details,{params:{mailId:e}}]:null,{data:o,isLoading:n,error:t,isValidating:a}=(0,x.ZP)(r,u._i);return(0,i.useMemo)((()=>({mail:null===o||void 0===o?void 0:o.mail,mailLoading:n,mailError:t,mailValidating:a})),[null===o||void 0===o?void 0:o.mail,t,n,a])}(n),P=I.allIds[0]||"",W=(0,i.useCallback)((()=>{Z.value&&Z.onFalse(),y.onToggle()}),[y,Z]),L=(0,i.useCallback)((r=>{if(p||Z.onFalse(),r){const o=r!==se?"".concat(c.H.dashboard.mail,"?label=").concat(r):c.H.dashboard.mail;e.push(o)}}),[Z,e,p]),E=(0,i.useCallback)((r=>{p||v.onFalse();const n=o!==se?"".concat(c.H.dashboard.mail,"?id=").concat(r,"&label=").concat(o):"".concat(c.H.dashboard.mail,"?id=").concat(r);e.push(n)}),[v,e,o,p]);(0,i.useEffect)((()=>{(M||z)&&e.push(c.H.dashboard.mail)}),[z,M,e]),(0,i.useEffect)((()=>{!n&&P&&E(P)}),[P,E,n]),(0,i.useEffect)((()=>{y.value?document.body.style.overflow="hidden":document.body.style.overflow=""}),[y.value]);const N=(0,C.jsx)(b.a,{sx:{borderRadius:1.5,bgcolor:"background.default"}}),_=(0,C.jsx)(g.Z,{title:"Nothing in ".concat(o),description:"This folder is empty",imgUrl:"/assets/icons/empty/ic_folder_empty.svg",sx:{borderRadius:1.5,maxWidth:{md:320},bgcolor:"background.default"}}),G=(0,C.jsx)(T,{loading:k,openNav:Z.value,onCloseNav:Z.onFalse,labels:w,selectedLabelId:o,handleClickLabel:L,onToggleCompose:W}),O=(0,C.jsx)(H,{mails:I,loading:S,openMail:v.value,onCloseMail:v.onFalse,onClickMail:E,selectedLabelId:o,selectedMailId:n}),U=(0,C.jsx)(C.Fragment,{children:F?(0,C.jsx)(g.Z,{imgUrl:"/assets/icons/empty/ic_email_disabled.svg",sx:{borderRadius:1.5,bgcolor:"background.default",...!p&&{display:"none"}}}):(0,C.jsx)(le,{mail:R,renderLabel:e=>w.filter((r=>r.id===e))[0]})});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(a.Z,{maxWidth:!j.themeStretch&&"xl",children:[(0,C.jsx)(l.Z,{variant:"h4",sx:{mb:{xs:3,md:5}},children:"Mail"}),(0,C.jsxs)(t.Z,{spacing:1,sx:{p:1,borderRadius:2,position:"relative",overflow:"hidden",bgcolor:"background.neutral"},children:[!p&&(0,C.jsx)(A,{onOpenNav:Z.onTrue,onOpenMail:F?null:v.onTrue}),(0,C.jsxs)(t.Z,{spacing:1,direction:"row",flexGrow:1,sx:{height:{xs:"72vh"}},children:[G,F?_:O,D?N:U]})]})]}),y.value&&(0,C.jsx)($,{onCloseCompose:y.onFalse})]})}function ce(){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.ql,{children:(0,C.jsx)("title",{children:" Dashboard: Mail"})}),(0,C.jsx)(de,{})]})}},87183:(e,r,o)=>{"use strict";o.d(r,{DY:()=>d,IO:()=>s,Mu:()=>a,zM:()=>l});var n=o(16386),i=o(64460),t=o(24054);function a(e,r){const o=r||"dd MMM yyyy";return e?(0,n.Z)(new Date(e),o):""}function l(e,r){const o=r||"dd MMM yyyy p";return e?(0,n.Z)(new Date(e),o):""}function s(e){return e?(0,i.Z)(new Date(e)):""}function d(e){return e?(0,t.Z)(new Date(e),{addSuffix:!0}):""}},31207:(e,r,o)=>{"use strict";o.d(r,{Z:()=>u});var n=o(24408),i=o(4697),t=o(27277),a=o(38527),l=o(41049),s=o(8938),d=o(38126),c=o(4522),h=6e4,x=1440,p=30*x,m=365*x;function u(e,r){return(0,c.Z)(1,arguments),function(e,r,o){var u,g,b;(0,c.Z)(2,arguments);var f=(0,n.j)(),j=null!==(u=null!==(g=null===o||void 0===o?void 0:o.locale)&&void 0!==g?g:f.locale)&&void 0!==u?u:d.Z;if(!j.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var Z=(0,t.Z)(e,r);if(isNaN(Z))throw new RangeError("Invalid time value");var v,y,w=(0,s.Z)((0,l.Z)(o),{addSuffix:Boolean(null===o||void 0===o?void 0:o.addSuffix),comparison:Z});Z>0?(v=(0,a.Z)(r),y=(0,a.Z)(e)):(v=(0,a.Z)(e),y=(0,a.Z)(r));var k,C=String(null!==(b=null===o||void 0===o?void 0:o.roundingMethod)&&void 0!==b?b:"round");if("floor"===C)k=Math.floor;else if("ceil"===C)k=Math.ceil;else{if("round"!==C)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");k=Math.round}var I,S=y.getTime()-v.getTime(),M=S/h,F=(S-((0,i.Z)(y)-(0,i.Z)(v)))/h,R=null===o||void 0===o?void 0:o.unit;if("second"===(I=R?String(R):M<1?"second":M<60?"minute":M<x?"hour":F<p?"day":F<m?"month":"year")){var D=k(S/1e3);return j.formatDistance("xSeconds",D,w)}if("minute"===I){var T=k(M);return j.formatDistance("xMinutes",T,w)}if("hour"===I){var z=k(M/60);return j.formatDistance("xHours",z,w)}if("day"===I){var P=k(F/x);return j.formatDistance("xDays",P,w)}if("month"===I){var W=k(F/p);return 12===W&&"month"!==R?j.formatDistance("xYears",1,w):j.formatDistance("xMonths",W,w)}if("year"===I){var L=k(F/m);return j.formatDistance("xYears",L,w)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}(e,Date.now(),r)}},31211:e=>{e.exports=function(e,r,o,n){for(var i=-1,t=null==e?0:e.length;++i<t;){var a=e[i];r(n,a,o(a),e)}return n}},38430:(e,r,o)=>{var n=o(87927);e.exports=function(e,r,o,i){return n(e,(function(e,n,t){r(i,e,o(e),t)})),i}},74629:(e,r,o)=>{var n=o(31211),i=o(38430),t=o(56025),a=o(93629);e.exports=function(e,r){return function(o,l){var s=a(o)?n:i,d=r?r():{};return s(o,e,t(l,2),d)}}},6075:(e,r,o)=>{var n=o(32526),i=o(74629)((function(e,r,o){n(e,o,r)}));e.exports=i}}]);
//# sourceMappingURL=8647.43da9d6d.chunk.js.map