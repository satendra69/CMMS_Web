"use strict";(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[5342],{70612:(e,t,l)=>{l.r(t),l.d(t,{default:()=>pe});var s=l(18111),a=l.n(s),o=l(72791),i=l(6907),r=l(57689),c=l(11087),n=l(88588),d=l(15416),h=l(5849),u=l(97639),p=l(77512),x=l(10266),m=l(62155),w=l(82626),j=l(90977),g=l(55261),y=l(53767),b=l(24308),C=l(56832),f=l(9195),v=l(68745),Z=(l(38072),l(19208)),k=l(83854),S=l(45363),_=l(62861),D=l(84701),N=l(5574),A=l(65661),O=l(4899),L=l(77386),P=l(66934),R=l(22459),W=l(60720),I=l(1382),E=l(40268),q=l(63454),F=l(3352),T=l(73379),B=l(18709),M=l(21830),z=l.n(M),Q=l(58086),G=l.n(Q),U=l(77196),V=l(62711),Y=l(13034),H=(l(80160),l(80184));function K(e){let{row:t,rowStats:l,selected:s,onSelectRow:a,onDeleteRow:i,onEditRow:r,onCompleteRow:c,onCloseRow:n}=e;const d=localStorage.getItem("site_ID"),[p,x]=(0,o.useState)([]),m=(0,o.useCallback)((async()=>{z().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.get("/get_site_cd_login_user.php?empl_site_cd=".concat(d));x(e.data.default_site),z().close()}catch(e){console.error("Error fetching data:",e)}}),[d]);(0,o.useEffect)((()=>{m()}),[m]);const{col2:g,col3:y,col4:b,col5:Z,col6:k,col7:S,col8:_,col9:D,col10:N,col11:A,col12:O,col13:L,col14:P,col15:W,col16:I,col17:q,col18:T,col19:M,col20:Q,col21:G,col22:U,col23:V,col24:K,col25:J,col26:$,col27:X,col28:ee,col29:te,col30:le,col31:se,col32:ae,col33:oe,col34:ie,col35:re,col36:ce,col37:ne,col38:de,col39:he,col40:ue,col41:pe,col42:xe,col43:me,col44:we,col45:je,col46:ge,col47:ye,col48:be,col49:Ce,col50:fe,col51:ve,col52:Ze,col53:ke,col54:Se,col55:_e,col56:De,col57:Ne,col58:Ae,col59:Oe,col60:Le,col61:Pe,col62:Re,col63:We,col64:Ie,col65:Ee,col66:qe,col67:Fe,col68:Te,col69:Be,col70:Me}=t,ze=(0,R.k)(),Qe=(0,C.S)(),Ge=e=>{if(!e)return"";if(e.startsWith("1900-01-01"))return"";const t=new Date(e),l=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getFullYear(),o=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return"".concat(l,"-").concat(s,"-").concat(a," ").concat(o,":").concat(i)},Ue=p.filter((e=>e.site_cd===d&&e.wrk_sts_status===k)),Ve=S&&S.length>30?"".concat(S.substring(0,30),"..."):S,Ye=T&&T.length>30?"".concat(T.substring(0,30),"..."):T;return(0,H.jsxs)(H.Fragment,{children:["PrmMstTable"===l?(0,H.jsxs)(f.Z,{hover:!0,selected:s,children:[(0,H.jsx)(v.Z,{align:"right",children:(0,H.jsx)(j.Z,{color:Qe.open?"primary":"default",onClick:Qe.onOpen,children:(0,H.jsx)(E.Z,{icon:"eva:more-vertical-fill"})})}),(0,H.jsx)(v.Z,{children:g}),(0,H.jsx)(v.Z,{children:y}),(0,H.jsx)(v.Z,{children:b}),(0,H.jsx)(v.Z,{children:Z}),(0,H.jsx)(v.Z,{children:k}),(0,H.jsx)(v.Z,{children:S}),(0,H.jsx)(v.Z,{children:_}),(0,H.jsx)(v.Z,{children:D}),(0,H.jsx)(v.Z,{children:N}),(0,H.jsx)(v.Z,{children:A}),(0,H.jsx)(v.Z,{children:O}),(0,H.jsx)(v.Z,{children:L}),(0,H.jsx)(v.Z,{children:P}),(0,H.jsx)(v.Z,{children:W}),(0,H.jsx)(v.Z,{children:I}),(0,H.jsx)(v.Z,{children:q}),(0,H.jsx)(v.Z,{children:T}),(0,H.jsx)(v.Z,{children:M}),(0,H.jsx)(v.Z,{children:Q}),(0,H.jsx)(v.Z,{children:G}),(0,H.jsx)(v.Z,{children:U}),(0,H.jsx)(v.Z,{children:V}),(0,H.jsx)(v.Z,{children:K}),(0,H.jsx)(v.Z,{children:J}),(0,H.jsx)(v.Z,{children:$}),(0,H.jsx)(v.Z,{children:X}),(0,H.jsx)(v.Z,{children:ee}),(0,H.jsx)(v.Z,{children:te}),(0,H.jsx)(v.Z,{children:le}),(0,H.jsx)(v.Z,{children:se}),(0,H.jsx)(v.Z,{children:ae}),(0,H.jsx)(v.Z,{children:oe}),(0,H.jsx)(v.Z,{children:ie}),(0,H.jsx)(v.Z,{children:re}),(0,H.jsx)(v.Z,{children:ce}),(0,H.jsx)(v.Z,{children:ne}),(0,H.jsx)(v.Z,{children:de}),(0,H.jsx)(v.Z,{children:he}),(0,H.jsx)(v.Z,{children:ue}),(0,H.jsx)(v.Z,{children:pe}),(0,H.jsx)(v.Z,{children:xe}),(0,H.jsx)(v.Z,{children:me}),(0,H.jsx)(v.Z,{children:we}),(0,H.jsx)(v.Z,{children:je})]}):(0,H.jsxs)(f.Z,{hover:!0,selected:s,children:[(0,H.jsx)(v.Z,{align:"right",children:(0,H.jsx)(j.Z,{color:Qe.open?"primary":"default",onClick:Qe.onOpen,disableRipple:!0,sx:{"&:active":{backgroundColor:"transparent"}},children:(0,H.jsx)(E.Z,{icon:"eva:more-vertical-fill"})})}),(0,H.jsx)(v.Z,{children:g}),(0,H.jsx)(v.Z,{children:y}),(0,H.jsx)(v.Z,{children:(()=>{if(Ue.length>0){const e=Ue[0].wrk_sts_typ_cd;return"OPEN"===e?(0,H.jsx)("div",{children:(0,H.jsx)("span",{style:{backgroundColor:"#F4D03F",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:k})}):"CLOSE"===e?(0,H.jsx)("div",{children:(0,H.jsx)("span",{style:{backgroundColor:"#3498DB",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:k})}):"CANCEL"===e?(0,H.jsx)("div",{children:(0,H.jsx)("span",{style:{backgroundColor:"#566573",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:k})}):"COMPLETE"===e?(0,H.jsx)("div",{children:(0,H.jsx)("span",{style:{backgroundColor:"#2ECC71",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:k})}):null}})()}),(0,H.jsx)(v.Z,{children:(0,H.jsx)(u.Z,{title:S,placement:"top",arrow:!0,children:(0,H.jsx)("span",{children:Ve})})}),(0,H.jsx)(v.Z,{children:_}),(0,H.jsx)(v.Z,{children:D?Ge(D):""}),(0,H.jsx)(v.Z,{children:N?(e=>{const t=new Date(e);if("1900-01-01 00:00:00"===e||null===e)return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("span",{style:{width:"110px",display:"inline-block"},children:"01-01-1900 00:00"}),(0,H.jsx)(u.Z,{title:"Due Date Not Set",placement:"top",arrow:!0,children:(0,H.jsx)("span",{className:"SpecialDateClass",style:{color:"#fff",width:"25px",textAlign:"center",display:"inline-block"},children:"0"})})]});const l=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getFullYear(),o=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0"),r="".concat(l,"-").concat(s,"-").concat(a," ").concat(o,":").concat(i),c=(new Date).toLocaleString("en-US",{timeZone:"UTC"}),n=t-new Date(c),d=Math.floor(n/864e5);let h="black",p="",x="";return d>0?(h="#fff",p="FutureDateClass",x="Days Left to Due Date"):d<=0&&(h="#fff",p="PastDateClass",x="Days Past Due"),(0,H.jsxs)("span",{children:[(0,H.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[r," "]}),(0,H.jsx)(u.Z,{title:" ".concat(Math.abs(d)," ").concat(x," "),placement:"top",arrow:!0,children:(0,H.jsx)("span",{className:"DueDtCls ".concat(p),style:{width:"25px",display:"inline-block",textAlign:"center",color:h},children:Math.abs(d)})})]})})(N):""}),(0,H.jsx)(v.Z,{children:A?Ge(A):""}),(0,H.jsx)(v.Z,{children:O?Ge(O):""}),(0,H.jsx)(v.Z,{children:b}),(0,H.jsx)(v.Z,{children:Z}),(0,H.jsx)(v.Z,{children:L}),(0,H.jsx)(v.Z,{children:P}),(0,H.jsx)(v.Z,{children:W}),(0,H.jsx)(v.Z,{children:I}),(0,H.jsx)(v.Z,{children:q}),(0,H.jsx)(v.Z,{children:(0,H.jsx)(u.Z,{title:T,placement:"top",arrow:!0,children:(0,H.jsx)("span",{children:Ye})})}),(0,H.jsx)(v.Z,{children:M}),(0,H.jsx)(v.Z,{children:Q}),(0,H.jsx)(v.Z,{children:G}),(0,H.jsx)(v.Z,{children:U}),(0,H.jsx)(v.Z,{children:V}),(0,H.jsx)(v.Z,{children:K}),(0,H.jsx)(v.Z,{children:J}),(0,H.jsx)(v.Z,{children:$}),(0,H.jsx)(v.Z,{children:X}),(0,H.jsx)(v.Z,{children:(0,H.jsx)(Y.Z,{checked:"1"===ee,inputProps:{"aria-label":"disabled checkbox"},color:"primary"})}),(0,H.jsx)(v.Z,{children:te}),(0,H.jsx)(v.Z,{children:le}),(0,H.jsx)(v.Z,{children:se?Ge(se):""}),(0,H.jsx)(v.Z,{children:ae?Ge(ae):""}),(0,H.jsx)(v.Z,{children:oe}),(0,H.jsx)(v.Z,{children:ie}),(0,H.jsx)(v.Z,{children:re}),(0,H.jsx)(v.Z,{children:ce?Ge(ce):""}),(0,H.jsx)(v.Z,{children:ne?Ge(ne):""}),(0,H.jsx)(v.Z,{children:de?Ge(de):""}),(0,H.jsx)(v.Z,{children:he}),(0,H.jsx)(v.Z,{children:ue}),(0,H.jsx)(v.Z,{children:pe}),(0,H.jsx)(v.Z,{children:xe}),(0,H.jsx)(v.Z,{children:me}),(0,H.jsx)(v.Z,{children:we}),(0,H.jsx)(v.Z,{children:je}),(0,H.jsx)(v.Z,{children:ge}),(0,H.jsx)(v.Z,{children:ye}),(0,H.jsx)(v.Z,{sx:{textAlign:"center"},children:be}),(0,H.jsx)(v.Z,{children:Ce}),(0,H.jsx)(v.Z,{children:fe}),(0,H.jsx)(v.Z,{children:ve}),(0,H.jsx)(v.Z,{children:Ze}),(0,H.jsx)(v.Z,{children:ke}),(0,H.jsx)(v.Z,{children:Se}),(0,H.jsx)(v.Z,{children:_e}),(0,H.jsx)(v.Z,{children:De}),(0,H.jsx)(v.Z,{children:Ne}),(0,H.jsx)(v.Z,{children:Ae}),(0,H.jsx)(v.Z,{children:Oe}),(0,H.jsx)(v.Z,{children:Le}),(0,H.jsx)(v.Z,{children:Pe}),(0,H.jsx)(v.Z,{children:Re}),(0,H.jsx)(v.Z,{children:We}),(0,H.jsx)(v.Z,{children:Ie?Ge(Ie):""}),(0,H.jsx)(v.Z,{children:Ee?Ge(Ee):""}),(0,H.jsx)(v.Z,{children:qe?Ge(qe):""}),(0,H.jsx)(v.Z,{children:Fe?Ge(Fe):""}),(0,H.jsx)(v.Z,{children:Te?Ge(Te):""}),(0,H.jsx)(v.Z,{children:Be}),(0,H.jsx)(v.Z,{children:Me?Ge(Me):""})]}),(0,H.jsxs)(C.Z,{open:Qe.open,onClose:Qe.onClose,arrow:"right-top",sx:{width:140},children:[(0,H.jsxs)(w.Z,{onClick:()=>{c(),Qe.onClose()},sx:{color:"green"},children:[(0,H.jsx)(E.Z,{icon:"material-symbols:order-approve"}),"Complete"]}),(0,H.jsxs)(w.Z,{onClick:()=>{n(),Qe.onClose()},sx:{color:"green"},children:[(0,H.jsx)(E.Z,{icon:"fluent:text-change-reject-20-filled"}),"Close"]}),(0,H.jsxs)(w.Z,{onClick:()=>{r(),Qe.onClose()},children:[(0,H.jsx)(E.Z,{icon:"solar:pen-bold"}),"Edit"]}),(0,H.jsxs)(w.Z,{onClick:()=>{Qe.onClose()},children:[(0,H.jsx)(E.Z,{icon:"teenyicons:print-solid"}),"Print"]}),(0,H.jsxs)(w.Z,{onClick:()=>{i(),Qe.onClose()},sx:{color:"error.main"},children:[(0,H.jsx)(E.Z,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),(0,H.jsx)(F.Q,{open:ze.value,onClose:ze.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,H.jsx)(h.Z,{variant:"contained",color:"error",onClick:i,children:"Delete"})})]})}var J=l(64554),$=l(85771),X=l(4841);function ee(e){let{filters:t,onFilters:l,onResetFilters:s,results:a,...o}=e;return(0,H.jsxs)(y.Z,{spacing:1.5,...o,className:"resulthiddenClass",children:[(0,H.jsxs)(J.Z,{sx:{typography:"body2"},children:[(0,H.jsx)("strong",{children:a}),(0,H.jsx)(J.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,H.jsxs)(y.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!t.stock.length&&(0,H.jsx)(te,{label:"Stock:",children:t.stock.map((e=>(0,H.jsx)($.Z,{label:e,size:"small",onDelete:()=>(e=>{const s=t.stock.filter((t=>t!==e));l("stock",s)})(e)},e)))}),!!t.publish.length&&(0,H.jsx)(te,{label:"Publish:",children:t.publish.map((e=>(0,H.jsx)($.Z,{label:e,size:"small",onDelete:()=>(e=>{const s=t.publish.filter((t=>t!==e));l("publish",s)})(e)},e)))}),(0,H.jsx)(h.Z,{color:"error",onClick:s,startIcon:(0,H.jsx)(E.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function te(e){let{label:t,children:l,sx:s,...a}=e;return(0,H.jsxs)(y.Z,{component:X.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...s},...a,children:[(0,H.jsx)(J.Z,{component:"span",sx:{typography:"subtitle2"},children:t}),(0,H.jsx)(y.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}var le=l(14776),se=l(72426),ae=l.n(se);l(45852);const oe=()=>{const e=localStorage.getItem("site_ID"),t=(0,r.s0)(),[l,s]=(0,o.useState)([]),a=(0,le.Zt)(ae());(0,o.useEffect)((()=>{(async()=>{try{const t=(await B.Z.get("/get_WorkOrderCalenderData.php?site_cd=".concat(e))).data.data.CalendarData.map((e=>({start:new Date(e.wko_mst_org_date.date),end:new Date(e.wko_mst_org_date.date),title:"".concat(e.wko_mst_wo_no),status:"".concat(e.wko_mst_status),rowId:"".concat(e.RowID)})));s(t)}catch(t){console.log("Error fetching events:",t)}})()}),[e]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)("div",{className:"ViewPartCal",children:(0,H.jsx)("div",{style:{height:"500px"},children:(0,H.jsx)(le.f,{localizer:a,events:l,startAccessor:"start",endAccessor:"end",titleAccessor:"title",statusAccessor:"status",views:["month","week","day"],defaultView:"month",style:{marginBottom:"20px"},selectable:!0,onSelectEvent:e=>{e&&e.rowId&&t("/dashboard/work/neworder?rowID=".concat(e.rowId))}})})})})};var ie=l(25415),re=l.n(ie);const ce=e=>{let{resultData:t}=e;if(""!==t&&void 0!==t){const e=new(re().Workbook),l=e.addWorksheet("Word Order");l.columns=[{header:"Work Order No",key:"col2",width:15},{header:"Asset No",key:"col3",width:15},{header:"Parent Wo",key:"col4",width:15},{header:"PM Group",key:"col5",width:15},{header:"Status",key:"col6",width:15},{header:"Description",key:"col7",width:35},{header:"Charge Cost Center",key:"col8",width:20},{header:"Origination Date",key:"col9",width:20},{header:"Due Date",key:"col10",width:20},{header:"Completion Date",key:"col11",width:20},{header:"Close Date",key:"col12",width:20},{header:"Assign To",key:"col13",width:15},{header:"Planner",key:"col14",width:15},{header:"Fault Code",key:"col15",width:18},{header:"Cause Code",key:"col16",width:20},{header:"Action Code",key:"col17",width:20},{header:"Corrective Action",key:"col18",width:20},{header:"Originator",key:"col19",width:20},{header:"Phone",key:"col20",width:20},{header:"Project Id",key:"col21",width:20},{header:"Zone",key:"col22",width:20},{header:"Asset Location",key:"col23",width:20},{header:"Asset Level",key:"col24",width:20},{header:"Asset Group Code",key:"col25",width:20},{header:"Original Priority",key:"col26",width:20},{header:"Plan Priority",key:"col27",width:20},{header:"Temporary Asset",key:"col28",width:20},{header:"Work Request No",key:"col29",width:20},{header:"Area",key:"col30",width:20},{header:"Wr Origination Date",key:"col31",width:20},{header:"Wr Due Date",key:"col32",width:20},{header:"Work Type",key:"col33",width:20},{header:"Work Class",key:"col34",width:20},{header:"Labor Type",key:"col35",width:20},{header:"Status Change Date",key:"col36",width:20},{header:"Schedule Date",key:"col37",width:20},{header:"Exception Date",key:"col38",width:20},{header:"Contract No",key:"col39",width:20},{header:"Wo Category",key:"col40",width:20},{header:"Customer Code",key:"col41",width:20},{header:"Supervisor Id",key:"col42",width:20},{header:"Estimated Contract Cost",key:"col43",width:20},{header:"Contract Cost",key:"col44",width:20},{header:"Estimated Material Cost",key:"col45",width:20},{header:"Material Cost",key:"col46",width:20},{header:"Estimated Labor Cost",key:"col47",width:20},{header:"Labor Cost",key:"col48",width:20},{header:"Eservice No",key:"col49",width:20},{header:"Export File Directory",key:"col50",width:20},{header:"Response To Request",key:"col51",width:20},{header:"Job Id/service No",key:"col52",width:20},{header:"Wko Det~r~nvarchar5",key:"col53",width:20},{header:"SERVICE SATISFACTION",key:"col54",width:20},{header:"Work Location (Udf 7)",key:"col55",width:20},{header:"Area",key:"col56",width:20},{header:"Quality Of Service",key:"col57",width:20},{header:"Eps Purchaser",key:"col58",width:20},{header:"Labor Cost",key:"col59",width:20},{header:"Invoice Amt",key:"col60",width:20},{header:"Total Markup Cost",key:"col61",width:20},{header:"Down Time (Hour)",key:"col62",width:20},{header:"Wko Det~r~nnumeric5",key:"col63",width:20},{header:"Exported Date",key:"col64",width:20},{header:"Wko Det Datetime2",key:"col65",width:20},{header:"Acknowledge Date",key:"col66",width:20},{header:"Wko Det~r~ndatetime4",key:"col67",width:20},{header:"Wko Det~r~ndatetime5",key:"col68",width:20},{header:"Created By",key:"col69",width:20},{header:"Created Date",key:"col70",width:20}],t.forEach((e=>{l.addRow(e)}));l.getRow(1);l.getRow(1).eachCell((e=>{e.font={size:12,bold:!0,color:{argb:"FFFFFF"}},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2F5597"}},e.alignment={horizontal:"center",vertical:"center"}})),l.eachRow(((e,t)=>{t>1&&(e.font={size:11,color:{argb:"#000"}},e.alignment={horizontal:"center",vertical:"middle"})})),e.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=document.createElement("a");l.href=window.URL.createObjectURL(t),l.download="ReportForwordOrder2023.xlsx",l.click()}))}return(0,H.jsx)("div",{})},ne=(G()(z()),(0,P.ZP)(N.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}))),de=[{id:"",label:"Action",width:60},{id:"col2",label:"Work Order No",width:125,align:"left"},{id:"col3",label:"Asset No",width:100,padding:10},{id:"col6",label:"Status",width:80},{id:"col7",label:"Description",width:250},{id:"col8",label:"Charge Cost Center",width:180},{id:"col9",label:"Origination Date",width:160},{id:"col10",label:"Due Date",width:170},{id:"col11",label:"Completion Date",width:150},{id:"col12",label:"Close Date",width:150},{id:"col4",label:"Parent Wo",width:120},{id:"col5",label:"PM Group",width:120},{id:"col13",label:"Assign To",width:125},{id:"col14",label:"Planner",width:125},{id:"col15",label:"Fault Code",width:125},{id:"col16",label:"Cause Code",width:125},{id:"col17",label:"Action Code",width:150},{id:"col18",label:"Corrective Action",width:250},{id:"col19",label:"Originator",width:155},{id:"col20",label:"Phone",width:135},{id:"col21",label:"Project Id",width:145},{id:"col22",label:"Zone",width:100},{id:"col23",label:"Asset Location",width:170},{id:"col24",label:"Asset Level",width:150},{id:"col25",label:"Asset Group Code",width:190},{id:"col26",label:"Original Priority",width:200},{id:"col27",label:"Plan Priority",width:200},{id:"col28",label:"Temporary Asset",width:200},{id:"col29",label:"Work Request No",width:200},{id:"col30",label:"Area",width:140},{id:"col31",label:"Wr Origination Date",width:230},{id:"col32",label:"Wr Due Date",width:140},{id:"col33",label:"Work Type",width:140},{id:"col34",label:"Work Class",width:140},{id:"col35",label:"Labor Type",width:140},{id:"col36",label:"Status Change Date",width:230},{id:"col37",label:"Schedule Date",width:180},{id:"col38",label:"Exception Date",width:180},{id:"col39",label:"Contract No",width:180},{id:"col40",label:"Wo Category",width:180},{id:"col41",label:"Customer Code",width:180},{id:"col42",label:"Supervisor Id",width:180},{id:"col43",label:"Estimated Contract Cost",width:250},{id:"col44",label:"Contract Cost",width:180},{id:"col45",label:"Estimated Material Cost",width:250},{id:"col46",label:"Material Cost",width:200},{id:"col47",label:"Estimated Labor Cost",width:230},{id:"col48",label:"Labor Cost",width:140},{id:"col49",label:"Eservice No",width:140},{id:"col50",label:"Export File Directory",width:230},{id:"col51",label:"Response To Request",width:230},{id:"col52",label:"Job Id/service No",width:200},{id:"col53",label:"Wko Det~r~nvarchar5",width:230},{id:"col54",label:"SERVICE SATISFACTION",width:230},{id:"col55",label:"Work Location (Udf 7)",width:230},{id:"col56",label:"Area",width:140},{id:"col57",label:"Quality Of Service",width:200},{id:"col58",label:"Eps Purchaser",width:170},{id:"col59",label:"Labor Cost",width:170},{id:"col60",label:"Invoice Amt",width:170},{id:"col61",label:"Total Markup Cost",width:200},{id:"col62",label:"Down Time (Hour)",width:200},{id:"col63",label:"Wko Det~r~nnumeric5",width:230},{id:"col64",label:"Exported Date",width:170},{id:"col65",label:"Wko Det Datetime2",width:230},{id:"col66",label:"Acknowledge Date",width:200},{id:"col67",label:"Wko Det~r~ndatetime4",width:230},{id:"col68",label:"Wko Det~r~ndatetime5",width:230},{id:"col69",label:"Created By",width:140},{id:"col70",label:"Created Date",width:160}],he=[{id:"",label:"Action",width:60},{id:"col2",label:"PM ID",width:145},{id:"col3",label:"PM Type",width:130,padding:10},{id:"col4",label:"PM Group",width:120},{id:"col5",label:"Asset No",width:120},{id:"col6",label:"Frequency Code",width:120},{id:"col7",label:"LPM Date",width:170},{id:"col8",label:"LPM Closed Date",width:180},{id:"col9",label:"Next Create Date",width:160},{id:"col10",label:"Next Due",width:150},{id:"col11",label:"Lead DAY",width:150},{id:"col12",label:"Closed Loop",width:150},{id:"col13",label:"PM Schedule Date",width:125},{id:"col14",label:"Disable Flag",width:125},{id:"col15",label:"Current Work Order",width:125},{id:"col16",label:"Fault Code",width:125},{id:"col17",label:"Description",width:105},{id:"col18",label:"Meter ID",width:180},{id:"col19",label:"LPM Usage",width:155},{id:"col20",label:"LPM UOM",width:135},{id:"col21",label:"Asset/PM Group Description",width:145},{id:"col22",label:"Shadow Group",width:100},{id:"col23",label:"Default WO Status",width:170},{id:"col24",label:"Plan Priority",width:150},{id:"col25",label:"Charge Cost Center",width:190},{id:"col26",label:"Asset Location",width:200},{id:"col27",label:"Originator",width:200},{id:"col28",label:"Approver",width:200},{id:"col29",label:"Planner",width:200},{id:"col30",label:"Credit Cost Center",width:140},{id:"col31",label:"Labor Account",width:230},{id:"col32",label:"Material Account",width:140},{id:"col33",label:"Contract Account",width:140},{id:"col34",label:"Project ID",width:140},{id:"col35",label:"Safety",width:140},{id:"col36",label:"Varchar20",width:230},{id:"col37",label:"Cause Code",width:180},{id:"col38",label:"Action Code",width:180},{id:"col39",label:"Work Area",width:180},{id:"col40",label:"Work Location",width:180},{id:"col41",label:"Work Group",width:180},{id:"col42",label:"Work Type",width:180},{id:"col43",label:"Work Class",width:250},{id:"col44",label:"Created By",width:180},{id:"col45",label:"Created Date",width:250}],ue={name:"",publish:[],stock:[]};function pe(e){var t,l,s,P,M,Q;let{onValueChange:G}=e;const Y=localStorage.getItem("site_ID"),J=localStorage.getItem("emp_mst_empl_id"),$=localStorage.getItem("emp_mst_login_id"),[X,te]=(0,o.useState)(!0),le=(0,r.TH)(),[se,ae]=(0,o.useState)("400px"),[ie,re]=(0,o.useState)(null===(t=le.state)||void 0===t?void 0:t.GaugeDashbordData),pe=(null===(l=le.state)||void 0===l?void 0:l.GaugeDashbordDataSort)||[],[xe,me]=(0,o.useState)((null===(s=le.state)||void 0===s?void 0:s.DropListId)||[]);console.log("DropListIdGet____",xe),console.log("DashbordDataGauge____",ie);const[we,je]=(0,o.useState)((null===(P=le.state)||void 0===P?void 0:P.GetDashbordDataPrmMst)||[]),[ge,ye]=(0,o.useState)(""),be=(0,C.S)(),Ce=(0,Z.tv)(),fe=(0,r.s0)(),ve=(0,I.x6)(),Ze=(0,W.K$)(),[ke,Se]=(0,o.useState)([]),[_e,De]=(0,o.useState)([]),[Ne,Ae]=(0,o.useState)(0),[Oe,Le]=(0,o.useState)(0),[Pe,Re]=(0,o.useState)(ue),[We,Ie]=(0,o.useState)(""),[Ee,qe]=(0,o.useState)([]),[Fe,Te]=(0,o.useState)(!1),Be=(0,R.k)(),[Me,ze]=(0,o.useState)(1),[Qe,Ge]=(0,o.useState)(!0),[Ue,Ve]=(0,o.useState)(!1),[Ye,He]=(0,o.useState)(!0),[Ke,Je]=(0,o.useState)(!1),[$e,Xe]=(0,o.useState)(!1),et=()=>Xe(!1),tt=(0,o.useRef)(null),[lt,st]=(0,o.useState)(""),[at,ot]=(0,o.useState)(!1),[it,rt]=(0,o.useState)(!1),[ct,nt]=(0,o.useState)(!1),[dt,ht]=(0,o.useState)([]),[ut,pt]=(0,o.useState)(!1),[xt,mt]=(0,o.useState)(!1),[wt,jt]=(0,o.useState)([]),[gt,yt]=(0,o.useState)([]),[bt,Ct]=(0,o.useState)(""),[ft,vt]=(0,o.useState)(!1),[Zt,kt]=(0,o.useState)(),[St,_t]=(0,o.useState)(!1),[Dt,Nt]=(0,o.useState)(!1),[At,Ot]=(0,o.useState)(!1),[Lt,Pt]=(0,o.useState)(!0),[Rt,Wt]=(0,o.useState)(!1),[It,Et]=(0,o.useState)(""),[qt,Ft]=(0,o.useState)(!1),[Tt,Bt]=(0,o.useState)([{selectedOption:"",operator:"",logical:"",valuept:"",RowId:"",prompt:"",siteCd:Y,queryTypedd:"F"}]),[Mt,zt]=(0,o.useState)(!1),[Qt,Gt]=(0,o.useState)(!1),Ut=(0,o.useCallback)((async()=>{try{const e=await B.Z.get("/get_workReq_filter_dropdown.php?site_cd=".concat(Y));qe(e.data)}catch(e){console.error("Error fetching data:",e)}}),[Y]),Vt=(0,o.useCallback)((async()=>{te(!0);try{const e=await B.Z.get("/get_workordermaster-Copy.php?site_cd=".concat(Y,"&page=").concat(Me));Se(e.data.data.result),Ae(e.data.totalRow),z().close(),te(!1)}catch(e){console.error("Error fetching data:",e)}}),[Y,Me]),Yt=async()=>{try{const e=await B.Z.get("/get_work_order_subsave_filter_dropdown.php?site_cd=".concat(Y,"&auditUser=").concat($));if(yt(e.data),""!==xe&&null!==xe){const t=e.data.find((e=>e.RowID===xe));if(t){const e=t.cf_query_title;Ct(e)}}}catch(e){console.error("Error fetching data:",e)}},Ht=(0,o.useCallback)((async()=>{te(!0);try{const e=await B.Z.post("/get_gauge_dashbord_workorder_data.php?page="+Me,{rows:ie,rowsort:pe,rowsPrm:we,site_cd:Y,emp_ID:J});"SUCCESS"===e.data.status&&(e.data.data.result.length>0&&(Se(e.data.data.result),Ae(e.data.total_count),ye(e.data.StatusPRM),Le(e.data.TotalCountPRM)),te(!1))}catch(e){console.error("Error fetching data:",e)}}),[Y,Me]),Kt=async(e,t)=>{var l;const s=(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)||We;ze(1);const a=gt.find((e=>e.cf_query_title===s));let o;if(Array.isArray(t)&&t.length>0&&(o=t.find((e=>e.cf_query_title===s))),a){const e=a.RowID,t=a.cf_query_list_prompt;if("1"==t){Ft(!0),z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const l=await B.Z.get("/get_work_order_filter_query_data.php?site_cd="+Y+"&RowID="+e);if(l.data.data&&l.data.data.list_typeF&&l.data.data.list_typeF.length>0){const s=l.data.data.list_typeF.map((l=>({selectedOption:l.cf_query_list_column,operator:l.cf_query_list_operator,valuept:l.cf_query_list_value,logical:l.cf_query_list_logical,siteCd:Y,RowId:e,prompt:t,queryTypedd:"F"})));setTimeout((()=>{z().close(),Bt(s)}),3e3)}else z().fire({icon:"error",customClass:{container:"swalcontainercustom"},title:"Oops...",text:"No record found Please try again !"})}catch(i){console.error("Error fetching data:",i)}return}st(e),Et(e),ze(1),me([]),je([]),re([]),Ct("")}else{const e=o.RowID;st(e),Et(e),ze(1),me([]),je([]),re([]),Ct("")}Ie(s)},Jt=(0,o.useCallback)((async()=>{te(!0);try{const e=await B.Z.post("/get_workorder_list_select_option_data.php?site_cd=".concat(Y,"&ItemID=").concat(It,"&page=").concat(Me,"&EmpId=").concat(J));e.data.data&&e.data.data.result&&e.data.data.result.length>0?(Se(e.data.data.result),Ae(e.data.DashbrdCount),te(!1)):(Se(""),Ae(""),te(!1),z().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}),[Y,Me,It]);(0,o.useEffect)((()=>{(async()=>{try{var e,t;const s=(null===(e=le.state)||void 0===e?void 0:e.currentPage)||1,a=(null===(t=le.state)||void 0===t?void 0:t.selectedOption)||"";if(""!==a&&null!==a)try{const e=await B.Z.get("/get_work_order_subsave_filter_dropdown.php?site_cd=".concat(Y,"&auditUser=").concat($));e.data.length>1&&(yt(e.data),Gt(!0),Kt({target:{value:a}},e.data))}catch(l){console.error("Error fetching data:",l)}else Gt(!0);ze(s)}catch(l){console.error("Error in the first useEffect:",l)}})()}),[le.search]),(0,o.useEffect)((()=>{Qt&&(Array.isArray(ie)&&ie.length>0||Array.isArray(we)&&we.length>0?Ht():""!=It&&null!=It?Jt():Vt(),Yt())}),[Qt,Y,Me,It,Vt,Jt]),(0,o.useEffect)((()=>{Ut()}),[Ut]),(0,o.useEffect)((()=>{const e=()=>{const e=window.innerHeight,t=Math.floor(.6*e)+"px";ae(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const $t=function(e){let{inputData:t,comparator:l,filters:s}=e;const{name:a}=s,o=t.map(((e,t)=>[e,t]));return o.sort(((e,t)=>{const s=l(e[0],t[0]);return 0!==s?s:e[1]-t[1]})),t=o.map((e=>e[0])),t}({inputData:Array.isArray(ke)?ke:[],comparator:(0,I.sQ)(ve.order,ve.orderBy),filters:Pe}),Xt=$t.slice(ve.page*ve.rowsPerPage,ve.page*ve.rowsPerPage+ve.rowsPerPage),el=(ve.dense,!a()(ue,Pe)),tl=(0,o.useCallback)(((e,t)=>{ve.onResetPage(),Re((l=>({...l,[e]:t})))}),[ve]),ll=(0,o.useCallback)((async(e,t)=>{const l=e;console.log("rowwid____",l),console.log("row____",t),""!==l&&"NULL"!==l&&z().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async e=>{e.isConfirmed&&(te(!0),"CMP"===t.col6?z().fire({title:"Warning!",text:"This Work Order can't be Deleted Because it Already Completed.",icon:"info"}):"CLO"===t.col6?z().fire({title:"Warning!",text:"This Work Order can't be Deleted Because it Already Closed.",icon:"info"}):z().close())}))}),[ke,Ce,Y]),sl=(0,o.useCallback)((()=>{const e=ke.filter((e=>!ve.selected.includes(e.id)));Se(e),ve.onUpdatePageDeleteRows({totalRows:ke.length,totalRowsInPage:Xt.length,totalRowsFiltered:$t.length})}),[$t.length,Xt.length,ve,ke]),al=(0,o.useCallback)((e=>{fe("/dashboard/work/neworder",{state:{RowID:e,currentPage:Me,selectedOption:We}})}),[Ce,Me,We]),ol=(0,o.useCallback)(((e,t)=>{const l=ke.some((t=>"CMP"===t.col6&&t.col71===e)),s=ke.some((t=>"CLO"===t.col6&&t.col71===e));l?z().fire({icon:"warning",title:"Oops...",text:"This Work Order No ".concat(t.col2," Already complete.")}):s?z().fire({icon:"warning",title:"Oops...",text:"This Work Order No ".concat(t.col2," Already Close.")}):fe("/dashboard/work/neworder",{state:{completeRowID:e}})}),[ke,Ce]),il=(0,o.useCallback)(((e,t)=>{ke.some((t=>"CLO"===t.col6&&t.col71===e))?z().fire({icon:"warning",title:"Oops...",text:"This Work Order No ".concat(t.col2," Already Close.")}):fe("/dashboard/work/neworder",{state:{closeRowID:e}})}),[ke,Ce]),rl=(0,o.useCallback)((()=>{Re(ue),tt.current.value="",Vt()}),[Vt]),cl=async()=>{const e=tt.current.value;if(""!==e&&null!==e){z().fire({title:"Please Wait!",allowOutsideClick:!1}),z().showLoading();try{const t=await B.Z.get("/get_SearchWorkmaster.php?site_cd=".concat(Y,"&searchTerm=").concat(e));if(t.data.data.result.length>0){De(t.data.data.result),Ae(t.data.data.result.length);const l=t.data.data.result.filter((t=>{const l=e.toLowerCase(),s=(t.col2||"").toLowerCase(),a=(t.col3||"").toLowerCase(),o=(t.col4||"").toLowerCase(),i=(t.col5||"").toLowerCase(),r=(t.col6||"").toLowerCase(),c=(t.col7||"").toLowerCase(),n=(t.col8||"").toLowerCase(),d=(t.col13||"").toLowerCase(),h=(t.col15||"").toLowerCase(),u=(t.col16||"").toLowerCase(),p=(t.col18||"").toLowerCase(),x=(t.col19||"").toLowerCase(),m=(t.col20||"").toLowerCase(),w=(t.col21||"").toLowerCase(),j=(t.col22||"").toLowerCase(),g=(t.col23||"").toLowerCase(),y=(t.col24||"").toLowerCase(),b=(t.col25||"").toLowerCase(),C=(t.col26||"").toLowerCase(),f=(t.col27||"").toLowerCase(),v=(t.col28||"").toLowerCase(),Z=(t.col29||"").toLowerCase(),k=(t.col30||"").toLowerCase(),S=(t.col33||"").toLowerCase(),_=(t.col34||"").toLowerCase(),D=(t.col35||"").toLowerCase(),N=(t.col39||"").toLowerCase(),A=(t.col40||"").toLowerCase(),O=(t.col41||"").toLowerCase(),L=(t.col42||"").toLowerCase(),P=(t.col43||"").toLowerCase(),R=(t.col44||"").toLowerCase(),W=(t.col45||"").toLowerCase(),I=(t.col46||"").toLowerCase(),E=(t.col47||"").toLowerCase(),q=(t.col48||"").toLowerCase(),F=(t.col49||"").toLowerCase(),T=(t.col69||"").toLowerCase();return s.includes(l)||a.includes(l)||o.includes(l)||i.includes(l)||r.includes(l)||c.includes(l)||n.includes(l)||d.includes(l)||h.includes(l)||u.includes(l)||p.includes(l)||x.includes(l)||m.includes(l)||w.includes(l)||j.includes(l)||g.includes(l)||y.includes(l)||b.includes(l)||C.includes(l)||f.includes(l)||v.includes(l)||Z.includes(l)||k.includes(l)||S.includes(l)||_.includes(l)||D.includes(l)||N.includes(l)||A.includes(l)||O.includes(l)||L.includes(l)||P.includes(l)||R.includes(l)||W.includes(l)||I.includes(l)||E.includes(l)||q.includes(l)||F.includes(l)||T.includes(l)}));Se(l),ze(1),z().close()}else z().close(),z().fire({icon:"error",title:"Oops...",text:"No Record Found!"})}catch(t){console.error("Error fetching data:",t)}}},nl=dt.map((e=>({value:e.column_name,label:"".concat(e.default_label)}))),dl=async()=>{try{const e=await B.Z.get("/getWorkOrderFilterName.php");"SUCCESS"==e.data.status&&ht(e.data.data)}catch(e){console.error("Error fetching data:",e)}},[hl,ul]=(0,o.useState)([{selectedOption:"",operator:"Like",logical:"AND",prompt:"0",valuept:"",siteCd:Y,queryTypedd:"F"}]),[pl,xl]=(0,o.useState)([{selectedOptionShort:"",promptAsd:"ASC",siteCd:Y,queryType:"S"}]),ml=hl.some((e=>""===e.selectedOption)),wl=[{value:"(",label:"("},{value:"",label:""}],jl=[{value:"(",label:")"},{value:"",label:""}],gl=[{value:"like",label:"Like"},{value:"not like",label:"Not Like"},{value:"I=",label:"Is"},{value:"!=",label:"Is not"},{value:"=",label:"Equal to"},{value:">",label:"Greater than"},{value:"<",label:"Less than"},{value:">=",label:"Greater than or equal to"},{value:"<=",label:"Less than or equal to"},{value:"<>",label:"Not equal to"}],yl=[{value:"And",label:"And"},{value:"Or",label:"Or"}],bl=async()=>{z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.post("/get_retrive_popup_filed_data.php?page="+Me,{rows:hl,rowsort:pl,SiteCD:Y,admin:J});if(console.log("check___res__",e),e.data.data&&e.data.data.result&&e.data.data.result.length>0){Se(e.data.data.result),Ae(e.data.total_count),Ct(e.data.titleName),z().close(),et();const t=hl.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));ul(t);const l=hl.map((e=>({...e,selectedOptionShort:""})));xl(l)}else z().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}})}catch(e){console.error("Error fetching data:",e)}},Cl=()=>{mt(!1),vl({queryName:"",description:""})},[fl,vl]=(0,o.useState)([{queryName:"",description:"",availability:"G",site_cd:Y,owner:J}]),Zl=e=>{const{name:t,value:l}=e.target;vl((e=>({...e,[t]:l})))},kl=async()=>{z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();const e={formDataSv:fl,rowsQrtData:hl,rowsortQrtData:pl,site_cd:Y,owner:J,availability:"G"};try{const t=await B.Z.post("/InserWorkOrderFilterSaveData.php",e);"SUCCESS"==t.data.status&&(Ct(t.data.Title),Yt(),bl(),z().close(),Cl(),et())}catch(t){console.error("Error fetching data:",t)}},[Sl,_l]=(0,o.useState)([{selectedOption:"",operator:"",logical:"",prompt:"",valuept:"",siteCd:Y,queryTypedd:"F"}]),[Dl,Nl]=(0,o.useState)([{selectedOptionShort:"",promptAsd:"",siteCd:Y,queryType:"S"}]),Al=async()=>{z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.post("/get_retrive_popup_filed_data.php?page="+Me,{rows:Sl,rowsort:Dl,SiteCD:Y,admin:J});Se(e.data.data.result),Ae(e.data.total_count),z().close(),et();const t=Sl.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));ul(t);const l=Dl.map((e=>({...e,selectedOptionShort:""})));xl(l)}catch(e){console.error("Error fetching data:",e)}},Ol=()=>{vt(!1),et(),Cl(),kt(""),_l([]),Nl([])},Ll=()=>{zt(!1),vl({queryName:"",description:""})},Pl=async()=>{const e=localStorage.getItem("site_ID"),t=localStorage.getItem("emp_mst_empl_id");z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();const l={formDataSv:fl,rowsQrtData:Sl,rowsortQrtData:Dl,SITE_CD:e,OWNER_ID:t,availability:"G"};try{const e=await B.Z.post("/InsertWorkOrderQueryListSaveAsData.php",l);"SUCCESS"==e.data.status&&(Ct(e.data.Title),Yt(),Al(),_l([]),kt(""),Nl([]),z().close(),Cl(),et(),Ll(),Ol())}catch(s){console.error("Error fetching data:",s)}},Rl=(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&(Bt([{selectedOption:"",operator:"",logical:"",valuept:"",RowId:"",prompt:"",siteCd:Y,queryTypedd:"F"}]),Ft(!1))};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(i.ql,{children:[(0,H.jsx)("title",{children:"CMMS System"}),(0,H.jsx)("meta",{name:"description",content:"Work Order List"})]}),(0,H.jsxs)(x.Z,{maxWidth:!Ze.themeStretch&&"lg",children:[(0,H.jsx)("div",{className:"CustomBreadAsset",children:(0,H.jsx)(T.Z,{heading:"Work Order List",links:[],action:(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,H.jsx)(h.Z,{component:k.r,variant:"contained",className:Ye?"active tableView":"tableView",onClick:()=>{He(!Ye),Je(!1),Ge(!0),Ve(!1)},children:(0,H.jsx)(E.Z,{icon:"fluent:table-20-filled"})}),(0,H.jsx)(h.Z,{component:k.r,variant:"contained",className:Ke?"active calendarView":"calendarView",onClick:()=>{Je(!Ke),He(!1),Ge(!1),Ve(!0)},children:(0,H.jsx)(E.Z,{icon:"clarity:calendar-solid"})}),(0,H.jsx)(h.Z,{component:c.rU,variant:"contained",className:"AddNewButton2",startIcon:(0,H.jsx)(E.Z,{icon:"mingcute:add-line"}),to:{pathname:"/dashboard/work/neworder",state:{select:"New_WorkOrder"}},children:"New"})]}),sx:{mb:{xs:3,md:5}}})}),(0,H.jsx)("div",{className:"workReqpage",children:Qe&&(0,H.jsxs)(n.Z,{children:[(0,H.jsxs)(y.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1},marginTop:"20px"},children:[(0,H.jsxs)(h.Z,{className:"AssetFilterBtn",variant:"outlined",sx:{flexShrink:0},onClick:()=>{Xe(!0),dl()},children:[(0,H.jsx)(V.JO,{icon:"fluent:filter-12-filled",style:{marginRight:"5px"}}),"Filter"]}),(0,H.jsxs)(S.Z,{sx:{flexShrink:0,width:{xs:1,md:300}},className:"selectOptioncls",children:[(0,H.jsx)(_.Z,{id:"select-label",className:""!==bt||We?"selectedcss":"",children:"Select an Option"}),(0,H.jsx)(D.Z,{labelId:"select-label",id:"select",input:(0,H.jsx)(U.Z,{label:"Select an option"}),value:""!==bt?bt:We,onChange:Kt,sx:{textTransform:"capitalize"},children:gt.map((e=>(0,H.jsxs)(w.Z,{value:e.cf_query_title,children:[(0,H.jsx)(E.Z,{icon:"mdi:sql-query",style:{display:"inline-flex",verticalAlign:"middle",marginRight:"6px",marginTop:"-5px",width:"16px",height:"16px"}}),(0,H.jsx)("span",{style:{verticalAlign:"middle"},children:e.cf_query_title})]},e.RowID)))})]}),(0,H.jsxs)(y.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,H.jsxs)("div",{className:"wordkOrdersearchInput ".concat(Fe?"active":""),style:{display:"flex",alignItems:"center"},children:[(0,H.jsx)("input",{type:"text",className:"Seachrinput",placeholder:"Search..",ref:tt,onKeyDown:e=>{if("Backspace"===e.key){e.preventDefault();const t=tt.current.value.slice(0,-1);tt.current.value=t,""===t&&rl()}"Enter"===e.key&&""!==tt.current.value.trim()&&cl()},onFocus:()=>{Te(!0)},onBlur:()=>{Te(!1)}}),(0,H.jsxs)("div",{children:[Pe.name&&(0,H.jsx)(j.Z,{onClick:()=>{rl(),tt.current.focus()},className:"customclearbutton",children:(0,H.jsx)(E.Z,{icon:"ic:outline-clear"})}),(0,H.jsx)(j.Z,{onClick:cl,className:"customsearchbutton",children:(0,H.jsx)(E.Z,{icon:"eva:search-fill"})})]})]}),(0,H.jsx)(j.Z,{onClick:be.onOpen,children:(0,H.jsx)(E.Z,{icon:"eva:more-vertical-fill"})})]})]}),(0,H.jsx)(C.Z,{open:be.open,onClose:be.onClose,arrow:"right-top",sx:{width:180},children:(0,H.jsxs)(w.Z,{onClick:()=>{(async()=>{if(""!==lt){z().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.post("/getWorkOrderListExcelData.php?site_cd=".concat(Y,"&ItemID=").concat(lt));z().close(),e.data.data&&e.data.data.result&&e.data.data.result.length>0?(ce({resultData:e.data.data.result}),be.onClose(),z().close()):(Se(""),z().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}else{z().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.get("/getWorkOrderListAllDataEcxelsheet.php?site_cd=".concat(Y));e.data.data&&e.data.data.result&&e.data.data.result.length>0?(ce({resultData:e.data.data.result}),be.onClose(),z().close()):(Se(""),z().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}})()},children:[(0,H.jsx)(E.Z,{icon:"solar:export-bold"}),"Export to Excel"]})}),el&&(0,H.jsx)(ee,{filters:Pe,onFilters:tl,onResetFilters:rl,results:$t.length,sx:{p:2.5,pt:0}}),(0,H.jsxs)(g.Z,{sx:{position:"relative"},children:[(0,H.jsx)(I.Z4,{dense:ve.dense,numSelected:(null===(M=ve.selected)||void 0===M?void 0:M.length)||0,rowCount:(null===ke||void 0===ke?void 0:ke.length)||0,onSelectAllRows:e=>ve.onSelectAllRows(e,ke.map((e=>e.id))),action:(0,H.jsx)(u.Z,{title:"Delete",children:(0,H.jsx)(j.Z,{color:"primary",onClick:Be.onTrue,children:(0,H.jsx)(E.Z,{icon:"solar:trash-bin-trash-bold"})})})}),(0,H.jsx)(q.Z,{sx:{overflowX:"auto",maxHeight:se},children:(0,H.jsxs)(d.Z,{size:ve.dense?"small":"medium",sx:{minWidth:960},children:[(0,H.jsx)(I.K,{order:ve.order,orderBy:ve.orderBy,headLabel:""!=we?he:de,rowCount:null===ke||void 0===ke?void 0:ke.length,numSelected:null===(Q=ve.selected)||void 0===Q?void 0:Q.length,onSort:ve.onSort,className:"stickyheader"}),(0,H.jsxs)(m.Z,{className:"AssetTable",children:[X?(0,H.jsx)(f.Z,{children:(0,H.jsx)(v.Z,{colSpan:"71",className:"NoRecodcls",children:(0,H.jsxs)(N.Z,{open:X,"aria-labelledby":"loading-dialog-title",PaperProps:{style:{backgroundColor:"transparent"}},BackdropProps:{className:"yourbackdropclass"},children:[(0,H.jsx)(A.Z,{id:"loading-dialog-title",style:{textAlign:"center"}}),(0,H.jsx)(O.Z,{children:(0,H.jsx)("div",{style:{textAlign:"center",paddingTop:"10px"},children:(0,H.jsx)(p.Z1,{radius:"9",visible:!0,ariaLabel:"three-circles-loading",color:"green"})})})]})})}):(0,H.jsx)(H.Fragment,{children:0===ke.length?(0,H.jsx)(f.Z,{children:(0,H.jsx)(v.Z,{colSpan:"71",className:"NoRecodcls",children:"No Record Found"})}):(0,H.jsx)(H.Fragment,{children:$t.map((e=>(0,H.jsx)(K,{row:e,rowStats:ge,selected:ve.selected.includes(e.id),onSelectRow:()=>ve.onSelectRow(e.id),onDeleteRow:()=>ll(e.col71,e),onEditRow:()=>al(e.col71,e),onCompleteRow:()=>ol(e.col71,e),onCloseRow:()=>il(e.col71,e)},e.id)))})}),(0,H.jsx)(I.$W,{emptyRows:(0,I.fQ)(ve.page,ve.rowsPerPage,ke.length)})]})]})})]}),(0,H.jsx)(I.S_,{count:Oe>0?Oe:Ne,page:Me-1,rowsPerPage:ve.rowsPerPage,onPageChange:(e,t)=>{ze(t+1),ve.onChangePage(e,t)},currentPage:Me,onRowsPerPageChange:e=>{ve.onChangeRowsPerPage(e)}})]})}),Ue&&(0,H.jsx)("div",{className:"clandarV",children:(0,H.jsx)(oe,{})})]}),(0,H.jsx)(F.Q,{open:Be.value,onClose:Be.onFalse,title:"Delete",content:(0,H.jsxs)(H.Fragment,{children:["Are you sure want to delete"," ",(0,H.jsxs)("strong",{children:[" ",ve.selected.length," "]})," items?"]}),action:(0,H.jsx)(h.Z,{variant:"contained",color:"error",onClick:()=>{sl(),Be.onFalse()},children:"Delete"})}),(0,H.jsxs)(ne,{onClose:et,"aria-labelledby":"customized-dialog-title",open:$e,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(A.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(E.Z,{icon:"mdi:sql-query"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Define Query"})]}),(0,H.jsx)(j.Z,{"aria-label":"close",onClick:et,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(E.Z,{icon:"material-symbols:close"})}),(0,H.jsxs)(O.Z,{dividers:!0,children:[(0,H.jsx)("div",{className:"queryBtn",children:(0,H.jsxs)(b.Z,{container:!0,spacing:1,children:[(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{vt(!0)},children:[(0,H.jsx)(E.Z,{icon:"carbon:query-queue"})," Query List"]})}),(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{hl.some((e=>""!==e.selectedOption))?bl():(async()=>{z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.post("/get_retrive_all_data.php?page="+Me,{SiteCD:Y,admin:J});if(e.data.data&&e.data.data.result&&e.data.data.result.length>0){Se(e.data.data.result),Ae(e.data.total_count),Ct(e.data.titleName),z().close(),et();const t=hl.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));ul(t);const l=hl.map((e=>({...e,selectedOptionShort:""})));xl(l)}else z().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}})}catch(e){console.error("Error fetching data:",e)}})()},children:[(0,H.jsx)(E.Z,{icon:"carbon:data-base"})," Retrive"]})}),(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{mt(!0)},disabled:ml,children:[(0,H.jsx)(E.Z,{icon:"mingcute:save-fill"}),"Save"]})})]})}),(0,H.jsx)("div",{className:"filterByorder",children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,H.jsx)("legend",{children:"Filter By"}),(0,H.jsxs)("table",{children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:{textAlign:"center"},children:" ( "}),(0,H.jsx)("th",{children:"Field Name"}),(0,H.jsx)("th",{children:"Operator"}),(0,H.jsx)("th",{children:"Prompt"}),(0,H.jsx)("th",{children:"Value"}),(0,H.jsx)("th",{children:"Logical"}),(0,H.jsx)("th",{style:{textAlign:"center"},children:" ) "})]})}),(0,H.jsx)("tbody",{children:hl.map(((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(D.Z,{className:"custom-Astselect",style:{width:"100%"},children:wl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)(D.Z,{className:"custom-Astselect ".concat(t===hl.length-1&&at?"error-border":"mammama"),style:{width:"100%"},onChange:e=>((e,t)=>{const l=[...hl];l[e].selectedOption=t,ot(!1),ul(l)})(t,e.target.value),children:nl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"17%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect",onChange:e=>((e,t)=>{const l=[...hl];l[e].operator=t,ul(l)})(t,e.target.value),children:gl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"8%"},children:(0,H.jsx)("input",{style:{width:"100%"},class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",onChange:e=>((e,t)=>{const l=[...hl];l[e].prompt=t?"1":"0",ul(l)})(t,e.target.checked)})}),(0,H.jsx)("td",{style:{width:"26%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},className:"custom-Astselect ".concat(t===hl.length-1&&it?"error-border":"mammama"),oninput:"handleInput(event)",onChange:e=>((e,t)=>{const l=[...hl];l[e].valuept=t,rt(!1),ul(l),!t&&l[e].selectedOption})(t,e.target.value)})}),(0,H.jsx)("td",{style:{width:"10%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===hl.length-1&&ct?"error-border":"mammama"),onChange:e=>((e,t)=>{const l=[...hl];l[e].logical=t.target.value,nt(!1),ul(l)})(t,e),children:yl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect",children:jl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{children:(0,H.jsx)(j.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(hl.length>1){const t=[...hl];t.splice(e,1),ul(t)}})(t),children:(0,H.jsx)(E.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{const e=hl.length>0&&(!hl[hl.length-1].selectedOption||""===hl[hl.length-1].selectedOption);e?(ot(!e.selectedOption),rt(!e.valuept),nt(!e.logical)):(ul((e=>[...e,{selectedOption:"",operator:"Like",logical:"",prompt:"0",valuept:"",siteCd:Y,queryTypedd:"F"}])),ot(!1),rt(!1),nt(!1))},className:"AddFilterBtn",children:[(0,H.jsx)(E.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})}),(0,H.jsx)("div",{className:"filterShort",children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,H.jsx)("legend",{children:"Sort By"}),(0,H.jsxs)("table",{children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"Field Name"}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{children:"Ascending?"})]})}),(0,H.jsx)("tbody",{children:pl.map(((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"60%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect shrt ".concat(t===pl.length-1&&ut?"error-border":"mammama"),onChange:e=>((e,t)=>{const l=[...pl];l[e].selectedOptionShort=t,pt(!1),xl(l)})(t,e.target.value),children:nl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"10%"},children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",checked:"ASC"===pl[t].promptAsd,onChange:e=>((e,t)=>{const l=[...pl];l[e].promptAsd=t?"ASC":"DESC",xl(l)})(t,e.target.checked),id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,H.jsx)("td",{}),(0,H.jsx)("td",{children:(0,H.jsx)(j.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(pl.length>1){const t=[...pl];t.splice(e,1),xl(t)}})(t),children:(0,H.jsx)(E.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{if(""===pl[pl.length-1].selectedOptionShort)pt(""===pl[pl.length-1].selectedOptionShort);else{const e={selectedOptionShort:"",promptAsd:"ASC"};xl([...pl,e])}},className:"AddFilterBtn",children:[(0,H.jsx)(E.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})]})]}),(0,H.jsxs)(ne,{onClose:Cl,"aria-labelledby":"customized-dialog-title",open:xt,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(A.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(E.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Save Query"})]}),(0,H.jsx)(j.Z,{"aria-label":"close",onClick:Cl,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(E.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(O.Z,{dividers:!0,children:(0,H.jsxs)("div",{className:"astSubpopup",children:[(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Query name:"}),(0,H.jsxs)("div",{className:"form-group ",children:[(0,H.jsx)("input",{type:"text",id:"customInput",name:"queryName",value:fl.queryName,onChange:Zl,className:"bsc_sav",list:"options",style:{width:"100%"}}),(0,H.jsx)("datalist",{id:"options",children:gt.map(((e,t)=>(0,H.jsx)("option",{value:e.cf_query_title},t.RowID)))})]})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Description:"}),(0,H.jsx)("div",{className:"form-group",children:(0,H.jsx)("textarea",{id:"w3review",name:"description",rows:"3",value:fl.description,onChange:Zl,cols:"70",style:{width:"100%"}})})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Availability:"}),(0,H.jsxs)("div",{class:"form-check",children:[(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"G",checked:!0,onChange:Zl}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Global(available to everyone)"}),(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"P",onChange:Zl}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios2",children:"Personal"})]})]})]})}),(0,H.jsx)(L.Z,{children:(0,H.jsx)(h.Z,{color:"primary",onClick:()=>{if(""!==fl.queryName.trim()){const e=fl.queryName;gt.find((t=>t.cf_query_title===e))?z().fire({title:"Are you sure?",text:"Do you want to overwrite the query "+e,icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No"}).then((e=>{var t,l,s,a;e.isConfirmed&&(""!==(null===hl||void 0===hl||null===(t=hl.selectedOption)||void 0===t?void 0:t.trim())&&""!==(null===hl||void 0===hl||null===(l=hl.logical)||void 0===l?void 0:l.trim())&&""!==(null===hl||void 0===hl||null===(s=hl.valuept)||void 0===s?void 0:s.trim())&&""!==(null===pl||void 0===pl||null===(a=pl.selectedOptionShort)||void 0===a?void 0:a.trim())&&kl())})):kl()}else console.log("empty__")},children:"Save"})})]}),(0,H.jsxs)(ne,{onClose:Ol,"aria-labelledby":"customized-dialog-title",open:ft,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(A.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(E.Z,{icon:"mdi:sql-query"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:" Query List"})]}),(0,H.jsx)(j.Z,{"aria-label":"close",onClick:Ol,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(E.Z,{icon:"material-symbols:close"})}),(0,H.jsxs)(O.Z,{dividers:!0,children:[(0,H.jsx)("div",{className:"queryBtn",children:(0,H.jsxs)(b.Z,{container:!0,spacing:1,children:[(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:async()=>{const[e,t]=Zt.split("-");if(Zt&&""!==t)try{z().fire({title:"Are you sure?",text:"You want to delete "+e+" query!",icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async e=>{if(e.isConfirmed){"SUCCESS"==(await B.Z.get("/WorkOrderQueryListDataDelete.php?value="+t+"&siteId="+Y)).data.status&&(Yt(),kt(""),_l([]),Nl([]),z().fire("Deleted!","Your query has been deleted.","success"))}}))}catch(l){console.error("Error fetching data:",l)}else console.log("empty")},children:[(0,H.jsx)(E.Z,{icon:"fluent:delete-48-regular"})," Delete"]})}),(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:async()=>{const[e,t]=Zt.split("-");if(Dl.some((e=>!e.selectedOptionShort))&&""!=t);else{z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();const e={rowsQrtData:Sl,siteCd:Y,owner:J,mst_RowID:t,rowsortQrtData:Dl};try{"SUCCESS"==(await B.Z.post("/insert_work_order_query_listsave_data.php",e)).data.status&&(z().close(),z().fire({title:"Success!",text:"Your query update successfully.",icon:"success",confirmButtonText:"OK",customClass:{container:"swalcontainercustom"}}).then((e=>{e.isConfirmed&&(_l([]),kt(""),Nl([]),Al(),Ol())})))}catch(l){console.error("Error fetching data:",l)}}},children:[(0,H.jsx)(E.Z,{icon:"ic:outline-save-as"})," Save"]})}),(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{zt(!0)},children:[(0,H.jsx)(E.Z,{icon:"fad:saveas"}),"Save As"]})})]})}),(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{className:"shortBydd list mt-4",children:(0,H.jsx)("div",{className:"table-containeR",children:(0,H.jsxs)("fieldset",{className:"Query-by-fieldset",children:[(0,H.jsx)("legend",{children:"Query Name"}),(0,H.jsxs)("table",{className:"custom-tablE",children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:{width:"100%"},children:"Query Title"}),(0,H.jsx)("th",{style:{width:"10%"},children:"Default?"})]})}),(0,H.jsxs)("tbody",{children:[(0,H.jsx)(D.Z,{id:"select",style:{width:"60%"},value:Zt,onChange:e=>(async e=>{let t,l;if(kt(e),1===e.split("-").length-1)[t,l]=e.split("-");else{const s=e.split("-");t=s[0].trim(),l=s[s.length-1].trim()}if(Ct(t),_l([]),Nl([]),""!==e){z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();try{const e=await B.Z.get("/get_work_order_filter_query_data.php?site_cd="+Y+"&RowID="+l);if(e.data.data&&e.data.data.list_typeF&&e.data.data.list_typeF.length>0){const t=e.data.data.list_typeF.map((e=>({selectedOption:e.cf_query_list_column,operator:e.cf_query_list_operator,prompt:e.cf_query_list_prompt,valuept:e.cf_query_list_value,logical:e.cf_query_list_logical,siteCd:Y,queryTypedd:"F"})));setTimeout((()=>{z().close(),_l((e=>[...e,...t]))}),3e3)}else z().fire({icon:"error",customClass:{container:"swalcontainercustom"},title:"Oops...",text:"No record found Please try again !"});if(e.data.data&&e.data.data.list_typeS.length>0){const t=e.data.data.list_typeS.map((e=>({selectedOptionShort:e.cf_query_list_column,promptAsd:e.cf_query_list_order_by,queryType:"S",siteCd:Y})));setTimeout((()=>{z().close(),Nl((e=>[...e,...t]))}),3e3)}}catch(s){console.error("Error fetching data:",s)}}})(e.target.value),sx:{textTransform:"capitalize"},children:gt.map((e=>(0,H.jsx)(w.Z,{value:"".concat(e.cf_query_title,"-").concat(e.RowID),children:e.cf_query_title},e.RowID)))}),(0,H.jsx)("td",{children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",checked:Lt,onChange:()=>{Pt(!Lt)},style:{width:"65px",height:"15px",marginTop:"-5px"}})})]})]})]})})}),(0,H.jsx)("div",{className:"FiltrBydd mt-2",children:(0,H.jsx)("div",{children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,H.jsx)("legend",{children:"Filter By"}),(0,H.jsxs)("table",{style:{borderCollapse:"collapse"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:{textAlign:"center",width:"7%"},children:"("}),(0,H.jsx)("th",{style:{width:"25%"},children:"Field Name"}),(0,H.jsx)("th",{style:{width:"17%"},children:"Operator"}),(0,H.jsx)("th",{style:{width:"8%"},children:"Prompt"}),(0,H.jsx)("th",{style:{width:"26%"},children:"Value"}),(0,H.jsx)("th",{style:{width:"10%"},children:"Logical"}),(0,H.jsx)("th",{style:{textAlign:"center",width:"7%"},children:")"})]})}),(0,H.jsx)("tbody",{children:Sl.map(((e,t)=>(0,H.jsx)(o.Fragment,{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect",children:wl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===Sl.length-1&&St?"error-border":"mammama"),value:e.selectedOption||"",onChange:e=>((e,t)=>{const l=[...Sl];l[e].selectedOption=t,_t(!1),_l(l)})(t,e.target.value),children:nl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"17%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect",value:e.operator||"Like",onChange:e=>((e,t)=>{const l=[...Sl];l[e].operator=t,_l(l)})(t,e.target.value),children:gl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"8%"},children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",onChange:e=>((e,t)=>{const l=[...Sl];l[e].prompt=t?"1":"0",_l(l)})(t,e.target.checked),checked:"1"===e.prompt,id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,H.jsx)("td",{style:{width:"26%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},className:"custom-Astselect ".concat(t===Sl.length-1&&Dt?"error-border":"mammama"),value:e.valuept||"",oninput:"handleInput(event)",onChange:e=>((e,t)=>{const l=[...Sl];l[e].valuept=t,_l(l)})(t,e.target.value)})}),(0,H.jsx)("td",{style:{width:"10%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===Sl.length-1&&At?"error-border":"mammama"),value:e.logical||"",children:yl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect",children:jl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{children:(0,H.jsx)(j.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(Sl.length>1){const t=[...Sl];t.splice(e,1),_l(t)}})(t),children:(0,H.jsx)(E.Z,{icon:"carbon:close"})})})]},t)},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{const e=Sl.length>0&&(!Sl[Sl.length-1].selectedOption||""===Sl[Sl.length-1].selectedOption);e?(_t(!e.selectedOption),Nt(!e.valuept),Ot(!e.logical)):(_l((e=>[...e,{selectedOption:"",operator:"Like",logical:"",prompt:"0",valuept:"",siteCd:Y,queryTypedd:"F"}])),_t(!1),Nt(!1),Ot(!1))},className:"AddFilterBtn",children:[(0,H.jsx)(E.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})}),(0,H.jsx)("div",{className:"shortBydd mt-4 shtQtr",children:(0,H.jsx)("div",{children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset",children:[(0,H.jsx)("legend",{children:"Sort By"}),(0,H.jsxs)("table",{style:{borderCollapse:"collapse"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"Field Name"}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{children:"Ascending?"})]})}),(0,H.jsx)("tbody",{children:Dl.map(((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"60%"},children:(0,H.jsx)(D.Z,{style:{width:"100%"},className:"custom-Astselect sht ".concat(t===Dl.length-1&&Rt?"error-border":"mammama"),onChange:e=>((e,t)=>{const l=[...Dl];l[e].selectedOptionShort=t,Wt(!1),Nl(l)})(t,e.target.value),value:e.selectedOptionShort||"",children:nl.map(((e,t)=>(0,H.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"8%"},children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",checked:"ASC"===Dl[t].promptAsd,onChange:e=>((e,t)=>{const l=[...Dl];l[e].promptAsd=t?"ASC":"DESC",Nl(l)})(t,e.target.checked),id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,H.jsx)("td",{}),(0,H.jsx)("td",{children:(0,H.jsx)(j.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(Dl.length>1){const t=[...Dl];t.splice(e,1),Nl(t)}})(t),children:(0,H.jsx)(E.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{const e=Dl.length>0&&(!Dl[Dl.length-1].selectedOptionShort||""===Dl[Dl.length-1].selectedOptionShort);e?Wt(!e.selectedOptionShort):(Nl((e=>[...e,{selectedOptionShort:"",promptAsd:"",siteCd:Y,queryType:"S"}])),Wt(!1))},className:"AddFilterBtn",children:[(0,H.jsx)(E.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})})]})]})]}),(0,H.jsxs)(ne,{onClose:Ll,"aria-labelledby":"customized-dialog-title",open:Mt,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(A.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(E.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Save Query As"})]}),(0,H.jsx)(j.Z,{"aria-label":"close",onClick:Ll,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(E.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(O.Z,{dividers:!0,children:(0,H.jsxs)("div",{className:"astSubpopup",children:[(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Query name:"}),(0,H.jsxs)("div",{className:"form-group ",children:[(0,H.jsx)("input",{type:"text",id:"customInput",name:"queryName",value:fl.queryName,onChange:Zl,className:"bsc_sav",list:"options",style:{width:"100%"}}),(0,H.jsx)("datalist",{id:"options",children:gt.map(((e,t)=>(0,H.jsx)("option",{value:e.cf_query_title},t.RowID)))})]})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Description:"}),(0,H.jsx)("div",{className:"form-group",children:(0,H.jsx)("textarea",{id:"w3review",name:"description",rows:"3",value:fl.description,onChange:Zl,cols:"70",style:{width:"100%"}})})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Availability:"}),(0,H.jsxs)("div",{class:"form-check",children:[(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"G",checked:!0,onChange:Zl}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Global(available to everyone)"}),(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"P",onChange:Zl}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios2",children:"Personal"})]})]})]})}),(0,H.jsx)(L.Z,{children:(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{if(""!==fl.queryName.trim()){const e=fl.queryName;gt.find((t=>t.cf_query_title===e))?z().fire({title:"Are you sure?",text:"Do you want to overwrite the query "+e,icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No"}).then((e=>{var t,l,s,a;e.isConfirmed&&(""!==(null===Sl||void 0===Sl||null===(t=Sl.selectedOption)||void 0===t?void 0:t.trim())&&""!==(null===Sl||void 0===Sl||null===(l=Sl.logical)||void 0===l?void 0:l.trim())&&""!==(null===Sl||void 0===Sl||null===(s=Sl.valuept)||void 0===s?void 0:s.trim())&&""!==(null===Dl||void 0===Dl||null===(a=Dl.selectedOptionShort)||void 0===a?void 0:a.trim())&&Pl())})):Pl()}else console.log("empty__")},children:[(0,H.jsx)(E.Z,{icon:"mingcute:save-line"})," Save"]})})})]}),(0,H.jsxs)(ne,{onClose:Rl,"aria-labelledby":"customized-dialog-title",open:qt,maxWidth:"md",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[(0,H.jsxs)(A.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(E.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Query Prompter"})]}),(0,H.jsx)(j.Z,{"aria-label":"close",onClick:()=>Rl(),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(E.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(O.Z,{dividers:!0,children:(0,H.jsx)("div",{className:"astSubpopup",children:(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Please Fill In The Value"}),(0,H.jsxs)("table",{style:{width:"100%"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"Column"}),(0,H.jsx)("th",{children:"Operator"}),(0,H.jsx)("th",{children:"Value"}),(0,H.jsx)("th",{children:"Logical"})]})}),(0,H.jsx)("tbody",{children:Tt.map(((e,t)=>!e.selectedOption&&!e.operator&&!e.valuept?null:(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},disabled:!0,value:e.selectedOption||"",className:"custom-Astselect ".concat(t===hl.length-1&&it?"error-border":"mammama"),oninput:"handleInput(event)"})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},value:e.operator||"",disabled:!0,className:"custom-Astselect ".concat(t===hl.length-1&&it?"error-border":"mammama"),oninput:"handleInput(event)"})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},value:e.valuept||"",className:"custom-Astselect ".concat(t===hl.length-1&&it?"error-border":"mammama"),onChange:e=>((e,t)=>{Bt((l=>l.map(((l,s)=>s===e?{...l,valuept:t}:l))))})(t,e.target.value)})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},disabled:!0,value:e.logical||"",className:"custom-Astselect ".concat(t===hl.length-1&&it?"error-border":"mammama"),oninput:"handleInput(event)"})})]},t)))})]})]})})}),(0,H.jsx)(L.Z,{children:(0,H.jsx)(b.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:async()=>{const e=Tt.some((e=>!e.valuept.trim())),t=Tt.length>0?Tt[0].RowId:null;if(e)z().fire({icon:"error",title:"Validation Error !",text:"Please fill in value field before saving.",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});else{z().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),z().showLoading();const e={rowsQrtData:Tt,siteCd:Y,RowId:t,owner:J};try{"SUCCESS"==(await B.Z.post("/insert_work_order_query_dropdown_listsave.php",e)).data.status&&(z().close(),z().fire({title:"Success!",text:"Your query update successfully.",icon:"success",confirmButtonText:"OK",customClass:{container:"swalcontainercustom"}}).then((e=>{e.isConfirmed&&(async e=>{try{const t=await B.Z.post("/get_work_order_dropdown_prompt_data.php?page="+Me,{rows:Tt,rowsort:"",SiteCD:Y,admin:J,RowId:e});Se(t.data.data.result),Ae(t.data.total_count),Ct(t.data.titleName),z().close(),Rl()}catch(t){console.error("Error fetching data:",t)}})(t)})))}catch(l){console.error("Error fetching data:",l)}}},children:[(0,H.jsx)(E.Z,{icon:"iconoir:submit-document"})," Save"]})})})]})]})}pe.defaultProps={onValueChange:()=>{}}}}]);
//# sourceMappingURL=5342.ae84995a.chunk.js.map