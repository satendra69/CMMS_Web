"use strict";(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[2839],{25265:(e,n,o)=>{o.d(n,{ZP:()=>k,l2:()=>i,wE:()=>d});var t=o(82599),s=o(54690),r=o(85375),a=o(87183);function i(e,n){const o=(new Date).getFullYear(),i=e?(0,t.Z)(e):null,l=n?(0,t.Z)(n):null,d=o===i&&o===l,c=!(!e||!n)&&(0,s.Z)(new Date(e),new Date(n)),u=!(!e||!n)&&(0,r.Z)(new Date(e),new Date(n));return d?u?c?(0,a.Mu)(n,"dd MMM yy"):"".concat((0,a.Mu)(e,"dd")," - ").concat((0,a.Mu)(n,"dd MMM yy")):"".concat((0,a.Mu)(e,"dd MMM")," - ").concat((0,a.Mu)(n,"dd MMM yy")):"".concat((0,a.Mu)(e,"dd MMM yy")," - ").concat((0,a.Mu)(n,"dd MMM yy"))}var l=o(72791);function d(e,n){const[o,t]=(0,l.useState)(!1),[s,r]=(0,l.useState)(n),[d,c]=(0,l.useState)(e),u=!(!e||!n)&&new Date(e).getTime()>new Date(n).getTime(),x=(0,l.useCallback)((()=>{t(!0)}),[]),h=(0,l.useCallback)((()=>{t(!1)}),[]);return{startDate:d,endDate:s,onChangeStartDate:(0,l.useCallback)((e=>{c(e)}),[]),onChangeEndDate:(0,l.useCallback)((e=>{u&&r(null),r(e)}),[u]),open:o,onOpen:x,onClose:h,onReset:(0,l.useCallback)((()=>{c(null),r(null)}),[]),selected:!!d&&!!s,error:u,label:"".concat((0,a.Mu)(d)," - ").concat((0,a.Mu)(s)),shortLabel:i(d,s),setStartDate:c,setEndDate:r}}var c=o(53106),u=o(16997),x=o(4841),h=o(53767),p=o(5849),m=o(5574),b=o(65661),g=o(77386),j=o(4899),Z=o(30035),y=o(38887),f=o(80184);function k(e){let{title:n="Select date range",variant:o="input",startDate:t,endDate:s,onChangeStartDate:r,onChangeEndDate:a,open:i,onClose:l,error:d}=e;const k=(0,y.F)("up","md"),v="calendar"===o;return(0,f.jsxs)(m.Z,{fullWidth:!0,maxWidth:!v&&"xs",open:i,onClose:l,PaperProps:{sx:{...v&&{maxWidth:720}}},children:[(0,f.jsx)(b.Z,{sx:{pb:2},children:n}),(0,f.jsxs)(j.Z,{sx:{...v&&k&&{overflow:"unset"}},children:[(0,f.jsx)(h.Z,{justifyContent:"center",spacing:v?3:2,direction:v&&k?"row":"column",sx:{pt:1},children:v?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,{variant:"outlined",sx:{borderRadius:2,borderColor:"divider",borderStyle:"dashed"},children:(0,f.jsx)(u.W,{value:t,onChange:r})}),(0,f.jsx)(x.Z,{variant:"outlined",sx:{borderRadius:2,borderColor:"divider",borderStyle:"dashed"},children:(0,f.jsx)(u.W,{value:s,onChange:a})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.M,{label:"Start date",value:t,onChange:r}),(0,f.jsx)(c.M,{label:"End date",value:s,onChange:a})]})}),d&&(0,f.jsx)(Z.Z,{error:!0,sx:{px:2},children:"End date must be later than start date"})]}),(0,f.jsxs)(g.Z,{children:[(0,f.jsx)(p.Z,{variant:"outlined",color:"inherit",onClick:l,children:"Cancel"}),(0,f.jsx)(p.Z,{disabled:d,variant:"contained",onClick:l,children:"Apply"})]})]})}},57819:(e,n,o)=>{o.d(n,{ZP:()=>y,NX:()=>s});var t=o(72791);function s(e){const[n,o]=(0,t.useState)(-1);return{selected:n,open:n>=0,onOpen:(0,t.useCallback)((n=>{const t=e.findIndex((e=>"video"===e.type?e.poster===n:e.src===n));o(t)}),[e]),onClose:(0,t.useCallback)((()=>{o(-1)}),[]),setSelected:o}}var r=o(62291),a=o(70482),i=o(98628),l=o(73557),d=o(19375),c=o(38559),u=o(36654),x=o(64554),h=o(40268),p=o(13967),m=o(12065),b=o(1244),g=o(80184);function j(){const e=(0,p.Z)();return(0,g.jsx)(b.Z,{styles:{".yarl__root":{"--yarl__thumbnails_thumbnail_padding":0,"--yarl__thumbnails_thumbnail_border":"transparent","--yarl__color_backdrop":(0,m.Fq)(e.palette.grey[900],.9),"--yarl__slide_captions_container_background":(0,m.Fq)(e.palette.grey[900],.48)},".yarl__slide_title":{fontSize:e.typography.h5.fontSize,fontWeight:e.typography.h5.fontWeight,lineHeight:e.typography.h5.lineHeight},".yarl__slide_description":{fontSize:e.typography.body2.fontSize,fontWeight:e.typography.body2.fontWeight,lineHeight:e.typography.body2.lineHeight},".yarl__button":{filter:"unset"},".yarl__thumbnails_thumbnail":{opacity:.48,"&.yarl__thumbnails_thumbnail_active":{opacity:1}},".yarl__thumbnails_vignette":{"--yarl__thumbnails_vignette_size":0},".yarl__video_container":{backgroundColor:e.palette.common.black}}})}const Z=24;function y(e){let{slides:n,disabledZoom:o,disabledVideo:t,disabledTotal:s,disabledCaptions:a,disabledSlideshow:i,disabledThumbnails:l,disabledFullscreen:d,onGetCurrentIndex:c,...u}=e;const x=n?n.length:0;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(j,{}),(0,g.jsx)(r.ZP,{slides:n,animation:{swipe:240},carousel:{finite:x<5},controller:{closeOnBackdropClick:!0},plugins:f({disabledZoom:o,disabledVideo:t,disabledCaptions:a,disabledSlideshow:i,disabledThumbnails:l,disabledFullscreen:d}),on:{view:e=>{let{index:n}=e;c&&c(n)}},toolbar:{buttons:[(0,g.jsx)(k,{totalItems:x,disabledTotal:s},0),"close"]},render:{iconClose:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:close"}),iconZoomIn:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:zoom-in"}),iconZoomOut:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:zoom-out"}),iconSlideshowPlay:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:play"}),iconSlideshowPause:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:pause"}),iconPrev:()=>(0,g.jsx)(h.Z,{width:Z+8,icon:"carbon:chevron-left"}),iconNext:()=>(0,g.jsx)(h.Z,{width:Z+8,icon:"carbon:chevron-right"}),iconExitFullscreen:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:center-to-fit"}),iconEnterFullscreen:()=>(0,g.jsx)(h.Z,{width:Z,icon:"carbon:fit-to-screen"})},...u})]})}function f(e){let{disabledZoom:n,disabledVideo:o,disabledCaptions:t,disabledSlideshow:s,disabledThumbnails:r,disabledFullscreen:x}=e,h=[l.Z,c.Z,d.Z,u.Z,i.Z,a.Z];return r&&(h=h.filter((e=>e!==u.Z))),t&&(h=h.filter((e=>e!==l.Z))),x&&(h=h.filter((e=>e!==c.Z))),s&&(h=h.filter((e=>e!==d.Z))),n&&(h=h.filter((e=>e!==a.Z))),o&&(h=h.filter((e=>e!==i.Z))),h}function k(e){let{totalItems:n,disabledTotal:o}=e;const{currentIndex:t}=(0,r.oc)();return o?null:(0,g.jsxs)(x.Z,{component:"span",className:"yarl__button",sx:{typography:"body2",alignItems:"center",display:"inline-flex",justifyContent:"center"},children:[(0,g.jsxs)("strong",{children:[" ",t+1," "]})," / ",n]})}},82839:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Ce});var t=o(6907),s=o(72791),r=o(1969),a=o(53767),i=o(10266),l=o(4567),d=o(44887),c=o(89731);const u=c.Hv.kanban,x={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};async function h(e){(0,d.JG)(u,(n=>{const{board:o}=n,t=e;return{...n,board:{...o,columns:t}}}),!1)}var p=o(63454),m=o(11633),b=o(12065),g=o(4841),j=o(5849),Z=o(22459),y=o(40268),f=o(32869),k=o(31378),v=o(40139),C=o(55891),w=o(18306),D=o(77393),S=o(80184);function I(e){let{status:n,onAddTask:o,onCloseAddTask:t}=e;const[r,a]=(0,s.useState)(""),i=(0,s.useMemo)((()=>({id:(0,D.Z)(),status:n,name:r.trim(),priority:"medium",attachments:[],labels:[],comments:[],assignee:[],due:[null,null],reporter:{id:w.QJ.id(16),name:w.QJ.fullName(16),avatarUrl:w.QJ.image.avatar(16)}})),[r,n]),l=(0,s.useCallback)((e=>{"Enter"===e.key&&r&&o(i)}),[i,r,o]),d=(0,s.useCallback)((()=>{r?o(i):t()}),[i,r,o,t]),c=(0,s.useCallback)((e=>{a(e.target.value)}),[]);return(0,S.jsx)(k.d,{onClickAway:d,children:(0,S.jsx)(g.Z,{sx:{borderRadius:1.5,bgcolor:"background.default",boxShadow:e=>e.customShadows.z1},children:(0,S.jsx)(v.ZP,{autoFocus:!0,multiline:!0,fullWidth:!0,placeholder:"Task name",value:r,onChange:c,onKeyUp:l,sx:{px:2,height:56,["& .".concat(C.Z.input)]:{typography:"subtitle2"}}})})})}var _=o(13967),T=o(64554),M=o(60220),F=o(76348),P=o(5951),R=o(74744),W=o(66934),z=o(85771),A=o(88654),E=o(94721),O=o(97639),U=o(93006),L=o(90977),G=o(25265);function N(e){let{sx:n,...o}=e;return(0,S.jsx)(v.ZP,{sx:{["&.".concat(C.Z.root)]:{py:.75,borderRadius:1,typography:"h6",borderWidth:2,borderStyle:"solid",borderColor:"transparent",transition:e=>e.transitions.create(["padding-left","border-color"]),["&.".concat(C.Z.focused)]:{pl:1.5,borderColor:"text.primary"}},["& .".concat(C.Z.input)]:{typography:"h6"},...n},...o})}var H=o(82626),J=o(38887),q=o(3352),K=o(56832);function V(e){let{liked:n,onLike:o,taskName:t,onDelete:r,taskStatus:i,onCloseDetails:l}=e;const d=(0,J.F)("up","sm"),c=(0,Z.k)(),u=(0,K.S)(),[x,h]=(0,s.useState)(i),p=(0,s.useCallback)((e=>{u.onClose(),h(e)}),[u]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",sx:{p:e=>e.spacing(2.5,1,2.5,2.5)},children:[!d&&(0,S.jsx)(O.Z,{title:"Back",children:(0,S.jsx)(L.Z,{onClick:l,sx:{mr:1},children:(0,S.jsx)(y.Z,{icon:"eva:arrow-ios-back-fill"})})}),(0,S.jsx)(j.Z,{size:"small",variant:"soft",endIcon:(0,S.jsx)(y.Z,{icon:"eva:arrow-ios-downward-fill",width:16,sx:{ml:-.5}}),onClick:u.onOpen,children:x}),(0,S.jsxs)(a.Z,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:[(0,S.jsx)(O.Z,{title:"Like",children:(0,S.jsx)(L.Z,{color:n?"default":"primary",onClick:o,children:(0,S.jsx)(y.Z,{icon:"ic:round-thumb-up"})})}),(0,S.jsx)(O.Z,{title:"Delete task",children:(0,S.jsx)(L.Z,{onClick:c.onTrue,children:(0,S.jsx)(y.Z,{icon:"solar:trash-bin-trash-bold"})})}),(0,S.jsx)(L.Z,{children:(0,S.jsx)(y.Z,{icon:"eva:more-vertical-fill"})})]})]}),(0,S.jsx)(K.Z,{open:u.open,onClose:u.onClose,arrow:"top-right",sx:{width:140},children:["To Do","In Progress","Ready To Test","Done"].map((e=>(0,S.jsx)(H.Z,{selected:x===e,onClick:()=>{p(e)},children:e},e)))}),(0,S.jsx)(q.Q,{open:c.value,onClose:c.onFalse,title:"Delete",content:(0,S.jsxs)(S.Fragment,{children:["Are you sure want to delete ",(0,S.jsxs)("strong",{children:[" ",t," "]}),"?"]}),action:(0,S.jsx)(j.Z,{variant:"contained",color:"error",onClick:r,children:"Delete"})})]})}var Q=o(5574),B=o(52411),Y=o(65661),X=o(49900),$=o(4899),ee=o(97808),ne=o(54333),oe=o(96349);const te=64;function se(e){let{assignee:n=[],open:o,onClose:t}=e;const[r,a]=(0,s.useState)(""),i=(0,s.useCallback)((e=>{a(e.target.value)}),[]),d=function(e){let{inputData:n,query:o}=e;o&&(n=n.filter((e=>-1!==e.name.toLowerCase().indexOf(o.toLowerCase())||-1!==e.email.toLowerCase().indexOf(o.toLowerCase()))));return n}({inputData:w.Ck,query:r}),c=!d.length&&!!r;return(0,S.jsxs)(Q.Z,{fullWidth:!0,maxWidth:"xs",open:o,onClose:t,children:[(0,S.jsxs)(Y.Z,{sx:{pb:0},children:["Contacts ",(0,S.jsxs)(l.Z,{component:"span",children:["(",w.Ck.length,")"]})]}),(0,S.jsx)(T.Z,{sx:{px:3,py:2.5},children:(0,S.jsx)(U.Z,{fullWidth:!0,value:r,onChange:i,placeholder:"Search...",InputProps:{startAdornment:(0,S.jsx)(ee.Z,{position:"start",children:(0,S.jsx)(y.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),(0,S.jsx)($.Z,{sx:{p:0},children:c?(0,S.jsx)(oe.Z,{query:r,sx:{mt:3,mb:10}}):(0,S.jsx)(p.Z,{sx:{px:2.5,height:6*te},children:d.map((e=>{const o=n.map((e=>e.name)).includes(e.name);return(0,S.jsxs)(B.ZP,{disableGutters:!0,secondaryAction:(0,S.jsx)(j.Z,{size:"small",color:o?"primary":"inherit",startIcon:(0,S.jsx)(y.Z,{width:16,icon:o?"eva:checkmark-fill":"mingcute:add-line",sx:{mr:-.5}}),children:o?"Assigned":"Assign"}),sx:{height:te},children:[(0,S.jsx)(ne.Z,{children:(0,S.jsx)(M.Z,{src:e.avatarUrl})}),(0,S.jsx)(X.Z,{primaryTypographyProps:{typography:"subtitle2",sx:{mb:.25}},secondaryTypographyProps:{typography:"caption"},primary:e.name,secondary:e.email})]},e.id)}))})})]})}var re=o(53915);function ae(e){let{priority:n,onChangePriority:o}=e;return(0,S.jsx)(a.Z,{direction:"row",flexWrap:"wrap",spacing:1,children:["low","medium","hight"].map((e=>(0,S.jsxs)(re.Z,{onClick:()=>o(e),sx:{py:.5,pl:.75,pr:1.25,fontSize:12,borderRadius:1,lineHeight:"20px",textTransform:"capitalize",fontWeight:"fontWeightBold",boxShadow:e=>"inset 0 0 0 1px ".concat((0,b.Fq)(e.palette.grey[500],.24)),...e===n&&{boxShadow:e=>"inset 0 0 0 2px ".concat(e.palette.text.primary)}},children:[(0,S.jsx)(y.Z,{icon:("low"===e?"solar:double-alt-arrow-down-bold-duotone":"medium"===e&&"solar:double-alt-arrow-right-bold-duotone")||"solar:double-alt-arrow-up-bold-duotone",sx:{mr:.5,..."low"===e&&{color:"info.main"},..."medium"===e&&{color:"warning.main"},..."hight"===e&&{color:"error.main"}}}),e]},e)))})}var ie=o(45203);function le(e){let{attachments:n}=e;const[o,t]=(0,s.useState)(n),r=(0,s.useCallback)((e=>{const n=e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)})));t([...o,...n])}),[o]),i=(0,s.useCallback)((e=>{const n=o.filter((n=>n!==e));t(n)}),[o]);return(0,S.jsxs)(a.Z,{direction:"row",flexWrap:"wrap",children:[(0,S.jsx)(ie.GV,{thumbnail:!0,files:o,onRemove:e=>i(e),sx:{width:64,height:64}}),(0,S.jsx)(ie.un,{onDrop:r})]})}var de=o(87183),ce=o(32471),ue=o(57819);function xe(e){let{comments:n}=e;const o=n.filter((e=>"image"===e.messageType)).map((e=>({src:e.message}))),t=(0,ue.NX)(o);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.Z,{spacing:3,flexGrow:1,sx:{py:3,px:2.5,bgcolor:"background.neutral"},children:n.map((e=>(0,S.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,S.jsx)(M.Z,{src:e.avatarUrl}),(0,S.jsxs)(a.Z,{spacing:"image"===e.messageType?1:.5,flexGrow:1,children:[(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,S.jsxs)(l.Z,{variant:"subtitle2",children:[" ",e.name]}),(0,S.jsx)(l.Z,{variant:"caption",sx:{color:"text.disabled"},children:(0,de.DY)(e.createdAt)})]}),"image"===e.messageType?(0,S.jsx)(ce.Z,{alt:e.message,src:e.message,onClick:()=>t.onOpen(e.message),sx:{borderRadius:1.5,cursor:"pointer",transition:e=>e.transitions.create(["opacity"]),"&:hover":{opacity:.8}}}):(0,S.jsx)(l.Z,{variant:"body2",children:e.message})]})]},e.id)))}),(0,S.jsx)(ue.ZP,{index:t.selected,slides:o,open:t.open,close:t.onClose})]})}var he=o(51318);function pe(){const{user:e}=(0,he.I)();return(0,S.jsxs)(a.Z,{direction:"row",spacing:2,sx:{py:3,px:2.5},children:[(0,S.jsx)(M.Z,{src:null===e||void 0===e?void 0:e.photoURL,alt:null===e||void 0===e?void 0:e.displayName}),(0,S.jsxs)(g.Z,{variant:"outlined",sx:{p:1,flexGrow:1,bgcolor:"transparent"},children:[(0,S.jsx)(v.ZP,{fullWidth:!0,multiline:!0,rows:2,placeholder:"Type a message",sx:{px:1}}),(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,S.jsxs)(a.Z,{direction:"row",flexGrow:1,children:[(0,S.jsx)(L.Z,{children:(0,S.jsx)(y.Z,{icon:"solar:gallery-add-bold"})}),(0,S.jsx)(L.Z,{children:(0,S.jsx)(y.Z,{icon:"eva:attach-2-fill"})})]}),(0,S.jsx)(j.Z,{variant:"contained",children:"Comment"})]})]})]})}const me=(0,W.ZP)("span")((e=>{let{theme:n}=e;return{...n.typography.caption,width:100,flexShrink:0,color:n.palette.text.secondary,fontWeight:n.typography.fontWeightSemiBold}}));function be(e){let{task:n,openDetails:o,onCloseDetails:t,onUpdateTask:r,onDeleteTask:i}=e;const[l,d]=(0,s.useState)(n.priority),[c,u]=(0,s.useState)(n.name),x=(0,Z.k)(),h=(0,Z.k)(),[m,g]=(0,s.useState)(n.description),f=(0,G.wE)(n.due[0],n.due[1]),k=(0,s.useCallback)((e=>{u(e.target.value)}),[]),v=(0,s.useCallback)((e=>{try{"Enter"===e.key&&c&&r({...n,name:c})}catch(o){console.error(o)}}),[r,n,c]),C=(0,s.useCallback)((e=>{g(e.target.value)}),[]),w=(0,s.useCallback)((e=>{d(e)}),[]),D=(0,S.jsx)(V,{liked:x.value,taskName:n.name,onLike:x.onToggle,onDelete:i,taskStatus:n.status,onCloseDetails:t}),I=(0,S.jsx)(N,{placeholder:"Task name",value:c,onChange:k,onKeyUp:v}),_=(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,S.jsx)(me,{children:"Reporter"}),(0,S.jsx)(M.Z,{alt:n.reporter.name,src:n.reporter.avatarUrl})]}),T=(0,S.jsxs)(a.Z,{direction:"row",children:[(0,S.jsx)(me,{sx:{height:40,lineHeight:"40px"},children:"Assignee"}),(0,S.jsxs)(a.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",spacing:1,children:[n.assignee.map((e=>(0,S.jsx)(M.Z,{alt:e.name,src:e.avatarUrl},e.id))),(0,S.jsx)(O.Z,{title:"Add assignee",children:(0,S.jsx)(L.Z,{onClick:h.onTrue,sx:{bgcolor:e=>(0,b.Fq)(e.palette.grey[500],.08),border:e=>"dashed 1px ".concat(e.palette.divider)},children:(0,S.jsx)(y.Z,{icon:"mingcute:add-line"})})}),(0,S.jsx)(se,{assignee:n.assignee,open:h.value,onClose:h.onFalse})]})]}),F=(0,S.jsxs)(a.Z,{direction:"row",children:[(0,S.jsx)(me,{sx:{height:24,lineHeight:"24px"},children:"Labels"}),!!n.labels.length&&(0,S.jsx)(a.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",spacing:1,children:n.labels.map((e=>(0,S.jsx)(z.Z,{color:"info",label:e,size:"small",variant:"soft"},e)))})]}),P=(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,S.jsx)(me,{children:" Due date "}),f.selected?(0,S.jsx)(j.Z,{size:"small",onClick:f.onOpen,children:f.shortLabel}):(0,S.jsx)(O.Z,{title:"Add due date",children:(0,S.jsx)(L.Z,{onClick:f.onOpen,sx:{bgcolor:e=>(0,b.Fq)(e.palette.grey[500],.08),border:e=>"dashed 1px ".concat(e.palette.divider)},children:(0,S.jsx)(y.Z,{icon:"mingcute:add-line"})})}),(0,S.jsx)(G.ZP,{variant:"calendar",title:"Choose due date",startDate:f.startDate,endDate:f.endDate,onChangeStartDate:f.onChangeStartDate,onChangeEndDate:f.onChangeEndDate,open:f.open,onClose:f.onClose,selected:f.selected,error:f.error})]}),R=(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,S.jsx)(me,{children:"Priority"}),(0,S.jsx)(ae,{priority:l,onChangePriority:w})]}),W=(0,S.jsxs)(a.Z,{direction:"row",children:[(0,S.jsx)(me,{children:" Description "}),(0,S.jsx)(U.Z,{fullWidth:!0,multiline:!0,size:"small",value:m,onChange:C,InputProps:{sx:{typography:"body2"}}})]}),H=(0,S.jsxs)(a.Z,{direction:"row",children:[(0,S.jsx)(me,{children:"Attachments"}),(0,S.jsx)(le,{attachments:n.attachments})]}),J=(0,S.jsx)(xe,{comments:n.comments});return(0,S.jsxs)(A.ZP,{open:o,onClose:t,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:{xs:1,sm:480}}},children:[D,(0,S.jsx)(E.Z,{}),(0,S.jsxs)(p.Z,{sx:{height:1,"& .simplebar-content":{height:1,display:"flex",flexDirection:"column"}},children:[(0,S.jsxs)(a.Z,{spacing:3,sx:{pt:3,pb:5,px:2.5},children:[I,_,T,F,P,R,W,H]}),!!n.comments.length&&J]}),(0,S.jsx)(pe,{})]})}function ge(e){let{task:n,index:o,onDeleteTask:t,onUpdateTask:s,sx:i,...d}=e;const c=(0,_.Z)(),u=(0,Z.k)(),x=(0,S.jsx)(y.Z,{icon:("low"===n.priority?"solar:double-alt-arrow-down-bold-duotone":"medium"===n.priority&&"solar:double-alt-arrow-right-bold-duotone")||"solar:double-alt-arrow-up-bold-duotone",sx:{position:"absolute",top:4,right:4,..."low"===n.priority&&{color:"info.main"},..."medium"===n.priority&&{color:"warning.main"},..."hight"===n.priority&&{color:"error.main"}}}),h=(0,S.jsx)(T.Z,{sx:{p:c.spacing(1,1,0,1)},children:(0,S.jsx)(T.Z,{component:"img",alt:n.attachments[0],src:n.attachments[0],sx:{borderRadius:1.5,...u.value&&{opacity:.8}}})}),p=(0,S.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,S.jsxs)(a.Z,{flexGrow:1,direction:"row",alignItems:"center",sx:{typography:"caption",color:"text.disabled"},children:[(0,S.jsx)(y.Z,{width:16,icon:"solar:chat-round-dots-bold",sx:{mr:.25}}),(0,S.jsx)(T.Z,{component:"span",sx:{mr:1},children:n.comments.length}),(0,S.jsx)(y.Z,{width:16,icon:"eva:attach-2-fill",sx:{mr:.25}}),(0,S.jsx)(T.Z,{component:"span",children:n.attachments.length})]}),(0,S.jsx)(F.Z,{sx:{["& .".concat(P.Z.avatar)]:{width:24,height:24}},children:n.assignee.map((e=>(0,S.jsx)(M.Z,{alt:e.name,src:e.avatarUrl},e.id)))})]});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r._l,{draggableId:n.id,index:o,children:(e,o)=>(0,S.jsxs)(g.Z,{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,onClick:u.onTrue,sx:{width:1,borderRadius:1.5,overflow:"hidden",position:"relative",bgcolor:"background.default",boxShadow:c.customShadows.z1,"&:hover":{boxShadow:c.customShadows.z20},...u.value&&{boxShadow:c.customShadows.z20},...o.isDragging&&{boxShadow:c.customShadows.z20,...(0,R.Ls)({opacity:.48,color:c.palette.background.default})},...i},...d,children:[!!n.attachments.length&&h,(0,S.jsxs)(a.Z,{spacing:2,sx:{px:2,py:2.5,position:"relative"},children:[x,(0,S.jsx)(l.Z,{variant:"subtitle2",children:n.name}),p]})]})}),(0,S.jsx)(be,{task:n,openDetails:u.value,onCloseDetails:u.onFalse,onUpdateTask:s,onDeleteTask:t})]})}function je(e){let{columnName:n,onDeleteColumn:o,onClearColumn:t,onUpdateColumn:r}=e;const i=(0,s.useRef)(null),l=(0,K.S)(),d=(0,Z.k)(),[c,u]=(0,s.useState)(n);(0,s.useEffect)((()=>{l.open&&i.current&&i.current.focus()}),[l.open]);const x=(0,s.useCallback)((e=>{u(e.target.value)}),[]),h=(0,s.useCallback)((e=>{"Enter"===e.key&&(i.current&&i.current.blur(),r(c))}),[c,r]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(a.Z,{spacing:1,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{pt:3},children:[(0,S.jsx)(N,{inputRef:i,placeholder:"Section name",value:c,onChange:x,onKeyUp:h}),(0,S.jsx)(L.Z,{color:l.open?"inherit":"default",onClick:l.onOpen,children:(0,S.jsx)(y.Z,{icon:"eva:more-horizontal-fill"})})]}),(0,S.jsxs)(K.Z,{open:l.open,onClose:l.onClose,sx:{ml:1.5,width:160},children:[(0,S.jsxs)(H.Z,{onClick:l.onClose,children:[(0,S.jsx)(y.Z,{icon:"solar:pen-bold"}),"Rename"]}),(0,S.jsxs)(H.Z,{onClick:()=>{t(),l.onClose()},children:[(0,S.jsx)(y.Z,{icon:"solar:eraser-bold"}),"Clear"]}),(0,S.jsxs)(H.Z,{onClick:()=>{d.onTrue(),l.onClose()},sx:{color:"error.main"},children:[(0,S.jsx)(y.Z,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),(0,S.jsx)(q.Q,{open:d.value,onClose:d.onFalse,title:"Delete",content:(0,S.jsxs)(S.Fragment,{children:["Are you sure want to delete column?",(0,S.jsxs)(T.Z,{sx:{typography:"caption",color:"error.main",mt:2},children:[(0,S.jsx)("strong",{children:" NOTE: "})," All tasks related to this category will also be deleted."]})]}),action:(0,S.jsx)(j.Z,{variant:"contained",color:"error",onClick:()=>{o(),d.onFalse()},children:"Delete"})})]})}function Ze(e){let{column:n,tasks:o,index:t}=e;const{enqueueSnackbar:i}=(0,f.Ds)(),l=(0,Z.k)(),c=(0,s.useCallback)((async e=>{try{n.name!==e&&(!async function(e,n){(0,d.JG)(u,(o=>{const{board:t}=o,s=t.columns[e],r={...t.columns,[s.id]:{...s,name:n}};return{...o,board:{...t,columns:r}}}),!1)}(n.id,e),i("Update success!",{anchorOrigin:{vertical:"top",horizontal:"center"}}))}catch(o){console.error(o)}}),[n.id,n.name,i]),x=(0,s.useCallback)((async()=>{try{!async function(e){(0,d.JG)(u,(n=>{const{board:o}=n,{tasks:t}=o,s=o.columns[e];s.taskIds.forEach((e=>{delete t[e]}));const r={...o.columns,[s.id]:{...s,taskIds:[]}};return{...n,board:{...o,columns:r,tasks:t}}}),!1)}(n.id)}catch(e){console.error(e)}}),[n.id]),h=(0,s.useCallback)((async()=>{try{!async function(e){(0,d.JG)(u,(n=>{const{board:o}=n,{columns:t,tasks:s}=o,r=t[e];delete t[e],r.taskIds.forEach((e=>{delete s[e]}));const a=o.ordered.filter((n=>n!==e));return{...n,board:{...o,columns:t,tasks:s,ordered:a}}}),!1)}(n.id),i("Delete success!",{anchorOrigin:{vertical:"top",horizontal:"center"}})}catch(e){console.error(e)}}),[n.id,i]),p=(0,s.useCallback)((async e=>{try{!async function(e,n){(0,d.JG)(u,(o=>{const{board:t}=o,s=t.columns[e],r={...t.columns,[e]:{...s,taskIds:[...s.taskIds,n.id]}},a={...t.tasks,[n.id]:n};return{...o,board:{...t,columns:r,tasks:a}}}),!1)}(n.id,e),l.onFalse()}catch(o){console.error(o)}}),[n.id,l]),m=(0,s.useCallback)((async e=>{try{!async function(e){(0,d.JG)(u,(n=>{const{board:o}=n,t={...o.tasks,[e.id]:e};return{...n,board:{...o,tasks:t}}}),!1)}(e)}catch(n){console.error(n)}}),[]),k=(0,s.useCallback)((async e=>{try{!async function(e,n){(0,d.JG)(u,(o=>{const{board:t}=o,{tasks:s}=t,r=t.columns[e],a={...t.columns,[r.id]:{...r,taskIds:r.taskIds.filter((e=>e!==n))}};return delete s[n],{...o,board:{...t,columns:a,tasks:s}}}),!1)}(n.id,e),i("Delete success!",{anchorOrigin:{vertical:"top",horizontal:"center"}})}catch(o){console.error(o)}}),[n.id,i]),v=(0,S.jsxs)(a.Z,{spacing:2,sx:{pb:3},children:[l.value&&(0,S.jsx)(I,{status:n.name,onAddTask:p,onCloseAddTask:l.onFalse}),(0,S.jsx)(j.Z,{fullWidth:!0,size:"large",color:"inherit",startIcon:(0,S.jsx)(y.Z,{icon:l.value?"solar:close-circle-broken":"mingcute:add-line",width:18,sx:{mr:-.5}}),onClick:l.onToggle,sx:{fontSize:14},children:l.value?"Close":"Add Task"})]});return(0,S.jsx)(r._l,{draggableId:n.id,index:t,children:(e,t)=>(0,S.jsx)(g.Z,{ref:e.innerRef,...e.draggableProps,sx:{px:2,borderRadius:2,bgcolor:"background.neutral",...t.isDragging&&{bgcolor:e=>(0,b.Fq)(e.palette.grey[500],.24)}},children:(0,S.jsxs)(a.Z,{...e.dragHandleProps,children:[(0,S.jsx)(je,{columnName:n.name,onUpdateColumn:c,onClearColumn:x,onDeleteColumn:h}),(0,S.jsx)(r.bK,{droppableId:n.id,type:"TASK",children:e=>(0,S.jsxs)(a.Z,{ref:e.innerRef,...e.droppableProps,spacing:2,sx:{py:3,width:280},children:[n.taskIds.map(((e,n)=>(0,S.jsx)(ge,{index:n,task:o[e],onUpdateTask:m,onDeleteTask:()=>k(e)},e))),e.placeholder]})}),v]})})})}function ye(){const[e,n]=(0,s.useState)(""),o=(0,Z.k)(),t=(0,s.useCallback)((e=>{n(e.target.value)}),[]),r=(0,s.useCallback)((async()=>{try{e&&(!async function(e){(0,d.JG)(u,(n=>{const{board:o}=n,t={...o.columns,[e.id]:e},s=[...o.ordered,e.id];return{...n,board:{...o,columns:t,ordered:s}}}),!1)}({id:(0,D.Z)(),name:e,taskIds:[]}),n("")),o.onFalse()}catch(t){console.error(t)}}),[e,o]),a=(0,s.useCallback)((e=>{"Enter"===e.key&&r()}),[r]);return(0,S.jsx)(g.Z,{sx:{minWidth:280,width:280},children:o.value?(0,S.jsx)(k.d,{onClickAway:r,children:(0,S.jsx)(U.Z,{autoFocus:!0,fullWidth:!0,placeholder:"New section",value:e,onChange:t,onKeyUp:a,sx:{["& .".concat(C.Z.input)]:{typography:"h6"}}})}):(0,S.jsx)(j.Z,{fullWidth:!0,size:"large",color:"inherit",variant:"outlined",startIcon:(0,S.jsx)(y.Z,{icon:"mingcute:add-line",sx:{mr:-.5}}),onClick:o.onTrue,children:"Add Section"})})}var fe=o(85239);function ke(e){let{index:n,sx:o,...t}=e;return(0,S.jsx)(a.Z,{component:g.Z,variant:"outlined",sx:{p:2,width:310,borderRadius:2,...o},...t,children:(0,S.jsxs)(a.Z,{spacing:2,sx:{width:280},children:[(0,S.jsx)(fe.Z,{sx:{paddingTop:"75%",borderRadius:1.5}}),[0].includes(Number(n))&&(0,S.jsx)(fe.Z,{sx:{paddingTop:"50%",borderRadius:1.5}}),[0,1].includes(Number(n))&&(0,S.jsx)(fe.Z,{sx:{paddingTop:"25%",borderRadius:1.5}}),[0,1,2].includes(Number(n))&&(0,S.jsx)(fe.Z,{sx:{paddingTop:"25%",borderRadius:1.5}})]})})}function ve(){const{board:e,boardLoading:n,boardEmpty:o}=function(){const{data:e,isLoading:n,error:o,isValidating:t}=(0,d.ZP)(u,c._i,x);return(0,s.useMemo)((()=>({board:null===e||void 0===e?void 0:e.board,boardLoading:n,boardError:o,boardValidating:t,boardEmpty:!n&&!(null!==e&&void 0!==e&&e.board.ordered.length)})),[null===e||void 0===e?void 0:e.board,o,n,t])}(),t=(0,s.useCallback)((async n=>{let{destination:o,source:t,draggableId:s,type:r}=n;try{if(!o)return;if(o.droppableId===t.droppableId&&o.index===t.index)return;if("COLUMN"===r){const n=[...e.ordered];return n.splice(t.index,1),n.splice(o.index,0,s),void async function(e){(0,d.JG)(u,(n=>{const{board:o}=n,t=e;return{...n,board:{...o,ordered:t}}}),!1)}(n)}const n=null===e||void 0===e?void 0:e.columns[t.droppableId],a=null===e||void 0===e?void 0:e.columns[o.droppableId];if(n.id===a.id){const r=[...n.taskIds];return r.splice(t.index,1),r.splice(o.index,0,s),h({...null===e||void 0===e?void 0:e.columns,[n.id]:{...n,taskIds:r}}),void console.info("Moving to same list!")}const i=[...n.taskIds],l=[...a.taskIds];i.splice(t.index,1),l.splice(o.index,0,s),h({...null===e||void 0===e?void 0:e.columns,[n.id]:{...n,taskIds:i},[a.id]:{...a,taskIds:l}}),console.info("Moving to different list!")}catch(a){console.error(a)}}),[null===e||void 0===e?void 0:e.columns,null===e||void 0===e?void 0:e.ordered]),b=(0,S.jsx)(a.Z,{direction:"row",alignItems:"flex-start",spacing:3,children:[...Array(4)].map(((e,n)=>(0,S.jsx)(ke,{index:n},n)))});return(0,S.jsxs)(i.Z,{maxWidth:!1,sx:{height:1},children:[(0,S.jsx)(l.Z,{variant:"h4",sx:{mb:{xs:3,md:5}},children:"Kanban"}),n&&b,o&&(0,S.jsx)(m.Z,{filled:!0,title:"No Data",sx:{py:10,maxHeight:{md:480}}}),!(null===e||void 0===e||!e.ordered.length)&&(0,S.jsx)(r.Z5,{onDragEnd:t,children:(0,S.jsx)(r.bK,{droppableId:"board",type:"COLUMN",direction:"horizontal",children:n=>(0,S.jsx)(p.Z,{autoHide:!1,sx:{height:1,minHeight:{xs:"80vh",md:"unset"}},children:(0,S.jsxs)(a.Z,{ref:n.innerRef,...n.droppableProps,spacing:3,direction:"row",alignItems:"flex-start",sx:{p:.25,height:1},children:[null===e||void 0===e?void 0:e.ordered.map(((n,o)=>(0,S.jsx)(Ze,{index:o,column:null===e||void 0===e?void 0:e.columns[n],tasks:null===e||void 0===e?void 0:e.tasks},n))),n.placeholder,(0,S.jsx)(ye,{})]})})})})]})}function Ce(){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(t.ql,{children:(0,S.jsx)("title",{children:" Dashboard: Kanban"})}),(0,S.jsx)(ve,{})]})}},87183:(e,n,o)=>{o.d(n,{DY:()=>d,IO:()=>l,Mu:()=>a,zM:()=>i});var t=o(16386),s=o(64460),r=o(24054);function a(e,n){const o=n||"dd MMM yyyy";return e?(0,t.Z)(new Date(e),o):""}function i(e,n){const o=n||"dd MMM yyyy p";return e?(0,t.Z)(new Date(e),o):""}function l(e){return e?(0,s.Z)(new Date(e)):""}function d(e){return e?(0,r.Z)(new Date(e),{addSuffix:!0}):""}},77393:(e,n,o)=>{function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}o.d(n,{Z:()=>t})}}]);
//# sourceMappingURL=2839.041b776b.chunk.js.map