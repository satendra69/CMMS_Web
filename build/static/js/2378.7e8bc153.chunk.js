"use strict";(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[2378],{67874:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(72791),l=s(40268),i=s(21830),r=s.n(i),n=s(15617),o=s.n(n),d=s(18709),c=s(80184);const m=e=>{let{onRowClick:t,onChangePage:s,onSearchChange:i,asset:n}=e,m=localStorage.getItem("site_ID");const[x,u]=(0,a.useState)([]),[p,_]=(0,a.useState)(null),[h,g]=(window.performance.now(),(0,a.useState)(0));(0,a.useEffect)((()=>{r().fire({title:"Please Wait !",allowOutsideClick:!1}),r().showLoading(),d.Z.get("/get_asset_from_parentId_list.php?site_cd="+m+"&vlu="+n).then((e=>{window.performance.now();r().close(),u(e.data.data.WorkAssetNo),t(e.data.data.WorkAssetNo.length);window.performance.now()})).catch((e=>{console.log(e)}))}),[]);const j=[{title:"Asset No",field:"ast_mst_asset_no",render:e=>f(e)},{title:"Long Description",field:"ast_mst_asset_longdesc",width:450},{title:"Level",field:"ast_mst_ast_lvl",width:40},{title:"Zone",field:"ast_mst_work_area",width:40},{title:"Asset Location",field:"ast_mst_asset_locn",width:150},{title:"Cost Center",field:"ast_mst_cost_center",width:40},{title:"Asset Type",field:"ast_mst_asset_type",width:200},{title:"Status",field:"ast_mst_asset_status",width:40},{title:"Customer Code",field:"ast_det_cus_code",width:40}],f=e=>e.ast_mst_asset_no===p?(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{icon:"mingcute:save-fill",style:{marginRight:"0px",marginTop:"2px",float:"left",fontSize:"16px",color:"#289e49"}}),e.ast_mst_asset_no]}):(0,c.jsx)("div",{children:e.ast_mst_asset_no});return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{children:(0,c.jsx)("div",{class:"container Ordertbl",children:(0,c.jsx)(o(),{title:"",data:x,columns:j,options:{search:!0,paging:!0,pageSize:10,pageSizeOptions:!1,overflowY:"auto",paginationPosition:"top",toolbarButtonAlignment:"right",paginationType:"normal",rowStyle:e=>({backgroundColor:e.ast_mst_asset_no===p?"#a9ebb9":"#FFF",fontSize:"12px !important"})},onRowClick:(e,s)=>{p&&p===s.ast_mst_asset_no&&t(x.length,s.ast_mst_asset_no+" : "+s.ast_mst_asset_shortdesc,1),_(s.ast_mst_asset_no),t(x.length,s.ast_mst_asset_no+" : "+s.ast_mst_asset_shortdesc)},onChangePage:e=>{const t=10*e;g(t),s(t)},onSearchChange:e=>(e=>{const t=x.filter((t=>{const s=t.ast_mst_asset_no?t.ast_mst_asset_no.toLowerCase():"",a=t.ast_mst_asset_longdesc?t.ast_mst_asset_longdesc.toLowerCase():"",l=t.ast_mst_work_area?t.ast_mst_work_area.toLowerCase():"",i=t.ast_mst_asset_type?t.ast_mst_asset_type.toLowerCase():"";return s.includes(e.toLowerCase())||a.includes(e.toLowerCase())||l.includes(e.toLowerCase())||i.includes(e.toLowerCase())}));i(t.length)})(e)})})})})}},40734:(e,t,s)=>{s.d(t,{Z:()=>W});var a=s(72791),l=s(68745),i=s(9195),r=s(5849),n=s(55261),o=s(4841),d=s(15416),c=s(22041),m=s(62155),x=s(19850),u=s(33551),p=s(46314),_=s(57689),h=s(18709),g=s(5574),j=s(65661),f=s(4899),y=s(77386),v=s(90977),Z=s(32746),C=s(21830),S=s.n(C),w=s(58086),b=s.n(w),A=s(72426),N=s.n(A),k=(s(73528),s(13034)),z=s(24308),I=s(93006),E=s(40268),D=s(42078),T=s(80184);const R=b()(S()),W=e=>{let{data:t,onDataFromSecondComponent:s}=e,C=localStorage.getItem("site_ID");const w=localStorage.getItem("emp_mst_empl_id"),{RowID:b}=t,{Asset_No:A}=t,{WorkOrderNo:W}=t,M=(0,_.TH)(),[O,P]=a.useState(["Check List Code","Check List Description","Carry to Work Order"]),[B,F]=a.useState([]),[H,U]=(0,a.useState)(!1),[L,q]=(0,a.useState)(!1),Q=()=>{U(!1)},[Y,G]=(0,a.useState)([]),[K,V]=(0,a.useState)([]),[X,J]=(0,a.useState)([]),[$,ee]=(0,a.useState)([]),[te,se]=(0,a.useState)(new Date),[ae,le]=(0,a.useState)(new Date),[ie,re]=(0,a.useState)([]),[ne,oe]=(0,a.useState)([]),[de,ce]=(0,a.useState)("0"),[me,xe]=(0,a.useState)([]),[ue,pe]=(0,a.useState)([]),[_e,he]=(0,a.useState)([]),[ge,je]=(0,a.useState)([]),[fe,ye]=(0,a.useState)([]),[ve,Ze]=(0,a.useState)([]),[Ce,Se]=(0,a.useState)([]),[we,be]=(0,a.useState)([]),[Ae,Ne]=(0,a.useState)([]),[ke,ze]=(0,a.useState)(""),[Ie,Ee]=(0,a.useState)(""),[De,Te]=(0,a.useState)(""),[Re,We]=(0,a.useState)(""),[Me,Oe]=(0,a.useState)(""),[Pe,Be]=(0,a.useState)(""),[Fe,He]=(0,a.useState)(""),[Ue,Le]=(0,a.useState)(""),[qe,Qe]=(0,a.useState)(!1),Ye={inputProps:{"aria-label":"Checkbox demo"}},Ge=async(e,t)=>{try{const s=await h.Z.get("/get_assetchecklist.php?site_cd=".concat(e,"&RowID=").concat(t));"SUCCESS"===s.data.status?F(s.data.data.result):S().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){console.error("Error fetching data:",s),S().fire({icon:"error",title:"Oops get_sitecode...",text:s})}};(0,a.useEffect)((()=>{let e=localStorage.getItem("site_ID");Ge(e,b),Ke(e,"All")}),[M]);const Ke=async(e,t)=>{S().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),S().showLoading();try{const s=await h.Z.get("get_dropdown.php?site_cd=".concat(e,"&type=").concat(t));if("SUCCESS"===s.data.status){let e=s.data.data.Employee_Supervisor_Id.map((e=>({label:e.emp_mst_empl_id+" : "+e.emp_mst_name,value:e.emp_mst_empl_id})));G(e);s.data.data.Employee_Primary_Craft.map((e=>({label:e.crf_mst_crf_cd+" : "+e.crf_mst_desc,value:e.crf_mst_crf_cd})));let t=s.data.data.HoursType.map((e=>({label:e.hours_type_cd,value:e.hours_type_cd})));re(t);let a=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));xe(a);let l=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));he(l);let i=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));ye(i);let r=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));be(r),S().close()}else S().close(),S().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){S().close(),S().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},Ve=(B.reduce(((e,t)=>e+(parseFloat(t.wko_ls8_hrs)||0)),0),B.reduce(((e,t)=>e+(parseFloat(t.wko_ls8_hrs)||0)*(parseFloat(t.wko_ls8_act_cost)||0)),0),async()=>{if(""==K||null==K)R.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Employee ID is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==$||null==$)R.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Craft is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==te||null==te)R.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==ae||null==ae)R.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field End Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==ne||null==ne)R.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Hour Type is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else{let a;if(ne&&0!==ne.length&&ne.label){a=ne.label.split(":")[0].trim()}else a="";let l="";l=""==te||null==te?"":N()(te).format("yyyy-MM-DD HH:mm:ss").trim();let i="";i=""==ae||null==ae?"":N()(ae).format("yyyy-MM-DD HH:mm:ss").trim();var e={site_cd:C,wko_mst_wo_no:W,mst_RowID:b,assetno:A,selectedEmployeeID:K.value,selectedCraft:$&&"object"===typeof $?$.value:$,TimeCardDate:l,EndTimeCardDate:i,selected_HourType:a,ActualHour:de,Rate:Re,Multiplier:Me,Adder:Pe,ActualCost:Fe,selected_ChargeCostCenter:ue.value,selected_ChargeAccount:ge.value,selected_CreditCostCenter:ve.value,selected_CreditAccount:Ae.value,auditUser:w};try{"SUCCESS"==(await h.Z.post("/insert_time_card.php",JSON.stringify(e))).data.status&&(Q(),Ge(),je(""),pe(""),ee(""),Ne(""),Ze(""),V(""),oe(""),ce(""),s("SubmitFrom"))}catch(t){S().fire({icon:"error",title:"Oops get_sitecode...",text:t})}}});return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)("div",{children:(0,T.jsx)("div",{className:"card",children:(0,T.jsxs)("div",{className:"card-body",style:{borderRadius:"8px",boxShadow:"2px 2px 15px 2px #f0f0f0",paddingBottom:"10px"},children:[(0,T.jsx)("div",{children:(0,T.jsx)("div",{style:{backgroundColor:"white"},children:(0,T.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,T.jsx)("div",{style:{marginRight:"10px"},children:(0,T.jsx)("img",{src:D,style:{width:"50px",height:"50px"}})}),(0,T.jsx)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:(0,T.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"Check List"})})]})})}),(0,T.jsx)("div",{className:"table-responsive",children:(0,T.jsx)(n.Z,{component:o.Z,children:(0,T.jsxs)(d.Z,{children:[(0,T.jsx)(c.Z,{children:(0,T.jsx)(i.Z,{children:(()=>{const e={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",padding:"0px"};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Z,{},"select"),O.map(((t,s)=>(0,T.jsx)(l.Z,{style:e,children:t.toUpperCase()},s))),(0,T.jsx)(l.Z,{style:e,children:"View"},"view")," "]})})()})}),(0,T.jsx)(m.Z,{children:B.map(((e,t)=>(0,T.jsxs)(i.Z,{children:[(0,T.jsx)(l.Z,{style:{padding:"5px",textAlign:"left"},children:t+1}),(0,T.jsx)(l.Z,{style:{padding:"5px",textAlign:"left"},children:e.ast_job_job_cd}),(0,T.jsx)(l.Z,{style:{padding:"5px",textAlign:"left"},children:e.job_mst_desc}),(0,T.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:"1"==e.ast_job_carry?(0,T.jsx)(k.Z,{...Ye,defaultChecked:!0}):(0,T.jsx)(k.Z,{...Ye})}),(0,T.jsxs)(l.Z,{style:{padding:"5px",textAlign:"center"},children:[(0,T.jsx)(r.Z,{variant:"contained",color:"primary",children:"View"})," "]})]},t)))})]})})}),(0,T.jsx)("div",{children:(0,T.jsxs)(g.Z,{onClose:Q,"aria-labelledby":"customized-dialog-title",open:H,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,T.jsxs)(j.Z,{sx:{m:0,p:2},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,T.jsx)("img",{src:D,style:{width:"30px",height:"30px",marginRight:"2px"}}),"Check List"]}),(0,T.jsx)(v.Z,{"aria-label":"close",onClick:Q,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,T.jsx)(E.Z,{icon:"material-symbols:close"})}),(0,T.jsx)(f.Z,{dividers:!0,children:(0,T.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,T.jsxs)(z.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Employee ID:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:Y,value:K,onChange:(e,t)=>(async(e,t)=>{let s=localStorage.getItem("site_ID");V(t);const a=t?t.label.split(" : "):[],l=a.length>0?a[0]:"";if(""!==l&&null!=l)try{const e=await h.Z.get("get_time_cart_reate_craft.php?site_cd=".concat(s,"&empId=").concat(l));if(e.data.data.result.length>0){let t=e.data.data.result.map((e=>({label:e.emp_ls1_craft+" : "+e.crf_mst_desc,value:e.emp_ls1_craft,rate:e.emp_ls1_charge_rate})));J(t),ee(e.data.data.result[0].emp_ls1_craft),We(e.data.data.result[0].emp_ls1_charge_rate)}}catch(i){S().close(),S().fire({icon:"error",title:"Oops get_sitecode...",text:i})}})(0,t),renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Craft:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:X,value:$,onChange:(e,t)=>{ee(t||null),We(t?t.rate:null)},renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Time Card Date:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(Z.x,{value:te,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{se(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Time Card End Date:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(Z.x,{value:ae,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{le(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Hour Type:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:ie,value:ne,onChange:(e,t)=>(async(e,t)=>{oe(t);const s=t?t.label.split(" : "):[],a=s.length>0?s[0]:"";if(""!==a&&null!=a)try{const e=await h.Z.get("TimeCartHourTypeGet.php?site_cd=".concat(C,"&hourstype=").concat(a));if(e.data.data.result.length>0){Be(e.data.data.result[0].hours_type_adder),Oe(e.data.data.result[0].hours_type_multiplier);const t=new Date(te),s=new Date(ae),a=(0,x.Z)(s,t),l=((0,u.Z)(s,t),Math.floor(a/36e5)),i=(Math.floor(a/6e4),Math.floor(a/6e4)),r=Math.floor(i/60),n=(parseFloat(l),parseFloat(Re)),o=parseFloat(e.data.data.result[0].hours_type_adder),d=parseFloat(e.data.data.result[0].hours_type_multiplier);He(r*(n+o)*d),ce(l)}}catch(l){S().fire({icon:"error",title:"Oops get_sitecode...",text:l})}})(0,t),renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Actual Hour:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(I.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:de,onChange:e=>{ce(e.target.value)}})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Charge Cost Center:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:me,value:ue,onChange:(e,t)=>{pe(t||null)},renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Charge Account:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:_e,value:ge,onChange:(e,t)=>{je(t||null)},renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Credit Cost Center:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:fe,value:ve,onChange:(e,t)=>{Ze(t||null)},renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:4,children:(0,T.jsx)("label",{children:"Credit Account:"})}),(0,T.jsx)(z.Z,{item:!0,xs:12,md:8,children:(0,T.jsx)(p.Z,{options:we,value:Ae,onChange:(e,t)=>{Ne(t||null)},renderInput:e=>(0,T.jsx)("div",{children:(0,T.jsx)(I.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})})]})})}),(0,T.jsx)(y.Z,{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},children:(0,T.jsx)("div",{className:"timeCartSubmit",children:(0,T.jsx)(r.Z,{variant:"contained",color:"primary",type:"button",onClick:e=>{e.preventDefault(),Ve()},children:"Submit"})})})]})}),(0,T.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"}})]})})})})}},46424:(e,t,s)=>{s.d(t,{Z:()=>I});var a=s(72791),l=s(68745),i=s(9195),r=s(55261),n=s(4841),o=s(15416),d=s(22041),c=s(62155),m=s(5849),x=s(21830),u=s.n(x),p=(s(72426),s(57689)),_=s(66934),h=s(5574),g=s(65661),j=s(4899),f=s(77386),y=s(90977),v=s(24308),Z=s(93006),C=s(4567),S=s(40268),w=s(6405),b=s(9806),A=s(11632),N=s(18709),k=s(80184);const z=(0,_.ZP)(h.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),I=e=>{let{onRowClick:t,data:s}=e,x=localStorage.getItem("site_ID"),_=localStorage.getItem("emp_mst_login_id");const[I,E]=a.useState([]),[D,T]=a.useState([]),[R,W]=a.useState([]),[M,O]=(0,a.useState)(!1),[P,B]=(0,a.useState)(!1),F=()=>B(!1),[H,U]=(0,a.useState)([]),[L,q]=(0,a.useState)([]),[Q,Y]=(0,a.useState)(""),[G,K]=(0,a.useState)(""),[V,X]=(0,a.useState)(""),[J,$]=(0,a.useState)(""),[ee,te]=(0,a.useState)([]),[se,ae]=(0,a.useState)([]),[le,ie]=(0,a.useState)([]),[re,ne]=(0,a.useState)([]),[oe,de]=(0,a.useState)([]),[ce,me]=(0,a.useState)([]),xe=(0,p.TH)(),[ue,pe]=(0,a.useState)(""),[_e,he]=(0,a.useState)(s.RowID),[ge,je]=(0,a.useState)(""),[fe,ye]=(0,a.useState)(s.WorkOrderNo),[ve,Ze]=(0,a.useState)(s.selected_Charge_Cost_Center),[Ce,Se]=(0,a.useState)(),[we,be]=(0,a.useState)(""),[Ae,Ne]=(0,a.useState)(""),[ke,ze]=(0,a.useState)(""),[Ie,Ee]=(0,a.useState)(""),[De,Te]=(0,a.useState)(""),[Re,We]=(0,a.useState)(""),[Me,Oe]=(0,a.useState)(""),[Pe,Be]=(0,a.useState)(""),[Fe,He]=(0,a.useState)([]),[Ue,Le]=(0,a.useState)(!1),[qe,Qe]=(0,a.useState)(""),[Ye,Ge]=(0,a.useState)([]),[Ke,Ve]=(0,a.useState)([]);(0,a.useEffect)((()=>{Xe(x,_e),Je(),$e()}),[xe]);const Xe=async(e,t)=>{u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading();try{const s=await N.Z.get("/get_asset_spares.php?site_cd=".concat(e,"&RowID=").concat(t));"SUCCESS"===s.data.status?(E(s.data.data.header),T(s.data.data.result),u().close()):u().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){console.error("Error fetching data:",s),u().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},Je=async()=>{try{const e=await N.Z.get("/get_asset_spares_and_usage_from_lebal.php");"SUCCESS"===e.data.status&&Ge(e.data.data.ast_ls1)}catch(e){console.error("Error fetching data:",e)}},$e=async()=>{try{const e=await N.Z.get("/get_asset_spares_and_usage_from_mandatory_filed.php");e.data&&e.data.data&&e.data.data.MandatoryField&&e.data.data.MandatoryField.length>0&&Ve(e.data.data.MandatoryField)}catch(e){console.error("Error fetching data:",e)}},et=e=>{if(!Array.isArray(Ye))return"";const t=Ye.find((t=>t.column_name===e));return t?t.customize_label:""},tt=e=>{const t=Ke.find((t=>t.column_name===e));return t&&"1"===t.cf_label_required?"Requiredlabel":""},st=e=>{je(e.RowID),U(e.ast_ls1_stock_no),K(e.ast_ls1_varchar1),Y(e.ast_ls1_desc),$(e.ast_ls1_qty_needed),X(e.itm_mst_ttl_oh),B(!0)};function at(e){let{rightIcons:t,...s}=e;return(0,k.jsx)(Z.Z,{...s,InputProps:{endAdornment:t&&(0,k.jsx)("div",{style:{display:"flex",flexDirection:"row",color:"#000"},children:t.map(((e,t)=>(0,k.jsx)(y.Z,{children:e},t)))})}})}const[lt,it]=(0,a.useState)([{site_ID:x,mst_RowID:_e,emp_mst_login_id:_,selectStock:"",setDescription:"",setPartNo:"",setTotalOh:"",setQtyNeeded:""}]),rt=e=>{const t=[...lt];void 0!==e?t.splice(e,1):t.splice(1,t.length),it(t)},nt=()=>{O(!1),q(""),K(""),X(""),Qe(""),Y(""),$(""),rt()},ot=lt.map((e=>({...e,selectStock:"",setDescription:"",setPartNo:"",setQtyNeeded:"",setTotalOh:""}))),dt=async()=>{Le(!0)},ct=()=>{Le(!1)},mt=()=>{Qe("")},xt=(e,t)=>{let{value:s}=e.target;s=s.replace(/[^\d.]/g,""),s=s.slice(0,14);const a=s.split(".");let l=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");l.length>11&&(l=l.slice(0,12)+"."+l.slice(12,14));let i=a[1]?a[1].slice(0,2):"";t(i?"".concat(l,".").concat(i):l)},ut=async(e,t,s,a)=>{const l=[...lt];"setQtyNeeded"==t?(xt(a,(s=>{l[e][t]=s,it(l)})),$(s)):"setPartNo"==t?(l[e][t]=s.slice(0,16),K(s)):(l[e][t]=s,it(l))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{style:{paddingBottom:"20px",backgroundColor:"white"},children:(0,k.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,k.jsx)("div",{style:{marginRight:"5px"},children:(0,k.jsx)(S.Z,{icon:"fluent:window-dev-tools-20-regular",width:"30px",height:"30px",style:{fontSize:"24px"}})}),(0,k.jsx)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:(0,k.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"Spares"})})]})}),(0,k.jsx)("div",{className:"table-responsive",children:(0,k.jsx)(r.Z,{component:n.Z,children:(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(i.Z,{children:(()=>{const e={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.Z,{},"select"),Object.keys(I).map((t=>(0,k.jsx)(l.Z,{style:e,children:t},t)))]})})()})}),(0,k.jsx)(c.Z,{children:D.map(((e,t)=>(0,k.jsxs)(i.Z,{onClick:t=>st(e,t),style:{cursor:"pointer",transition:"background-color 0.3s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,k.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:t+1}),(0,k.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls1_stock_no}),(0,k.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls1_varchar1}),(0,k.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.itm_mst_desc}),(0,k.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls1_qty_needed}),(0,k.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.itm_mst_ttl_oh})]},t)))})]})})}),(0,k.jsx)("div",{children:(0,k.jsxs)(h.Z,{onClose:nt,"aria-labelledby":"customized-dialog-title",open:M,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,k.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,k.jsx)(S.Z,{icon:"fluent:window-dev-tools-20-regular",width:"30px",height:"30px",style:{fontSize:"24px",marginRight:"5px"}}),(0,k.jsx)("div",{children:"Add Spares"})," "]}),(0,k.jsx)(y.Z,{"aria-label":"close",onClick:nt,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,k.jsx)(S.Z,{icon:"material-symbols:close"})}),(0,k.jsx)(j.Z,{dividers:!0,children:(0,k.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,k.jsx)("div",{className:"row",children:(0,k.jsx)("div",{className:"col-sm-12 WrkOdrMtb",children:lt.map(((e,t)=>{const{selectStock:s,setDescription:a,setPartNo:l,setQtyNeeded:i,setTotalOh:r}=e;return(0,k.jsxs)("div",{className:"row my-3 tb",children:[(0,k.jsxs)(v.Z,{container:!0,spacing:2,children:[(0,k.jsx)(v.Z,{item:!0,xs:6,children:(0,k.jsxs)(C.Z,{style:{color:"#2196f3",textDecoration:"underline",fontWeight:600,fontSize:16},children:["Line ",t+1]})}),(0,k.jsx)(v.Z,{item:!0,xs:6,sx:{textAlign:"right"},children:1!==lt.length&&(0,k.jsx)(m.Z,{className:"workmarerial_dlt",onClick:()=>rt(t),children:(0,k.jsx)(b.G,{icon:A.WA2})})})]}),(0,k.jsxs)(v.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsxs)("label",{className:tt("ast_ls1_stock_no")||"Requiredlabel",children:[" ",et("ast_ls1_stock_no")||"Stock No:"]})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(at,{id:"outlined-basic",variant:"outlined",size:"small",fullWidth:!0,value:""!=e.selectStock?e.selectStock:"",disabled:!0,placeholder:"Select...",style:{color:"#000"},rightIcons:[(0,k.jsx)(S.Z,{icon:"material-symbols:close",onClick:mt}),(0,k.jsx)(S.Z,{icon:"tabler:edit",onClick:dt})]})}),(0,k.jsxs)(h.Z,{onClose:ct,"aria-labelledby":"customized-dialog-title",open:Ue,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"100vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,k.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,k.jsx)(S.Z,{icon:"flowbite:list-outline",width:"30px",height:"30px",style:{fontSize:"24px",marginRight:"5px"}}),(0,k.jsx)("div",{children:" Stock"})," "]}),(0,k.jsx)(y.Z,{"aria-label":"close",onClick:ct,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,k.jsx)(S.Z,{icon:"material-symbols:close"})}),(0,k.jsx)(j.Z,{dividers:!0,children:(0,k.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,k.jsx)(w.Z,{onRowClick:(e,s,a)=>(async(e,t,s,a)=>{if(u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading(),void 0!==t&&null!==t){Qe(t);try{const s=await N.Z.get("/get_Asset_StockNo_dataMaterial.php?site_cd="+x+"&itm_mst_stockno="+t);if("SUCCESS"===s.data.status){He(s.data.data),U(qe+":"+s.data.data[0].itm_mst_desc);const t=[...lt],a=qe;t[e].selectStock=a,it(t);const l=s.data.data[0].itm_mst_desc;t[e].setDescription=l,it(t);const i=s.data.data[0].itm_mst_partno;t[e].setPartNo=i,it(t);const r=s.data.data[0].itm_det_ttl_oh;t[e].setTotalOh=r,it(t),u().close()}}catch(l){console.error("Error posting form data:",l)}}"1"==a&&Le(!1)})(t,e,0,a)})})}),(0,k.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,k.jsx)(m.Z,{variant:"contained",type:"button",size:"small",startIcon:(0,k.jsx)(S.Z,{icon:"material-symbols:close"}),className:"Material_Close_btn",onClick:e=>{e.preventDefault(),ct()},children:"Close"}),(0,k.jsx)("div",{className:"timeCartSubmit",children:(0,k.jsx)(m.Z,{variant:"contained",type:"button",size:"small",className:"Material_Submit_btn",onClick:e=>{e.preventDefault(),""===qe?u().fire({icon:"error",title:"Oops...",text:"Please select one option!"}):Le(!1)},style:{marginLeft:"5px"},children:"Select"})})]})]}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_varchar1")||"Requiredlabel",children:et("ast_ls1_varchar1")||"Part Number:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:e.setPartNo.toUpperCase(),onChange:e=>ut(t,"setPartNo",e.target.value)})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_desc"),children:et("ast_ls1_desc")||"Description:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:""!=e.setDescription?e.setDescription:""})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_qty_needed"),children:et("ast_ls1_qty_needed")||"Quantity Needed:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",type:"text",fullWidth:!0,value:i,onChange:e=>ut(t,"setQtyNeeded",e.target.value,e),InputProps:{inputProps:{style:{textAlign:"right"}}},placeholder:".000"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_ttl_oh"),children:et("ast_ls1_ttl_oh")||"Total OH:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:""!=e.setTotalOh?e.setTotalOh:"",onChange:e=>{}})})]})]},t)}))})})})}),(0,k.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,k.jsx)(m.Z,{variant:"soft",color:"error",className:"CloseButton",onClick:e=>{e.preventDefault(),nt()},startIcon:(0,k.jsx)(S.Z,{icon:"jam:close"}),children:"Close"}),(0,k.jsxs)("div",{className:"timeCartSubmit",style:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(m.Z,{variant:"contained",className:"AddNewButton",startIcon:(0,k.jsx)(S.Z,{icon:"mingcute:add-line"}),onClick:e=>{e.preventDefault();let t=!0;lt.forEach((e=>{""===e.selectStock.trim()?(u().fire({icon:"error",title:"Oops...",text:"Stock No is Required!",customClass:{container:"swalcontainercustom"}}),t=!1):""===e.setDescription.trim()?(u().fire({icon:"error",title:"Oops...",text:"Description is Required!",customClass:{container:"swalcontainercustom"}}),t=!1):""===e.setPartNo&&(u().fire({icon:"error",title:"Oops...",text:"Part Number is Required!",customClass:{container:"swalcontainercustom"}}),t=!1)})),t&&it([...lt,{site_ID:x,mst_RowID:_e,emp_mst_login_id:_,selectStock:"",setDescription:"",setPartNo:"",setQtyNeeded:"",setTotalOh:""}])},style:{marginRight:"10px"},children:"Add"}),(0,k.jsx)(m.Z,{variant:"contained",className:"SaveButton assetSpares",startIcon:(0,k.jsx)(S.Z,{icon:"mingcute:save-fill"}),style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:async e=>{e.preventDefault();let t=!0;if(lt.forEach((e=>{""===e.selectStock.trim()?(u().fire({icon:"error",title:"Oops...",text:"Stock No is Required!",customClass:{container:"swalcontainercustom"}}),t=!1):""===e.setPartNo.trim()?(u().fire({icon:"error",title:"Oops...",text:"Part Number is Required!",customClass:{container:"swalcontainercustom"}}),t=!1):""===e.setDescription.trim()&&(u().fire({icon:"error",title:"Oops...",text:"Description is Required!",customClass:{container:"swalcontainercustom"}}),t=!1)})),t){u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});try{const e=await N.Z.post("/insert_asset_spares_table_data.php",lt);"SUCCESS"===e.data.status&&(u().close(),u().fire({title:"Asset Spare Request!",customClass:{container:"swalcontainercustom"},text:e.data.message,icon:"success",confirmButtonText:"OK"}).then((e=>{T([...D,lt]),Xe(x,_e),e.isConfirmed&&(rt(),nt())})))}catch(s){console.error("Error posting form data:",s)}}},children:"Save"})]})]})]})}),(0,k.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:(0,k.jsx)(m.Z,{type:"button",className:"tabAddButton",onClick:()=>{O(!0),it(ot)},children:"+ Add Spares"})})]}),(0,k.jsxs)(z,{onClose:F,"aria-labelledby":"customized-dialog-title",open:P,fullWidth:!0,children:[(0,k.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,k.jsx)(S.Z,{icon:"fluent:window-dev-tools-20-regular",width:"25px",height:"25px",style:{fontSize:"24px",marginRight:"5px"}}),(0,k.jsx)("div",{children:"Update Spares"})," "]}),(0,k.jsx)(y.Z,{"aria-label":"close",onClick:F,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,k.jsx)(S.Z,{icon:"material-symbols:close"})}),(0,k.jsx)(j.Z,{dividers:!0,children:(0,k.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,k.jsx)("div",{className:"row",children:(0,k.jsx)("div",{className:"col-sm-12 WrkOdrMtb",children:(0,k.jsx)("div",{className:"row my-3 tb",children:(0,k.jsxs)(v.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsxs)("label",{className:tt("ast_ls1_stock_no")||"Requiredlabel",children:[" ",et("ast_ls1_stock_no")||"Stock No:"]})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:H})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_varchar1")||"Requiredlabel",children:et("ast_ls1_varchar1")||"Part Number:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:G,onChange:e=>{const t=e.target.value;t.length<=25&&K(t)}})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_desc"),children:et("ast_ls1_desc")||"Description:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:Q})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_qty_needed"),children:et("ast_ls1_qty_needed")||"Quantity Needed:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:J,onChange:e=>xt(e,$),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,k.jsx)("label",{className:tt("ast_ls1_ttl_oh"),children:et("ast_ls1_ttl_oh")||"Total OH:"})}),(0,k.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,k.jsx)(Z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:V})})]})})})})})}),(0,k.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,k.jsx)(m.Z,{variant:"soft",color:"error",className:"CloseButton",onClick:e=>{e.preventDefault(),F()},startIcon:(0,k.jsx)(S.Z,{icon:"jam:close"}),children:"Close"}),(0,k.jsx)("div",{className:"timeCartSubmit",style:{display:"flex",alignItems:"center"},children:(0,k.jsx)(m.Z,{variant:"contained",className:"SaveButton assetSpares",startIcon:(0,k.jsx)(S.Z,{icon:"mingcute:save-fill"}),style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:async e=>{u().fire({title:"Loading.... !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading();var t={site_cd:x,PartNo:G.trim(),QtyNeeded:J.trim(),RowID:ge,auditUser:_};console.log("json_UpdateAsset____",t);try{const e=await N.Z.post("/update_asset_Spares.php",JSON.stringify(t));"SUCCESS"===e.data.status&&(u().close(),u().fire({icon:"success",customClass:{container:"swalcontainercustom"},title:e.data.status,text:e.data.message}).then((e=>{T([...D,lt]),Xe(x,_e),e.isConfirmed&&F()})))}catch(s){u().close(),u().fire({icon:"error",title:"Oops somthing is wrong...",text:s})}},children:"Save"})})]})]})]})}},74234:(e,t,s)=>{s.d(t,{Z:()=>E});var a=s(72791),l=s(68745),i=s(9195),r=s(55261),n=s(4841),o=s(15416),d=s(22041),c=s(62155),m=s(5849),x=s(21830),u=s.n(x),p=(s(72426),s(57689)),_=s(66934),h=s(5574),g=s(65661),j=s(4899),f=s(77386),y=s(90977),v=s(24308),Z=s(46314),C=s(93006),S=s(4567),w=s(40268),b=s(96927),A=(s(6405),s(9806)),N=s(11632),k=s(18709),z=s(80184);const I=(0,_.ZP)(h.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),E=e=>{let{onRowClick:t,data:s}=e,x=localStorage.getItem("site_ID"),_=localStorage.getItem("emp_mst_login_id");const[E,D]=a.useState([]),[T,R]=a.useState([]),[W,M]=a.useState([]),[O,P]=(0,a.useState)(!1),[B,F]=(0,a.useState)(!1),H=()=>F(!1),[U,L]=(0,a.useState)([]),[q,Q]=(0,a.useState)([]),[Y,G]=(0,a.useState)([]),[K,V]=(0,a.useState)([]),[X,J]=(0,a.useState)(""),[$,ee]=(0,a.useState)(""),[te,se]=(0,a.useState)(""),[ae,le]=(0,a.useState)([]),[ie,re]=(0,a.useState)([]),[ne,oe]=(0,a.useState)([]),[de,ce]=(0,a.useState)([]),[me,xe]=(0,a.useState)(""),ue=(0,p.TH)(),[pe,_e]=(0,a.useState)(""),[he,ge]=(0,a.useState)(s.RowID),[je,fe]=(0,a.useState)(""),[ye,ve]=(0,a.useState)(s.WorkOrderNo),[Ze,Ce]=(0,a.useState)(s.selected_Charge_Cost_Center),[Se,we]=(0,a.useState)(),[be,Ae]=(0,a.useState)(""),[Ne,ke]=(0,a.useState)(""),[ze,Ie]=(0,a.useState)(""),[Ee,De]=(0,a.useState)(""),[Te,Re]=(0,a.useState)(""),[We,Me]=(0,a.useState)(""),[Oe,Pe]=(0,a.useState)(""),[Be,Fe]=(0,a.useState)(""),[He,Ue]=(0,a.useState)(""),[Le,qe]=(0,a.useState)([]),[Qe,Ye]=(0,a.useState)(""),[Ge,Ke]=(0,a.useState)([]),[Ve,Xe]=(0,a.useState)([]),[Je,$e]=(0,a.useState)(new Date),[et,tt]=(0,a.useState)(new Date),[st,at]=(0,a.useState)(),[lt,it]=(0,a.useState)([]),[rt,nt]=(0,a.useState)([]),[ot,dt]=(0,a.useState)([]);(0,a.useEffect)((()=>{ct(x,he),mt(x),xt(),ut()}),[ue]);const ct=async(e,t)=>{u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading();try{const s=await k.Z.get("/get_asset_specification.php?site_cd=".concat(e,"&RowID=").concat(t));"SUCCESS"===s.data.status?(D(s.data.data.header),R(s.data.data.result),u().close()):u().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){console.error("Error fetching data:",s),u().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},mt=async()=>{try{const e=await k.Z.get("/getSpecificationUOM.php?site_cd=".concat(x));if("SUCCESS"===e.data.status){Ke(e.data.data.result);let t=e.data.data.result.map((e=>({label:e.uom_mst_uom+" : "+e.uom_mst_desc,value:e.uom_mst_desc,key:e.uom_mst_uom})));Ke(t)}else u().fire({icon:"error",title:"Oops...",text:e.data.message})}catch(e){console.error("Error fetching data:",e),u().fire({icon:"error",title:"Oops get_sitecode...",text:e})}},xt=async()=>{try{const e=await k.Z.get("/get_asset_specification_form_lebel.php");"SUCCESS"===e.data.status&&nt(e.data.data.ast_rat)}catch(e){console.error("Error fetching data:",e)}},ut=async()=>{try{const e=await k.Z.get("/get_asset_specification_from_mandatory_filed.php");e.data&&e.data.data&&e.data.data.MandatoryField&&e.data.data.MandatoryField.length>0&&dt(e.data.data.MandatoryField)}catch(e){console.error("Error fetching data:",e)}},pt=e=>{if(!Array.isArray(rt))return"";const t=rt.find((t=>t.column_name===e));return t?t.customize_label:""},_t=e=>{const t=ot.find((t=>t.column_name===e));return t&&"1"===t.cf_label_required?"Requiredlabel":""},ht=e=>{we(e.ast_rat_desc),ke(e.ast_rat_rating),Ae(e.ast_rat_uom),fe(e.RowID),F(!0)},[gt,jt]=(0,a.useState)([{site_ID:x,mst_RowID:he,emp_mst_login_id:_,ast_rat_uom:"",ast_rat_rating:"",ast_rat_desc:""}]),ft=e=>{const t=[...gt];void 0!==e?t.splice(e,1):t.splice(1,t.length),jt(t)},yt=gt.map((e=>({...e,ast_rat_uom:"",ast_rat_desc:"",ast_rat_rating:""}))),vt=async(e,t,s)=>{const a=[...gt];"ast_rat_desc"==t?(a[e][t]=s.slice(0,255),jt(a)):"ast_rat_rating"==t?(a[e][t]=s.slice(0,10),jt(a)):(a[e][t]=s,jt(a)),"ast_rat_uom"==t&&it(s)},Zt=()=>{P(!1),Q(""),ee(""),se(""),Ye(""),J(""),xe(""),ft()};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{style:{paddingBottom:"20px",backgroundColor:"white"},children:(0,z.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,z.jsx)("div",{style:{marginRight:"10px"},children:(0,z.jsx)(w.Z,{icon:"mdi:axis-arrow-info",width:"25px",height:"25px",style:{fontSize:"30px"}})}),(0,z.jsx)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:(0,z.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"Specification"})})]})}),(0,z.jsx)("div",{className:"table-responsive",children:(0,z.jsx)(r.Z,{component:n.Z,children:(0,z.jsxs)(o.Z,{children:[(0,z.jsx)(d.Z,{children:(0,z.jsx)(i.Z,{children:(()=>{const e={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left"};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(l.Z,{},"select"),Object.keys(E).map((t=>(0,z.jsx)(l.Z,{style:e,children:t},t)))]})})()})}),(0,z.jsx)(c.Z,{children:T.map(((e,t)=>(0,z.jsxs)(i.Z,{onClick:t=>ht(e,t),style:{cursor:"pointer",transition:"background-color 0.3s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,z.jsx)(l.Z,{style:{padding:"5px 15px",textAlign:"left"},children:t+1}),(0,z.jsx)(l.Z,{style:{padding:"5px 15px",textAlign:"left"},children:e.ast_rat_desc}),(0,z.jsx)(l.Z,{style:{padding:"5px 15px",textAlign:"left"},children:e.ast_rat_rating}),(0,z.jsx)(l.Z,{style:{padding:"5px 15px",textAlign:"left"},children:e.ast_rat_uom})]},t)))})]})})}),(0,z.jsx)("div",{children:(0,z.jsxs)(h.Z,{onClose:Zt,"aria-labelledby":"customized-dialog-title",open:O,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,z.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,z.jsx)(w.Z,{icon:"mdi:axis-arrow-info",width:"25px",height:"25px",style:{fontSize:"24px",marginRight:"5px"}}),(0,z.jsx)("div",{children:"Add Specification"})," "]}),(0,z.jsx)(y.Z,{"aria-label":"close",onClick:Zt,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,z.jsx)(w.Z,{icon:"material-symbols:close"})}),(0,z.jsx)(j.Z,{dividers:!0,children:(0,z.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,z.jsx)("div",{className:"row",children:(0,z.jsx)("div",{className:"col-sm-12 WrkOdrMtb",children:gt.map(((e,t)=>{const{ast_rat_uom:s,ast_rat_desc:a,ast_rat_rating:l}=e;return(0,z.jsxs)("div",{className:"row my-3 tb",children:[(0,z.jsxs)(v.Z,{container:!0,spacing:2,children:[(0,z.jsx)(v.Z,{item:!0,xs:6,children:(0,z.jsxs)(S.Z,{style:{color:"#2196f3",textDecoration:"underline",fontWeight:600,fontSize:16},children:["Line ",t+1]})}),(0,z.jsx)(v.Z,{item:!0,xs:6,sx:{textAlign:"right"},children:1!==gt.length&&(0,z.jsx)(m.Z,{className:"workmarerial_dlt",onClick:()=>ft(t),children:(0,z.jsx)(A.G,{icon:N.WA2})})})]}),(0,z.jsxs)(v.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,z.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,z.jsxs)("label",{className:_t("ast_rat_desc")||"Requiredlabel",children:[" ",pt("ast_rat_desc")||"Description:"]})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,z.jsx)(b.u,{variant:"outlined",size:"small",minRows:2.9,className:"TxtAra",style:{width:"100%"},fullWidth:!0,value:a,onChange:e=>vt(t,"ast_rat_desc",e.target.value)})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,z.jsxs)("label",{className:_t("ast_rat_rating"),children:[" ",pt("ast_rat_rating")||"Rating:"]})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,z.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:l,onChange:e=>vt(t,"ast_rat_rating",e.target.value)})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,z.jsxs)("label",{className:_t("ast_rat_uom"),children:[" ",pt("ast_rat_uom")||"UOM:"]})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,z.jsx)(Z.Z,{options:Ge,value:e.ast_rat_uom,onChange:(e,s)=>vt(t,"ast_rat_uom",s),disableAnimation:!0,renderInput:e=>(0,z.jsx)("div",{children:(0,z.jsx)(C.Z,{...e,placeholder:"Select...",variant:"outlined",size:"small",className:"Extrasize"})})})})]})]},t)}))})})})}),(0,z.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,z.jsx)(m.Z,{variant:"soft",color:"error",className:"CloseButton",onClick:e=>{e.preventDefault(),Zt()},startIcon:(0,z.jsx)(w.Z,{icon:"jam:close"}),children:"Close"}),(0,z.jsxs)("div",{className:"timeCartSubmit",style:{display:"flex",alignItems:"center"},children:[(0,z.jsx)(m.Z,{variant:"contained",className:"AddNewButton",startIcon:(0,z.jsx)(w.Z,{icon:"mingcute:add-line"}),onClick:e=>{e.preventDefault();let t=!0;gt.forEach((e=>{""===e.ast_rat_desc.trim()&&(u().fire({icon:"error",title:"Oops...",text:"Description is Required!",customClass:{container:"swalcontainercustom"}}),t=!1)})),t&&jt([...gt,{site_ID:x,mst_RowID:he,emp_mst_login_id:_,ast_rat_uom:"",ast_rat_desc:"",ast_rat_rating:""}])},style:{marginRight:"10px"},children:"Add"}),(0,z.jsx)(m.Z,{variant:"contained",className:"SaveButton assetSpares",startIcon:(0,z.jsx)(w.Z,{icon:"mingcute:save-fill"}),style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:async e=>{e.preventDefault();let t=!0;if(gt.forEach((e=>{""===e.ast_rat_desc.trim()&&(u().fire({icon:"error",title:"Oops...",text:"Description is Required!",customClass:{container:"swalcontainercustom"}}),t=!1)})),t){u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading();try{const e=await k.Z.post("/insert_asset_specification_table_data.php",gt);"SUCCESS"===e.data.status&&(u().close(),u().fire({title:"Asset Specification Request!",customClass:{container:"swalcontainercustom"},text:e.data.message,icon:"success",confirmButtonText:"OK"}).then((e=>{R([...T,gt]),ct(x,he),e.isConfirmed&&(ft(),Zt())})))}catch(s){console.error("Error posting form data:",s)}}},children:"Save"})]})]})]})}),(0,z.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:(0,z.jsx)(m.Z,{type:"button",className:"tabAddButton",onClick:()=>{P(!0),jt(yt)},children:"+ Add Specification"})})]}),(0,z.jsxs)(I,{onClose:H,"aria-labelledby":"customized-dialog-title",open:B,fullWidth:!0,children:[(0,z.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,z.jsx)(w.Z,{icon:"mdi:axis-arrow-info",width:"25px",height:"25px",style:{fontSize:"24px",marginRight:"5px"}}),(0,z.jsx)("div",{children:"Update Specification"})," "]}),(0,z.jsx)(y.Z,{"aria-label":"close",onClick:H,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,z.jsx)(w.Z,{icon:"material-symbols:close"})}),(0,z.jsx)(j.Z,{dividers:!0,children:(0,z.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,z.jsx)("div",{className:"row",children:(0,z.jsx)("div",{className:"col-sm-12 WrkOdrMtb",children:(0,z.jsx)("div",{className:"row my-3 tb",children:(0,z.jsxs)(v.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,z.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,z.jsxs)("label",{className:_t("ast_rat_desc")||"Requiredlabel",children:[" ",pt("ast_rat_desc")||"Description:"]})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,z.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:Se,onChange:e=>{const t=e.target.value;t.length<=255&&we(t)}})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,z.jsxs)("label",{className:_t("ast_rat_rating"),children:[" ",pt("ast_rat_rating")||"Rating:"]})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,z.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:Ne,onChange:e=>{const t=e.target.value;t.length<=10&&ke(t)}})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,z.jsxs)("label",{className:_t("ast_rat_uom"),children:[" ",pt("ast_rat_uom")||"UOM:"]})}),(0,z.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,z.jsx)(Z.Z,{options:Ge,value:be,onChange:(e,t)=>Ae(t),disableAnimation:!0,renderInput:e=>(0,z.jsx)("div",{children:(0,z.jsx)(C.Z,{...e,placeholder:"Select...",variant:"outlined",size:"small",className:"Extrasize"})})})})]})})})})})}),(0,z.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,z.jsx)(m.Z,{variant:"soft",color:"error",className:"CloseButton",onClick:e=>{e.preventDefault(),H()},startIcon:(0,z.jsx)(w.Z,{icon:"jam:close"}),children:"Close"}),(0,z.jsx)("div",{className:"timeCartSubmit",style:{display:"flex",alignItems:"center"},children:(0,z.jsx)(m.Z,{variant:"contained",className:"SaveButton assetSpares",startIcon:(0,z.jsx)(w.Z,{icon:"mingcute:save-fill"}),style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:async e=>{u().fire({title:"Loading.... !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading();var t={site_cd:x,getDescription:Se.trim(),Rating:Ne.trim(),UOM:be,RowID:je,auditUser:_};try{const e=await k.Z.post("/update_asset_specification.php",JSON.stringify(t));"SUCCESS"===e.data.status&&(u().close(),u().fire({icon:"success",customClass:{container:"swalcontainercustom"},title:e.data.status,text:e.data.message}).then((e=>{R([...T,gt]),ct(x,he),e.isConfirmed&&H()})))}catch(s){u().close(),u().fire({icon:"error",title:"Oops somthing is wrong...",text:s})}},children:"Save"})})]})]})]})}},62521:(e,t,s)=>{s.d(t,{Z:()=>R});var a=s(72791),l=s(68745),i=s(9195),r=s(55261),n=s(4841),o=s(15416),d=s(22041),c=s(62155),m=s(5849),x=s(21830),u=s.n(x),p=(s(72426),s(57689)),_=s(66934),h=s(5574),g=s(65661),j=s(4899),f=s(77386),y=s(90977),v=s(24308),Z=s(46314),C=s(93006),S=s(4567),w=s(32746),b=s(40268),A=(s(6405),s(9806)),N=s(11632),k=s(13034),z=s(25801),I=s(96927),E=s(18709),D=s(80184);const T=(0,_.ZP)(h.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),R=e=>{let{onRowClick:t,data:s}=e,x=localStorage.getItem("site_ID"),_=localStorage.getItem("emp_mst_login_id");const[R,W]=a.useState([]),[M,O]=a.useState([]),[P,B]=a.useState([]),[F,H]=(0,a.useState)(!1),[U,L]=(0,a.useState)(!1),q=()=>L(!1),[Q,Y]=(0,a.useState)([]),[G,K]=(0,a.useState)([]),[V,X]=(0,a.useState)([]),[J,$]=(0,a.useState)([]),[ee,te]=(0,a.useState)(""),[se,ae]=(0,a.useState)(""),[le,ie]=(0,a.useState)(""),[re,ne]=(0,a.useState)([]),[oe,de]=(0,a.useState)([]),[ce,me]=(0,a.useState)([]),[xe,ue]=(0,a.useState)([]),[pe,_e]=(0,a.useState)(""),he=(0,p.TH)(),[ge,je]=(0,a.useState)(""),[fe,ye]=(0,a.useState)(s.RowID),[ve,Ze]=(0,a.useState)(s.WorkOrderNo),[Ce,Se]=(0,a.useState)(s.selected_Charge_Cost_Center),[we,be]=(0,a.useState)(),[Ae,Ne]=(0,a.useState)(""),[ke,ze]=(0,a.useState)(""),[Ie,Ee]=(0,a.useState)(""),[De,Te]=(0,a.useState)(""),[Re,We]=(0,a.useState)(""),[Me,Oe]=(0,a.useState)(""),[Pe,Be]=(0,a.useState)(""),[Fe,He]=(0,a.useState)(""),[Ue,Le]=(0,a.useState)([]),[qe,Qe]=(0,a.useState)(""),[Ye,Ge]=(0,a.useState)(new Date),[Ke,Ve]=(0,a.useState)(new Date),[Xe,Je]=(0,a.useState)([]),[$e,et]=(0,a.useState)(),[tt,st]=(0,a.useState)([]),[at,lt]=(0,a.useState)([]),[it,rt]=(0,a.useState)(!1),[nt,ot]=(0,a.useState)(""),[dt,ct]=(0,a.useState)(""),[mt,xt]=(0,a.useState)(""),[ut,pt]=(0,a.useState)(""),[_t,ht]=(0,a.useState)(""),[gt,jt]=(0,a.useState)(""),[ft,yt]=(0,a.useState)(""),[vt,Zt]=(0,a.useState)(""),[Ct,St]=(0,a.useState)(""),[wt,bt]=(0,a.useState)(""),[At,Nt]=(0,a.useState)(""),[kt,zt]=(0,a.useState)(""),[It,Et]=(0,a.useState)(null),[Dt,Tt]=(0,a.useState)(null),[Rt,Wt]=(0,a.useState)(""),[Mt,Ot]=(0,a.useState)([]),[Pt,Bt]=(0,a.useState)([]),[Ft,Ht]=(0,a.useState)(null);(0,a.useEffect)((()=>{Ut(x,fe),Lt(x),qt(),Qt()}),[he]);const Ut=async(e,t)=>{u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),u().showLoading();try{const s=await E.Z.get("/get_asset_usage.php?site_cd=".concat(e,"&RowID=").concat(t));"SUCCESS"===s.data.status?(W(s.data.data.header),O(s.data.data.result),u().close()):u().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){console.error("Error fetching data:",s),u().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},Lt=async()=>{try{const e=await E.Z.get("/getUsageUOM.php?site_cd=".concat(x));if("SUCCESS"===e.data.status){st(e.data.data.result);let t=e.data.data.result.map((e=>({label:e.uom_mst_uom+" : "+e.uom_mst_desc,value:e.uom_mst_desc,key:e.uom_mst_uom})));st(t)}else u().fire({icon:"error",title:"Oops...",text:e.data.message})}catch(e){console.error("Error fetching data:",e),u().fire({icon:"error",title:"Oops get_sitecode...",text:e})}},qt=async()=>{try{const e=await E.Z.get("/get_asset_spares_and_usage_from_lebal.php");"SUCCESS"===e.data.status&&Ot(e.data.data.ast_ls2)}catch(e){console.error("Error fetching data:",e)}},Qt=async()=>{try{const e=await E.Z.get("/get_asset_spares_and_usage_from_mandatory_filed.php");e.data&&e.data.data&&e.data.data.MandatoryField&&e.data.data.MandatoryField.length>0&&Bt(e.data.data.MandatoryField)}catch(e){console.error("Error fetching data:",e)}},Yt=e=>{if(!Array.isArray(Mt))return"";const t=Mt.find((t=>t.column_name===e));return t?t.customize_label:""},Gt=e=>{const t=Pt.find((t=>t.column_name===e));return t&&"1"===t.cf_label_required?"Requiredlabel":""},Kt=e=>{if(!e)return"No date available";const t=new Date(e),s=t.getTimezoneOffset();return new Date(t.getTime()-6e4*s).toISOString().slice(0,16).replace("T"," ")},Vt=e=>{Wt(e.RowID),et(e.ast_ls2_meter_id),lt(e.ast_ls2_usage_uom),rt(e.ast_ls2_incr_usage_flag),ot(e.ast_ls2_meter_point),ct(e.ast_ls2_meter_desc),xt(e.ast_ls2_meter_install_date),pt(e.ast_ls2_usage_date),ht(e.ast_ls2_usage_reading),jt(e.ast_ls2_max_avg_usage),yt(e.ast_ls2_old_ltd_usage),Zt(e.ast_ls2_old_ltd_usage),St(e.ast_ls2_max_avg_usage),bt(e.ast_ls2_warranty_usage),Nt(e.ast_ls2_meter_maximum),zt(e.ast_ls2_meter_install_wo),Et(e.ast_ls2_alert_ro_flag),Tt(e.ast_ls2_alert_ma_flag),L(!0)};const[Xt,Jt]=(0,a.useState)([{site_ID:x,mst_RowID:fe,emp_mst_login_id:_,ast_ls2_usage_uom:"",ast_ls2_meter_desc:"",ast_ls2_usage_date:Ke,ast_ls2_usage_reading:"0.00",ast_ls2_avg_usage:"0.00",ast_ls2_old_ltd_usage:"",ast_ls2_ltd_usage:"0.00",ast_ls2_meter_point:"",ast_ls2_meter_id:"",ast_ls2_max_avg_usage:"",ast_ls2_warranty_usage:"",ast_ls2_meter_maximum:"",ast_ls2_meter_install_wo:"",ast_ls2_incr_usage_flag:"",ast_ls2_alert_ma_flag:""}]),$t=e=>{const t=[...Xt];void 0!==e?t.splice(e,1):t.splice(1,t.length),Jt(t)},es=()=>{H(!1),K(""),ae(""),ie(""),Qe(""),te(""),_e(""),$t()},ts=Xt.map((e=>({...e,ast_ls2_usage_uom:"",ast_ls2_meter_desc:"",ast_ls2_old_ltd_usage:"",ast_ls2_meter_id:"",ast_ls2_meter_point:"",ast_ls2_max_avg_usage:"",ast_ls2_warranty_usage:"",ast_ls2_meter_maximum:"",ast_ls2_meter_install_wo:"",ast_ls2_incr_usage_flag:"",ast_ls2_alert_ma_flag:"",ast_ls2_alert_ro_flag:""}))),ss=(e,t)=>{let{value:s}=e.target;s=s.replace(/[^\d.]/g,""),s=s.slice(0,14);const a=s.split(".");let l=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");l.length>11&&(l=l.slice(0,12)+"."+l.slice(12,14));let i=a[1]?a[1].slice(0,2):"";t(i?"".concat(l,".").concat(i):l),Ht(null)},as=async(e,t,s,a)=>{const l=[...Xt];"ast_ls2_meter_id"==t?(l[e][t]=s.slice(0,50),Jt(l),et(s)):"ast_ls2_meter_point"==t?(l[e][t]=s.slice(0,40),Jt(l)):"ast_ls2_meter_desc"==t?(l[e][t]=s.slice(0,80),Jt(l)):"ast_ls2_old_ltd_usage"==t||"ast_ls2_max_avg_usage"==t||"ast_ls2_warranty_usage"==t||"ast_ls2_meter_maximum"==t?ss(a,(s=>{l[e][t]=s,Jt(l)})):"ast_ls2_meter_install_wo"==t?(l[e][t]=s.slice(0,11),Jt(l)):(l[e][t]=s,Jt(l)),"ast_ls2_usage_uom"==t&&Je(s)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{style:{paddingBottom:"20px",backgroundColor:"white"},children:(0,D.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)("div",{style:{marginRight:"5px"},children:(0,D.jsx)(b.Z,{icon:"fluent:calendar-data-bar-24-regular",width:"30px",height:"30px",style:{fontSize:"45px"}})}),(0,D.jsx)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:(0,D.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"Usage"})})]})}),(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsx)(r.Z,{component:n.Z,children:(0,D.jsxs)(o.Z,{children:[(0,D.jsx)(d.Z,{children:(0,D.jsx)(i.Z,{children:(()=>{const e={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(l.Z,{},"select"),Object.keys(R).map((t=>(0,D.jsx)(l.Z,{style:e,children:t},t)))]})})()})}),(0,D.jsx)(c.Z,{children:M.map(((e,t)=>(0,D.jsxs)(i.Z,{onClick:t=>Vt(e,t),style:{cursor:"pointer",transition:"background-color 0.3s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:t+1}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_meter_id}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_usage_uom}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{checked:"Y"===e.ast_ls2_incr_usage_flag})})}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_meter_point}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_meter_desc}),e.ast_ls2_meter_install_date&&e.ast_ls2_meter_install_date.date?(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:Kt(e.ast_ls2_meter_install_date.date)}):(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"}}),e.ast_ls2_usage_date&&e.ast_ls2_usage_date.date?(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:Kt(e.ast_ls2_usage_date.date)}):(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"}}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_usage_reading}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_avg_usage}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_old_ltd_usage}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_ltd_usage}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_max_avg_usage}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_warranty_usage}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_meter_maximum}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{checked:"Y"===e.ast_ls2_alert_ma_flag})})}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{checked:"Y"===e.ast_ls2_alert_ro_flag})})}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_ls2_meter_install_wo})]},t)))})]})})}),(0,D.jsx)("div",{children:(0,D.jsxs)(h.Z,{onClose:es,"aria-labelledby":"customized-dialog-title",open:F,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,D.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,D.jsx)(b.Z,{icon:"fluent:calendar-data-bar-24-regular",width:"30px",height:"30px",style:{fontSize:"24px",marginRight:"5px"}}),(0,D.jsx)("div",{children:"Add Usage"})," "]}),(0,D.jsx)(y.Z,{"aria-label":"close",onClick:es,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,D.jsx)(b.Z,{icon:"material-symbols:close"})}),(0,D.jsx)(j.Z,{dividers:!0,children:(0,D.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,D.jsx)("div",{className:"row",children:(0,D.jsx)("div",{className:"col-sm-12 WrkOdrMtb",children:Xt.map(((e,t)=>{const{ast_ls2_usage_uom:s,ast_ls2_meter_desc:a,ast_ls2_incr_usage_flag:l,ast_ls2_old_ltd_usage:i,ast_ls2_meter_id:r,ast_ls2_meter_point:n,ast_ls2_max_avg_usage:o,ast_ls2_warranty_usage:d,ast_ls2_meter_maximum:c,ast_ls2_meter_install_wo:x,ast_ls2_alert_ma_flag:u,ast_ls2_alert_ro_flag:p}=e;return(0,D.jsxs)("div",{className:"row my-3 tb",children:[(0,D.jsxs)(v.Z,{container:!0,spacing:2,children:[(0,D.jsx)(v.Z,{item:!0,xs:6,children:(0,D.jsxs)(S.Z,{style:{color:"#2196f3",textDecoration:"underline",fontWeight:600,fontSize:16},children:["Line ",t+1]})}),(0,D.jsx)(v.Z,{item:!0,xs:6,sx:{textAlign:"right"},children:1!==Xt.length&&(0,D.jsx)(m.Z,{className:"workmarerial_dlt",onClick:()=>$t(t),children:(0,D.jsx)(A.G,{icon:N.WA2})})})]}),(0,D.jsxs)(v.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_id")||"Requiredlabel",children:[" ",Yt("ast_ls2_meter_id")||"Meter ID:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:r,onChange:e=>as(t,"ast_ls2_meter_id",e.target.value)})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_usage_uom")||"Requiredlabel",children:[" ",Yt("ast_ls2_usage_uom")||"Usage UOM:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(Z.Z,{options:tt,value:e.ast_ls2_usage_uom,onChange:(e,s)=>as(t,"ast_ls2_usage_uom",s),disableAnimation:!0,renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(C.Z,{...e,placeholder:"Select...",variant:"outlined",size:"small",className:"Extrasize"})})})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_incr_usage_flag"),children:[" ",Yt("ast_ls2_incr_usage_flag")||"Total Running Meter:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,style:{textAlign:"right"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{defaultChecked:!1}),onChange:e=>as(t,"ast_ls2_incr_usage_flag",e.target.checked?"Y":"N")})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_point"),children:[" ",Yt("ast_ls2_meter_point")||"Meter Point:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:n,onChange:e=>as(t,"ast_ls2_meter_point",e.target.value)})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_desc"),children:[" ",Yt("ast_ls2_meter_desc")||"Description:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(I.u,{"aria-label":"empty textarea",minRows:2.9,value:a,fullWidth:!0,style:{width:"100%"},onChange:e=>as(t,"ast_ls2_meter_desc",e.target.value),className:"ast_mst_safety_rqmts"===Ft?"erroBorderadd":"TxtAra"})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_install_date"),children:[" ",Yt("ast_ls2_meter_install_date")||"Meter Install Date:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(w.x,{value:Ye,format:"dd/MM/yyyy HH:mm",onChange:e=>{as(t,"ast_ls2_meter_install_date",e)},slotProps:{textField:{fullWidth:!0}},className:"Extrasize"})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_usage_date"),children:[" ",Yt("ast_ls2_usage_date")||"Usage Date:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(w.x,{disabled:!0,value:Ke,format:"dd/MM/yyyy HH:mm",onChange:e=>{Ve(e)},slotProps:{textField:{fullWidth:!0}},className:"Extrasize"})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_usage_reading"),children:[" ",Yt("ast_ls2_usage_reading")||"Usage Reading:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:".00",onChange:e=>{}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_avg_usage"),children:[" ",Yt("ast_ls2_avg_usage")||"Average Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:".00",onChange:e=>{}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_old_ltd_usage"),children:[" ",Yt("ast_ls2_old_ltd_usage")||"Meter Installed Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:i,onChange:e=>as(t,"ast_ls2_old_ltd_usage",e.target.value,e),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_ltd_usage"),children:[" ",Yt("ast_ls2_ltd_usage")||"LTD Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:".00",onChange:e=>{}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_max_avg_usage"),children:[" ",Yt("ast_ls2_max_avg_usage")||"Max Average Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:o,onChange:e=>as(t,"ast_ls2_max_avg_usage",e.target.value,e),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_warranty_usage"),children:[" ",Yt("ast_ls2_warranty_usage")||"Warranty Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:d,onChange:e=>as(t,"ast_ls2_warranty_usage",e.target.value,e),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_maximum"),children:[" ",Yt("ast_ls2_meter_maximum")||"Meter Maximum:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:c,onChange:e=>as(t,"ast_ls2_meter_maximum",e.target.value,e),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_alert_ma_flag"),children:[" ",Yt("ast_ls2_alert_ma_flag")||"Alert MA Flag:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,style:{textAlign:"right"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{}),onChange:e=>as(t,"ast_ls2_alert_ma_flag",e.target.checked?"Y":"N")})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_alert_ro_flag"),children:[" ",Yt("ast_ls2_alert_ro_flag")||"Alert RO Flag:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,style:{textAlign:"right"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{defaultChecked:!1}),onChange:e=>as(t,"ast_ls2_alert_ro_flag",e.target.checked?"Y":"N")})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_install_wo"),children:[" ",Yt("ast_ls2_meter_install_wo")||"Meter Install WO:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:x,onChange:e=>as(t,"ast_ls2_meter_install_wo",e.target.value,e)})})]})]},t)}))})})})}),(0,D.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,D.jsx)(m.Z,{variant:"soft",color:"error",className:"CloseButton",onClick:e=>{e.preventDefault(),es()},startIcon:(0,D.jsx)(b.Z,{icon:"jam:close"}),children:"Close"}),(0,D.jsxs)("div",{className:"timeCartSubmit",style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(m.Z,{variant:"contained",className:"AddNewButton",startIcon:(0,D.jsx)(b.Z,{icon:"mingcute:add-line"}),onClick:e=>{e.preventDefault();let t=!0;Xt.forEach((e=>{e.ast_ls2_meter_id&&""!==e.ast_ls2_meter_id.trim()?e.ast_ls2_usage_uom&&""!==e.ast_ls2_usage_uom.label.trim()||(u().fire({icon:"error",title:"Oops...",text:"Usage UOM is Required!",customClass:{container:"swalcontainercustom"}}),t=!1):(u().fire({icon:"error",title:"Oops...",text:"Meter ID is Required!",customClass:{container:"swalcontainercustom"}}),t=!1)})),t&&Jt([...Xt,{site_ID:x,mst_RowID:fe,emp_mst_login_id:_,ast_ls2_usage_uom:"",ast_ls2_meter_desc:"",ast_ls2_usage_date:Ke,ast_ls2_usage_reading:"0.00",ast_ls2_avg_usage:"0.00",ast_ls2_old_ltd_usage:"",ast_ls2_ltd_usage:"0.00",ast_ls2_meter_id:"",ast_ls2_meter_point:"",ast_ls2_max_avg_usage:"",ast_ls2_warranty_usage:"",ast_ls2_meter_maximum:"",ast_ls2_meter_install_wo:"",ast_ls2_incr_usage_flag:"",ast_ls2_alert_ma_flag:"",ast_ls2_alert_ro_flag:""}])},style:{marginRight:"10px"},children:"Add"}),(0,D.jsx)(m.Z,{variant:"contained",className:"SaveButton assetSpares",startIcon:(0,D.jsx)(b.Z,{icon:"mingcute:save-fill"}),style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:async e=>{e.preventDefault();let t=!0;if(Xt.forEach((e=>{""===e.ast_ls2_meter_id.trim()?(u().fire({icon:"error",title:"Oops...",text:"Meter ID is Required!",customClass:{container:"swalcontainercustom"}}),t=!1):M.some((t=>t.ast_ls2_meter_id===e.ast_ls2_meter_id.trim()))?(u().fire({icon:"error",title:"Oops...",text:"Meter ID already exists!",customClass:{container:"swalcontainercustom"}}),t=!1):""===e.ast_ls2_usage_uom.label.trim()&&(u().fire({icon:"error",title:"Oops...",text:"Usage UOM is Required!",customClass:{container:"swalcontainercustom"}}),t=!1)})),t){u().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});try{const e=await E.Z.post("/insert_asset_usage_table_data.php",Xt);"SUCCESS"===e.data.status&&(u().close(),u().fire({title:"Asset Usage Request!",customClass:{container:"swalcontainercustom"},text:e.data.message,icon:"success",confirmButtonText:"OK"}).then((e=>{O([...M,Xt]),Ut(x,fe),e.isConfirmed&&($t(),es())})))}catch(s){console.error("Error posting form data:",s)}}},children:"Save"})]})]})]})}),(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:(0,D.jsx)(m.Z,{type:"button",className:"tabAddButton",onClick:()=>{H(!0),Jt(ts)},children:"+ Add Usage"})})]}),(0,D.jsxs)(T,{onClose:q,"aria-labelledby":"customized-dialog-title",open:U,fullWidth:!0,children:[(0,D.jsxs)(g.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,D.jsx)(b.Z,{icon:"fluent:calendar-data-bar-24-regular",width:"25px",height:"25px",style:{fontSize:"24px",marginRight:"5px"}}),(0,D.jsx)("div",{children:"Update Usage"})," "]}),(0,D.jsx)(y.Z,{"aria-label":"close",onClick:q,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,D.jsx)(b.Z,{icon:"material-symbols:close"})}),(0,D.jsx)(j.Z,{dividers:!0,children:(0,D.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,D.jsx)("div",{className:"row",children:(0,D.jsx)("div",{className:"col-sm-12 WrkOdrMtb",children:(0,D.jsx)("div",{className:"row my-3 tb",children:(0,D.jsxs)(v.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_id")||"Requiredlabel",children:[" ",Yt("ast_ls2_meter_id")||"Meter ID:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:$e,disabled:!0})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_usage_uom")||"Requiredlabel",children:[" ",Yt("ast_ls2_usage_uom")||"Usage UOM:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(Z.Z,{options:tt,value:at,onChange:(e,t)=>{lt(t)},disableAnimation:!0,renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(C.Z,{...e,placeholder:"Select...",variant:"outlined",size:"small",className:"Extrasize"})})})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_incr_usage_flag"),children:[" ",Yt("ast_ls2_incr_usage_flag")||"Total Running Meter:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,style:{textAlign:"right"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{checked:"Y"===it,onChange:e=>rt(e.target.checked?"Y":"N")})})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_point"),children:[" ",Yt("ast_ls2_meter_point")||"Meter Point:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:nt,onChange:e=>{const t=e.target.value;t.length<=40&&ot(t)}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_desc"),children:[" ",Yt("ast_ls2_meter_desc")||"Description:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:dt,onChange:e=>{const t=e.target.value;t.length<=80&&ct(t)}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_install_date"),children:[" ",Yt("ast_ls2_meter_install_date")||"Meter Install Date:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(w.x,{value:mt?(ls=mt.date,new Date(ls)):null,format:"dd/MM/yyyy HH:mm",onChange:e=>xt(e),slotProps:{textField:{fullWidth:!0}},className:"Extrasize"})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_usage_date"),children:[" ",Yt("ast_ls2_usage_date")||"Usage Date:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:ut?(e=>new Date(e).toLocaleString("en-GB",{timeZone:"UTC",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))(ut.date):null})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_usage_reading"),children:[" ",Yt("ast_ls2_usage_reading")||"Usage Reading:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:_t,onChange:e=>{ht(e.target.value)}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_avg_usage"),children:[" ",Yt("ast_ls2_avg_usage")||"Average Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:gt,onChange:e=>{jt(e.target.value)}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_old_ltd_usage"),children:[" ",Yt("ast_ls2_old_ltd_usage")||"Meter Installed Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:ft,onChange:e=>ss(e,yt),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_ltd_usage"),children:[" ",Yt("ast_ls2_ltd_usage")||"LTD Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:vt,onChange:e=>{Zt(e.target.value)},InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_max_avg_usage"),children:[" ",Yt("ast_ls2_max_avg_usage")||"Max Average Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:Ct,onChange:e=>ss(e,St),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_warranty_usage"),children:[" ",Yt("ast_ls2_warranty_usage")||"Warranty Usage:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:wt,onChange:e=>ss(e,bt),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_maximum"),children:[" ",Yt("ast_ls2_meter_maximum")||"Meter Maximum:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",type:"text",className:"Extrasize",fullWidth:!0,value:At,onChange:e=>ss(e,Nt),InputProps:{inputProps:{style:{textAlign:"right"}}}})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_alert_ma_flag"),children:[" ",Yt("ast_ls2_alert_ma_flag")||"Alert MA Flag:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,style:{textAlign:"right"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{checked:"Y"===Dt,onChange:e=>Tt(e.target.checked?"Y":"N")})})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_alert_ro_flag"),children:[" ",Yt("ast_ls2_alert_ro_flag")||"Alert RO Flag:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,style:{textAlign:"right"},children:(0,D.jsx)(z.Z,{value:"top",control:(0,D.jsx)(k.Z,{checked:"Y"===It,onChange:e=>Et(e.target.checked?"Y":"N")})})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:4,style:{padding:"10px"},children:(0,D.jsxs)("label",{className:Gt("ast_ls2_meter_install_wo"),children:[" ",Yt("ast_ls2_meter_install_wo")||"Meter Install WO:"]})}),(0,D.jsx)(v.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(C.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,value:kt,onChange:e=>{const t=e.target.value;t.length<=11&&zt(t)}})})]})})})})})}),(0,D.jsxs)(f.Z,{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,D.jsx)(m.Z,{variant:"soft",color:"error",className:"CloseButton",onClick:e=>{e.preventDefault(),q()},startIcon:(0,D.jsx)(b.Z,{icon:"jam:close"}),children:"Close"}),(0,D.jsx)("div",{className:"timeCartSubmit",style:{display:"flex",alignItems:"center"},children:(0,D.jsx)(m.Z,{variant:"contained",className:"SaveButton assetSpares",startIcon:(0,D.jsx)(b.Z,{icon:"mingcute:save-fill"}),style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:async e=>{u().fire({title:"Loading.... !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});var t={site_cd:x,RowID:Rt,auditUser:_,ast_ls2_usage_uom:at,ast_ls2_incr_usage_flag:it,ast_ls2_meter_point:nt.trim(),ast_ls2_meter_desc:dt.trim(),ast_ls2_meter_install_date:mt,ast_ls2_old_ltd_usage:ft.trim(),ast_ls2_max_avg_usage:Ct.trim(),ast_ls2_warranty_usage:wt.trim(),ast_ls2_meter_maximum:At.trim(),ast_ls2_alert_ma_flag:Dt,ast_ls2_alert_ro_flag:It,ast_ls2_meter_install_wo:kt.trim()};console.log("json_UpdateAsset____",t);try{const e=await E.Z.post("/update_asset_usages_tb_data.php",JSON.stringify(t));"SUCCESS"===e.data.status&&(u().close(),u().fire({icon:"success",customClass:{container:"swalcontainercustom"},title:e.data.status,text:e.data.message}).then((e=>{O([...M,Xt]),Ut(x,fe),e.isConfirmed&&q()})))}catch(s){u().close(),u().fire({icon:"error",title:"Oops somthing is wrong...",text:s})}},children:"Save"})})]})]})]});var ls}},2011:(e,t,s)=>{s.d(t,{Z:()=>O});var a=s(72791),l=s(68745),i=s(55261),r=s(4841),n=s(15416),o=s(22041),d=s(9195),c=s(62155),m=s(5849),x=s(19850),u=s(33551),p=s(16386),_=s(59831),h=s(46314),g=s(57689),j=s(18709),f=s(5574),y=s(65661),v=s(4899),Z=s(77386),C=s(90977),S=s(32746),w=s(21830),b=s.n(w),A=s(58086),N=s.n(A),k=s(72426),z=s.n(k),I=(s(73528),s(83064)),E=s(24308),D=s(93006),T=s(40268);const R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAHYAAAB2AH6XKZyAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABV5JREFUeJzt22uMXVMUB/Df1FRbio5qB0FQJQgmlKiIapBGPBpBUeIDIRIiiKQE9QUhkUoRjWcrqYioeiZUCUk9QkjjEZQqqilafXr0pa0P61z39M7MnTln7rm9Lv/kZp+zcvZe+/zP3ns99r78j/82Wuqk5xxcgKF10tcdtmIRpuJL6kPAA7gGn2MBttRBZ3cYiGMxBBPwctEKTxWsX1fjdgegLfkNTGQDU7IBiWxQSrZjSvYKfsHgGverE+7HkgLa/U4QuxXLsQOWpWTfCxLWpGSfp+ofk8hOay2gc2nsiqUFtDscM7EOV6AVw/CYGAnnJuWueBB7YkyqfumjDCmagCJxJP6qkB0tyEjjOFWG+r+VgGk4KnW9AQ/h4EQ2F2vxBPZLrmd31VDRVmCG+FKnFKwnK4YJizSh6BHQIb7UyoL15MVBRRPwtZh/NxesJyt2w6P4vi8E7IVRyna4KwzvQ/u9xQbMx48Z6rQnZeUi2mtMwnplG7u9f5twh96vae1JvfPzjICLcDfuFcNoeZVnW4STkpvpXqANl2Ky8DkeylI5jxWYj59xeo663WE4pii7q7PxDu5B/0T2lPDm7hCkwuOYk6ozVnycSryND1L37eIdclmB/fF8jnrV0IGL8R4OEf76JkzEPBwhRlEbLsRbIqhZpUzAYhHkTKpoe3Dy/LiuFPfL0dl+ihvSz+i8mM0UgUsaM7CiQvZVUrZj99TvFeUR0wmN4gmuEIvS1OR+Pn5Nrh9OyjnK682TSVlt/ekVGoWAj4VZ3Tm5XyxG2d5iOhAR3hbsIyK9rfihr4rzEDBAWIKOviqvMUbkqZSHgBblREMjYac8lfIQsF5EWXflUVggrhKRYSakCTgDt2Gk6v7BLrgVN2ZVlgGl8HUyfi9Qzz8EXC6yKfNEEnNdlTqHiYzK2gL7NQJXiizOaGwsSlGrcBTuE7b1MrG61gK7C8+sn5g2r4sU1Rgxwv5MZHvgxKTObyKZsVm42e/hBmVTWMJmNfwAJ4iXPqFWDSaYYtuAZSIeqZCdjacrZGNTbSzTfQB0XoW+qxJ5/wr5bLxRIfsnGOqnHM6uzv6OVTEQ3+Dw5H5QIvtEuLFp2bs4OSUrYVHy/ISK31bhN/QZRTpCW3CgeLnS/RZByNwK2XF4MSUrYZVwiJ6taPuZWnWySAKmiTndIpIWLwsX96dEtk4QsViMFGLFf6fAPnVCq7LJGy1cz1rizdR1RxeyUUmZnqPHp66Hqv3U3AatwrcmzGAjos/+fjW0Koef47CwSGU5MF2dHCHCuVlUpLIc+FPBu8mNEg7XAgck5QLbOnPteL+7Ss1EQGnzZZbOo2aublCNgPEiT1cvrMTVws3NgzVJeYvIJ/YK1QiYiNPwUc4OZcEwsYV2p2wbHHlR8jY39TQFPhUkFI3xeKEOeko4W3JoopnWgNK7nKL7rHV/nITrRbS5sJkIODQpX+3hufUi+3w7zWUFPkvKQ1Tft1gqSEBzEVDCdzJYgTw7Q02FRh8Bu+l6v69maHQC2rGvzgSsUN4L7BManYCv8QXOKkpBM60BpcROpqx2MxFwqJgambbum4WAM8WR2SeyVmz0NeBAkbL7tsozQ8QmzGsS7y4LGp2A1eJ0x6wqz2zCh+IkSOZdrUYnYKXYHbqpKAXNsgbkRk8joFV9DkLs3PMjxaAaARvFhmk9DzpvqKMuVCfgZrxUr44IG76sjvpQnYAlOm9KNh1KhxcIe9poaJNKXhSFwSKlPF39/kjZGxwrbPy1RSopvfBl4uDxPLF7WzjrPeAAXCJC3tEyZHiyIv3FTxenskba/v7BGjwnXNs/tnNf/kdT428K5Txt1BWNDQAAAABJRU5ErkJggg==";var W=s(80184);const M=N()(b()),O=e=>{let{data:t,onDataFromSecondComponent:s}=e,w=localStorage.getItem("site_ID");const A=localStorage.getItem("emp_mst_empl_id"),{RowID:N}=t,{Asset_No:k}=t,{WorkOrderNo:O}=t,P=(0,g.TH)(),[B,F]=a.useState([]),[H,U]=a.useState([]),[L,q]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(!1),G=()=>{q(!1)},[K,V]=(0,a.useState)([]),[X,J]=(0,a.useState)([]),[$,ee]=(0,a.useState)([]),[te,se]=(0,a.useState)([]),[ae,le]=(0,a.useState)(new Date),[ie,re]=(0,a.useState)(new Date),[ne,oe]=(0,a.useState)([]),[de,ce]=(0,a.useState)([]),[me,xe]=(0,a.useState)("0"),[ue,pe]=(0,a.useState)([]),[_e,he]=(0,a.useState)([]),[ge,je]=(0,a.useState)([]),[fe,ye]=(0,a.useState)([]),[ve,Ze]=(0,a.useState)([]),[Ce,Se]=(0,a.useState)([]),[we,be]=(0,a.useState)([]),[Ae,Ne]=(0,a.useState)([]),[ke,ze]=(0,a.useState)([]),[Ie,Ee]=(0,a.useState)(""),[De,Te]=(0,a.useState)(""),[Re,We]=(0,a.useState)(""),[Me,Oe]=(0,a.useState)(""),[Pe,Be]=(0,a.useState)(""),[Fe,He]=(0,a.useState)(""),[Ue,Le]=(0,a.useState)(""),[qe,Qe]=(0,a.useState)(""),[Ye,Ge]=(0,a.useState)(!1),Ke=async(e,t)=>{try{const t=await j.Z.get("/get_assetwohistory.php?site_cd=".concat(e,"&wko_mst_assetno=").concat(k,"&wrk_sts_typ_cd='Open'"));console.log("response_____setupHistory",t),"SUCCESS"===t.data.status?(F(t.data.data.header),U(t.data.data)):b().fire({icon:"error",title:"Oops...",text:t.data.message})}catch(s){console.error("Error fetching data:",s),b().fire({icon:"error",title:"Oops get_sitecode...",text:s})}};(0,a.useEffect)((()=>{let e=localStorage.getItem("site_ID");Ke(e),Ve(e,"All")}),[P]);const Ve=async(e,t)=>{b().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),b().showLoading();try{const s=await j.Z.get("get_dropdown.php?site_cd=".concat(e,"&type=").concat(t));if("SUCCESS"===s.data.status){let e=s.data.data.Employee_Supervisor_Id.map((e=>({label:e.emp_mst_empl_id+" : "+e.emp_mst_name,value:e.emp_mst_empl_id})));V(e);s.data.data.Employee_Primary_Craft.map((e=>({label:e.crf_mst_crf_cd+" : "+e.crf_mst_desc,value:e.crf_mst_crf_cd})));let t=s.data.data.HoursType.map((e=>({label:e.hours_type_cd,value:e.hours_type_cd})));oe(t);let a=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));pe(a);let l=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));je(l);let i=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));Ze(i);let r=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));Ne(r),b().close()}else b().close(),b().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){b().close(),b().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},Xe=async()=>{if(""==X||null==X)M.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Employee ID is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==te||null==te)M.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Craft is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==ae||null==ae)M.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==ie||null==ie)M.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field End Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==de||null==de)M.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Hour Type is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else{let a;if(de&&0!==de.length&&de.label){a=de.label.split(":")[0].trim()}else a="";let l="";l=""==ae||null==ae?"":z()(ae).format("yyyy-MM-DD HH:mm:ss").trim();let i="";i=""==ie||null==ie?"":z()(ie).format("yyyy-MM-DD HH:mm:ss").trim();var e={site_cd:w,wko_mst_wo_no:O,mst_RowID:N,assetno:k,selectedEmployeeID:X.value,selectedCraft:te&&"object"===typeof te?te.value:te,TimeCardDate:l,EndTimeCardDate:i,selected_HourType:a,ActualHour:me,Rate:Me,Multiplier:Pe,Adder:Fe,ActualCost:Ue,selected_ChargeCostCenter:_e.value,selected_ChargeAccount:fe.value,selected_CreditCostCenter:Ce.value,selected_CreditAccount:ke.value,auditUser:A};try{"SUCCESS"==(await j.Z.post("/insert_time_card.php",JSON.stringify(e))).data.status&&(G(),Ke(),ye(""),he(""),se(""),ze(""),Se(""),J(""),ce(""),xe(""),s("SubmitFrom"))}catch(t){b().fire({icon:"error",title:"Oops get_sitecode...",text:t})}}},Je=H.map((e=>({title:(0,p.Z)((0,_.Z)(e.wko_mst_org_date.date),"dd-MMM-yy"),cardTitle:"Work Order No: "+e.wko_mst_wo_no,url:"",cardSubtitle:"Status: "+e.wko_mst_status,cardDetailedText:"Des: "+e.wko_mst_descs||0})));return console.log("Result____",H),(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("div",{children:(0,W.jsx)("div",{className:"card",children:(0,W.jsxs)("div",{className:"card-body",style:{borderRadius:"8px",boxShadow:"2px 2px 15px 2px #f0f0f0",paddingBottom:"10px"},children:[(0,W.jsx)("div",{children:(0,W.jsx)("div",{style:{backgroundColor:"white"},children:(0,W.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,W.jsx)("div",{style:{marginRight:"10px"},children:(0,W.jsx)("img",{src:R,style:{width:"50px",height:"50px"}})}),(0,W.jsxs)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:[(0,W.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"WO History"}),(0,W.jsxs)("div",{className:"TimeCartPartCosting",children:[(0,W.jsx)("span",{style:{color:"blue"}})," ",(0,W.jsx)("span",{style:{color:"#19d895"}})]})]})]})})}),(0,W.jsxs)("div",{className:"table-responsive",children:[(0,W.jsxs)("div",{style:{width:"800px",height:"100vh"},children:[console.log("items_____",Je),H.length>0&&(0,W.jsx)(I.k,{items:Je,mode:"VERTICAL"})]}),(0,W.jsx)(i.Z,{component:r.Z,children:(0,W.jsxs)(n.Z,{children:[(0,W.jsx)(o.Z,{children:(0,W.jsx)(d.Z,{children:(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(l.Z,{},"select")})})}),(0,W.jsx)(c.Z,{children:void 0})]})})]}),(0,W.jsx)("div",{children:(0,W.jsxs)(f.Z,{onClose:G,"aria-labelledby":"customized-dialog-title",open:L,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,W.jsxs)(y.Z,{sx:{m:0,p:2},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,W.jsx)("img",{src:R,style:{width:"30px",height:"30px",marginRight:"2px"}}),"WO History"]}),(0,W.jsx)(C.Z,{"aria-label":"close",onClick:G,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,W.jsx)(T.Z,{icon:"material-symbols:close"})}),(0,W.jsx)(v.Z,{dividers:!0,children:(0,W.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,W.jsxs)(E.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Employee ID:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:K,value:X,onChange:(e,t)=>(async(e,t)=>{let s=localStorage.getItem("site_ID");J(t);const a=t?t.label.split(" : "):[],l=a.length>0?a[0]:"";if(""!==l&&null!=l)try{const e=await j.Z.get("get_time_cart_reate_craft.php?site_cd=".concat(s,"&empId=").concat(l));if(e.data.data.result.length>0){let t=e.data.data.result.map((e=>({label:e.emp_ls1_craft+" : "+e.crf_mst_desc,value:e.emp_ls1_craft,rate:e.emp_ls1_charge_rate})));ee(t),se(e.data.data.result[0].emp_ls1_craft),Oe(e.data.data.result[0].emp_ls1_charge_rate)}}catch(i){b().close(),b().fire({icon:"error",title:"Oops get_sitecode...",text:i})}})(0,t),renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Craft:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:$,value:te,onChange:(e,t)=>{se(t||null),Oe(t?t.rate:null)},renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Time Card Date:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(S.x,{value:ae,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{le(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Time Card End Date:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(S.x,{value:ie,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{re(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Hour Type:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:ne,value:de,onChange:(e,t)=>(async(e,t)=>{ce(t);const s=t?t.label.split(" : "):[],a=s.length>0?s[0]:"";if(""!==a&&null!=a)try{const e=await j.Z.get("TimeCartHourTypeGet.php?site_cd=".concat(w,"&hourstype=").concat(a));if(e.data.data.result.length>0){He(e.data.data.result[0].hours_type_adder),Be(e.data.data.result[0].hours_type_multiplier);const t=new Date(ae),s=new Date(ie),a=(0,x.Z)(s,t),l=((0,u.Z)(s,t),Math.floor(a/36e5)),i=(Math.floor(a/6e4),Math.floor(a/6e4)),r=Math.floor(i/60),n=(parseFloat(l),parseFloat(Me)),o=parseFloat(e.data.data.result[0].hours_type_adder),d=parseFloat(e.data.data.result[0].hours_type_multiplier);Le(r*(n+o)*d),xe(l)}}catch(l){b().fire({icon:"error",title:"Oops get_sitecode...",text:l})}})(0,t),renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Actual Hour:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(D.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:me,onChange:e=>{xe(e.target.value)}})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Charge Cost Center:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:ue,value:_e,onChange:(e,t)=>{he(t||null)},renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Charge Account:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:ge,value:fe,onChange:(e,t)=>{ye(t||null)},renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Credit Cost Center:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:ve,value:Ce,onChange:(e,t)=>{Se(t||null)},renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:4,children:(0,W.jsx)("label",{children:"Credit Account:"})}),(0,W.jsx)(E.Z,{item:!0,xs:12,md:8,children:(0,W.jsx)(h.Z,{options:Ae,value:ke,onChange:(e,t)=>{ze(t||null)},renderInput:e=>(0,W.jsx)("div",{children:(0,W.jsx)(D.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})})]})})}),(0,W.jsx)(Z.Z,{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},children:(0,W.jsx)("div",{className:"timeCartSubmit",children:(0,W.jsx)(m.Z,{variant:"contained",color:"primary",type:"button",onClick:e=>{e.preventDefault(),Xe()},children:"Submit"})})})]})}),(0,W.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"}})]})})})})}},32129:(e,t,s)=>{s.d(t,{Z:()=>R});var a=s(72791),l=s(68745),i=s(9195),r=s(55261),n=s(4841),o=s(15416),d=s(22041),c=s(62155),m=s(5849),x=s(19850),u=s(33551),p=s(46314),_=s(57689),h=s(18709),g=s(5574),j=s(65661),f=s(4899),y=s(77386),v=s(90977),Z=s(32746),C=s(21830),S=s.n(C),w=s(58086),b=s.n(w),A=s(72426),N=s.n(A),k=(s(73528),s(24308)),z=s(93006),I=s(40268);const E="data:image/png;base64,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";var D=s(80184);const T=b()(S()),R=e=>{let{data:t,onDataFromSecondComponent:s}=e,C=localStorage.getItem("site_ID");const w=localStorage.getItem("emp_mst_empl_id"),{RowID:b}=t,{Asset_No:A}=t,{WorkOrderNo:R}=t,W=(0,_.TH)(),[M,O]=a.useState([]),[P,B]=a.useState([]),[F,H]=(0,a.useState)(!1),[U,L]=(0,a.useState)(!1),q=()=>{H(!1)},[Q,Y]=(0,a.useState)([]),[G,K]=(0,a.useState)([]),[V,X]=(0,a.useState)([]),[J,$]=(0,a.useState)([]),[ee,te]=(0,a.useState)(new Date),[se,ae]=(0,a.useState)(new Date),[le,ie]=(0,a.useState)([]),[re,ne]=(0,a.useState)([]),[oe,de]=(0,a.useState)("0"),[ce,me]=(0,a.useState)([]),[xe,ue]=(0,a.useState)([]),[pe,_e]=(0,a.useState)([]),[he,ge]=(0,a.useState)([]),[je,fe]=(0,a.useState)([]),[ye,ve]=(0,a.useState)([]),[Ze,Ce]=(0,a.useState)([]),[Se,we]=(0,a.useState)([]),[be,Ae]=(0,a.useState)([]),[Ne,ke]=(0,a.useState)(""),[ze,Ie]=(0,a.useState)(""),[Ee,De]=(0,a.useState)(""),[Te,Re]=(0,a.useState)(""),[We,Me]=(0,a.useState)(""),[Oe,Pe]=(0,a.useState)(""),[Be,Fe]=(0,a.useState)(""),[He,Ue]=(0,a.useState)(""),[Le,qe]=(0,a.useState)(!1),Qe=async(e,t)=>{try{const s=await h.Z.get("/get_assetpmsetup.php?site_cd=".concat(e,"&RowID=").concat(t,"&wko_mst_assetno=").concat(A));"SUCCESS"===s.data.status?(O(s.data.data.header),B(s.data.data.result)):S().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){console.error("Error fetching data:",s),S().fire({icon:"error",title:"Oops get_sitecode...",text:s})}};(0,a.useEffect)((()=>{let e=localStorage.getItem("site_ID");Qe(e,b),Ye(e,"All")}),[W]);const Ye=async(e,t)=>{S().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),S().showLoading();try{const s=await h.Z.get("get_dropdown.php?site_cd=".concat(e,"&type=").concat(t));if("SUCCESS"===s.data.status){let e=s.data.data.Employee_Supervisor_Id.map((e=>({label:e.emp_mst_empl_id+" : "+e.emp_mst_name,value:e.emp_mst_empl_id})));Y(e);s.data.data.Employee_Primary_Craft.map((e=>({label:e.crf_mst_crf_cd+" : "+e.crf_mst_desc,value:e.crf_mst_crf_cd})));let t=s.data.data.HoursType.map((e=>({label:e.hours_type_cd,value:e.hours_type_cd})));ie(t);let a=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));me(a);let l=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));_e(l);let i=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));fe(i);let r=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));we(r),S().close()}else S().close(),S().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){S().close(),S().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},Ge=e=>{const t=new Date(e.date),s=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear(),i=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0"),n=t.getSeconds().toString().padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(l," ").concat(i,":").concat(r,":").concat(n)},Ke=P.reduce(((e,t)=>e+(parseFloat(t.wko_ls8_hrs)||0)),0),Ve=P.reduce(((e,t)=>e+(parseFloat(t.wko_ls8_hrs)||0)*(parseFloat(t.wko_ls8_act_cost)||0)),0),Xe=async()=>{if(""==G||null==G)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Employee ID is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==J||null==J)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Craft is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==ee||null==ee)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==se||null==se)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field End Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==re||null==re)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Hour Type is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else{let a;if(re&&0!==re.length&&re.label){a=re.label.split(":")[0].trim()}else a="";let l="";l=""==ee||null==ee?"":N()(ee).format("yyyy-MM-DD HH:mm:ss").trim();let i="";i=""==se||null==se?"":N()(se).format("yyyy-MM-DD HH:mm:ss").trim();var e={site_cd:C,wko_mst_wo_no:R,mst_RowID:b,assetno:A,selectedEmployeeID:G.value,selectedCraft:J&&"object"===typeof J?J.value:J,TimeCardDate:l,EndTimeCardDate:i,selected_HourType:a,ActualHour:oe,Rate:Te,Multiplier:We,Adder:Oe,ActualCost:Be,selected_ChargeCostCenter:xe.value,selected_ChargeAccount:he.value,selected_CreditCostCenter:ye.value,selected_CreditAccount:be.value,auditUser:w};try{"SUCCESS"==(await h.Z.post("/insert_time_card.php",JSON.stringify(e))).data.status&&(q(),Qe(),ge(""),ue(""),$(""),Ae(""),ve(""),K(""),ne(""),de(""),s("SubmitFrom"))}catch(t){S().fire({icon:"error",title:"Oops get_sitecode...",text:t})}}};return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{children:(0,D.jsx)("div",{className:"card",children:(0,D.jsxs)("div",{className:"card-body",style:{borderRadius:"8px",boxShadow:"2px 2px 15px 2px #f0f0f0",paddingBottom:"10px"},children:[(0,D.jsx)("div",{children:(0,D.jsx)("div",{style:{backgroundColor:"white"},children:(0,D.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)("div",{style:{marginRight:"10px"},children:(0,D.jsx)("img",{src:E,style:{width:"50px",height:"50px"}})}),(0,D.jsxs)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:[(0,D.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"PM Setup"}),(0,D.jsxs)("div",{className:"TimeCartPartCosting",children:[(0,D.jsx)("span",{style:{color:"blue"},children:(1*Ke).toFixed(2)})," ","Total Parts Costing"," ",(0,D.jsxs)("span",{style:{color:"#19d895"},children:["$",Ve.toFixed(2)]})]})]})]})})}),(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsx)(r.Z,{component:n.Z,children:(0,D.jsxs)(o.Z,{children:[(0,D.jsx)(d.Z,{children:(0,D.jsx)(i.Z,{children:(()=>{const e={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(l.Z,{},"select"),Object.keys(M).map((t=>(0,D.jsx)(l.Z,{style:e,children:t.toUpperCase()},t)))]})})()})}),(0,D.jsx)(c.Z,{children:P.map(((e,t)=>(0,D.jsxs)(i.Z,{children:[(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:t+1}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_pm_no}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_curr_wo}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_freq_code}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_desc}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_meter_id}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_lpm_usg}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.prm_mst_lpm_uom}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:Ge(e.prm_mst_next_create)})]},t)))})]})})}),(0,D.jsx)("div",{children:(0,D.jsxs)(g.Z,{onClose:q,"aria-labelledby":"customized-dialog-title",open:F,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,D.jsxs)(j.Z,{sx:{m:0,p:2},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,D.jsx)("img",{src:E,style:{width:"30px",height:"30px",marginRight:"2px"}}),"PM Setup"]}),(0,D.jsx)(v.Z,{"aria-label":"close",onClick:q,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,D.jsx)(I.Z,{icon:"material-symbols:close"})}),(0,D.jsx)(f.Z,{dividers:!0,children:(0,D.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,D.jsxs)(k.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Employee ID:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:Q,value:G,onChange:(e,t)=>(async(e,t)=>{let s=localStorage.getItem("site_ID");K(t);const a=t?t.label.split(" : "):[],l=a.length>0?a[0]:"";if(""!==l&&null!=l)try{const e=await h.Z.get("get_time_cart_reate_craft.php?site_cd=".concat(s,"&empId=").concat(l));if(e.data.data.result.length>0){let t=e.data.data.result.map((e=>({label:e.emp_ls1_craft+" : "+e.crf_mst_desc,value:e.emp_ls1_craft,rate:e.emp_ls1_charge_rate})));X(t),$(e.data.data.result[0].emp_ls1_craft),Re(e.data.data.result[0].emp_ls1_charge_rate)}}catch(i){S().close(),S().fire({icon:"error",title:"Oops get_sitecode...",text:i})}})(0,t),renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Craft:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:V,value:J,onChange:(e,t)=>{$(t||null),Re(t?t.rate:null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Time Card Date:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(Z.x,{value:ee,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{te(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Time Card End Date:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(Z.x,{value:se,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{ae(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Hour Type:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:le,value:re,onChange:(e,t)=>(async(e,t)=>{ne(t);const s=t?t.label.split(" : "):[],a=s.length>0?s[0]:"";if(""!==a&&null!=a)try{const e=await h.Z.get("TimeCartHourTypeGet.php?site_cd=".concat(C,"&hourstype=").concat(a));if(e.data.data.result.length>0){Pe(e.data.data.result[0].hours_type_adder),Me(e.data.data.result[0].hours_type_multiplier);const t=new Date(ee),s=new Date(se),a=(0,x.Z)(s,t),l=((0,u.Z)(s,t),Math.floor(a/36e5)),i=(Math.floor(a/6e4),Math.floor(a/6e4)),r=Math.floor(i/60),n=(parseFloat(l),parseFloat(Te)),o=parseFloat(e.data.data.result[0].hours_type_adder),d=parseFloat(e.data.data.result[0].hours_type_multiplier);Fe(r*(n+o)*d),de(l)}}catch(l){S().fire({icon:"error",title:"Oops get_sitecode...",text:l})}})(0,t),renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Actual Hour:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:oe,onChange:e=>{de(e.target.value)}})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Charge Cost Center:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:ce,value:xe,onChange:(e,t)=>{ue(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Charge Account:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:pe,value:he,onChange:(e,t)=>{ge(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Credit Cost Center:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:je,value:ye,onChange:(e,t)=>{ve(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Credit Account:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:Se,value:be,onChange:(e,t)=>{Ae(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})})]})})}),(0,D.jsx)(y.Z,{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},children:(0,D.jsx)("div",{className:"timeCartSubmit",children:(0,D.jsx)(m.Z,{variant:"contained",color:"primary",type:"button",onClick:e=>{e.preventDefault(),Xe()},children:"Submit"})})})]})}),(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"}})]})})})})}},7584:(e,t,s)=>{s.d(t,{Z:()=>R});var a=s(72791),l=s(68745),i=s(9195),r=s(55261),n=s(4841),o=s(15416),d=s(22041),c=s(62155),m=s(5849),x=s(19850),u=s(33551),p=s(46314),_=s(57689),h=s(18709),g=s(5574),j=s(65661),f=s(4899),y=s(77386),v=s(90977),Z=s(32746),C=s(21830),S=s.n(C),w=s(58086),b=s.n(w),A=s(72426),N=s.n(A),k=(s(73528),s(24308)),z=s(93006),I=s(40268),E=s(42078),D=s(80184);const T=b()(S()),R=e=>{let{data:t,onDataFromSecondComponent:s}=e,C=localStorage.getItem("site_ID");const w=localStorage.getItem("emp_mst_empl_id"),{RowID:b}=t,{Asset_No:A}=t,{WorkOrderNo:R}=t;console.log("RowID___",b),console.log("Asset_No____",A);const W=(0,_.TH)(),[M,O]=a.useState([]),[P,B]=a.useState([]),[F,H]=(0,a.useState)(!1),[U,L]=(0,a.useState)(!1),q=()=>{H(!1)},[Q,Y]=(0,a.useState)([]),[G,K]=(0,a.useState)([]),[V,X]=(0,a.useState)([]),[J,$]=(0,a.useState)([]),[ee,te]=(0,a.useState)(new Date),[se,ae]=(0,a.useState)(new Date),[le,ie]=(0,a.useState)([]),[re,ne]=(0,a.useState)([]),[oe,de]=(0,a.useState)("0"),[ce,me]=(0,a.useState)([]),[xe,ue]=(0,a.useState)([]),[pe,_e]=(0,a.useState)([]),[he,ge]=(0,a.useState)([]),[je,fe]=(0,a.useState)([]),[ye,ve]=(0,a.useState)([]),[Ze,Ce]=(0,a.useState)([]),[Se,we]=(0,a.useState)([]),[be,Ae]=(0,a.useState)([]),[Ne,ke]=(0,a.useState)(""),[ze,Ie]=(0,a.useState)(""),[Ee,De]=(0,a.useState)(""),[Te,Re]=(0,a.useState)(""),[We,Me]=(0,a.useState)(""),[Oe,Pe]=(0,a.useState)(""),[Be,Fe]=(0,a.useState)(""),[He,Ue]=(0,a.useState)(""),[Le,qe]=(0,a.useState)(!1),Qe=async(e,t)=>{try{const t=await h.Z.get("/get_assetrelocationhistory.php?site_cd=".concat(e,"&Asset_No=").concat(A));console.log("response_____setup",t),"SUCCESS"===t.data.status?(O(["add","sss"]),B(t.data.data.result)):S().fire({icon:"error",title:"Oops...",text:t.data.message})}catch(s){console.error("Error fetching data:",s),S().fire({icon:"error",title:"Oops get_sitecode...",text:s})}};(0,a.useEffect)((()=>{let e=localStorage.getItem("site_ID");Qe(e),Ye(e,"All")}),[W]);const Ye=async(e,t)=>{S().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),S().showLoading();try{const s=await h.Z.get("get_dropdown.php?site_cd=".concat(e,"&type=").concat(t));if("SUCCESS"===s.data.status){let e=s.data.data.Employee_Supervisor_Id.map((e=>({label:e.emp_mst_empl_id+" : "+e.emp_mst_name,value:e.emp_mst_empl_id})));Y(e);s.data.data.Employee_Primary_Craft.map((e=>({label:e.crf_mst_crf_cd+" : "+e.crf_mst_desc,value:e.crf_mst_crf_cd})));let t=s.data.data.HoursType.map((e=>({label:e.hours_type_cd,value:e.hours_type_cd})));ie(t);let a=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));me(a);let l=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));_e(l);let i=s.data.data.CostCenter.map((e=>({label:e.costcenter+" : "+e.descs,value:e.costcenter})));fe(i);let r=s.data.data.account.map((e=>({label:e.account+" : "+e.descs,value:e.account})));we(r),S().close()}else S().close(),S().fire({icon:"error",title:"Oops...",text:s.data.message})}catch(s){S().close(),S().fire({icon:"error",title:"Oops get_sitecode...",text:s})}},Ge=e=>{if(e&&e.date){const t=new Date(e.date),s=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear(),i=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(l," ").concat(i,":").concat(r)}},Ke=P.reduce(((e,t)=>e+(parseFloat(t.wko_ls8_hrs)||0)),0),Ve=P.reduce(((e,t)=>e+(parseFloat(t.wko_ls8_hrs)||0)*(parseFloat(t.wko_ls8_act_cost)||0)),0),Xe=async()=>{if(""==G||null==G)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Employee ID is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==J||null==J)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Craft is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==ee||null==ee)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==se||null==se)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field End Time Card Date is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else if(""==re||null==re)T.fire({position:"top",customClass:{popup:"top-center",container:"swalcontainercustom TimeCard"},html:'<div style="display: block; color: #b71d18c7; font-size: 15px; font-weight: 600; line-height: 26px;">Please fill the required field Hour Type is required </div>',showConfirmButton:!1,timer:4e3,backdrop:!1});else{let a;if(re&&0!==re.length&&re.label){a=re.label.split(":")[0].trim()}else a="";let l="";l=""==ee||null==ee?"":N()(ee).format("yyyy-MM-DD HH:mm:ss").trim();let i="";i=""==se||null==se?"":N()(se).format("yyyy-MM-DD HH:mm:ss").trim();var e={site_cd:C,wko_mst_wo_no:R,mst_RowID:b,assetno:A,selectedEmployeeID:G.value,selectedCraft:J&&"object"===typeof J?J.value:J,TimeCardDate:l,EndTimeCardDate:i,selected_HourType:a,ActualHour:oe,Rate:Te,Multiplier:We,Adder:Oe,ActualCost:Be,selected_ChargeCostCenter:xe.value,selected_ChargeAccount:he.value,selected_CreditCostCenter:ye.value,selected_CreditAccount:be.value,auditUser:w};try{"SUCCESS"==(await h.Z.post("/insert_time_card.php",JSON.stringify(e))).data.status&&(q(),Qe(),ge(""),ue(""),$(""),Ae(""),ve(""),K(""),ne(""),de(""),s("SubmitFrom"))}catch(t){S().fire({icon:"error",title:"Oops get_sitecode...",text:t})}}};return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{children:(0,D.jsx)("div",{className:"card",children:(0,D.jsxs)("div",{className:"card-body",style:{borderRadius:"8px",boxShadow:"2px 2px 15px 2px #f0f0f0",paddingBottom:"10px"},children:[(0,D.jsx)("div",{children:(0,D.jsx)("div",{style:{backgroundColor:"white"},children:(0,D.jsxs)("div",{className:"template-demo",style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)("div",{style:{marginRight:"10px"},children:(0,D.jsx)("img",{src:E,style:{width:"50px",height:"50px"}})}),(0,D.jsxs)("div",{className:"template-demo",style:{display:"flex",flexDirection:"column"},children:[(0,D.jsx)("div",{style:{marginRight:"10px",fontWeight:"bold"},children:"Relocation History"}),(0,D.jsxs)("div",{className:"TimeCartPartCosting",children:[(0,D.jsx)("span",{style:{color:"blue"},children:(1*Ke).toFixed(2)})," ","Total Parts Costing"," ",(0,D.jsxs)("span",{style:{color:"#19d895"},children:["$",Ve.toFixed(2)]})]})]})]})})}),(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsx)(r.Z,{component:n.Z,children:(0,D.jsxs)(o.Z,{children:[(0,D.jsx)(d.Z,{children:(0,D.jsx)(i.Z,{children:(()=>{const e={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(l.Z,{},"select"),(0,D.jsx)(l.Z,{style:e,children:"Ast Loc S Asset Olocn"}),(0,D.jsx)(l.Z,{style:e,children:"Old Loc Desc"}),(0,D.jsx)(l.Z,{style:e,children:"Ast Loc S Asset Nlocn"}),(0,D.jsx)(l.Z,{style:e,children:"New Loc Desc"}),(0,D.jsx)(l.Z,{style:e,children:"Ast Loc S Asset Reason"}),(0,D.jsx)(l.Z,{style:e,children:"Audit User"}),(0,D.jsx)(l.Z,{style:e,children:"Audit Date"})]})})()})}),(0,D.jsx)(c.Z,{children:P.map(((e,t)=>(0,D.jsxs)(i.Z,{children:[(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:t+1}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_loc_s_asset_olocn}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.old_loc_desc}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_loc_s_asset_nlocn}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.new_loc_desc}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.ast_loc_s_asset_reason}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:e.audit_user}),(0,D.jsx)(l.Z,{style:{padding:"5px",textAlign:"center"},children:Ge(e.audit_date)})]},t)))})]})})}),(0,D.jsx)("div",{children:(0,D.jsxs)(g.Z,{onClose:q,"aria-labelledby":"customized-dialog-title",open:F,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,sx:{width:"50vw",marginLeft:"auto",marginRight:"auto",marginTop:"20px"},children:[(0,D.jsxs)(j.Z,{sx:{m:0,p:2},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,D.jsx)("img",{src:E,style:{width:"30px",height:"30px",marginRight:"2px"}}),"Relocation History"]}),(0,D.jsx)(v.Z,{"aria-label":"close",onClick:q,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,D.jsx)(I.Z,{icon:"material-symbols:close"})}),(0,D.jsx)(f.Z,{dividers:!0,children:(0,D.jsx)("div",{style:{width:"100%",marginTop:"15px"},children:(0,D.jsxs)(k.Z,{container:!0,spacing:1.5,className:"timeCartPopuplabel",children:[(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Employee ID:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:Q,value:G,onChange:(e,t)=>(async(e,t)=>{let s=localStorage.getItem("site_ID");K(t);const a=t?t.label.split(" : "):[],l=a.length>0?a[0]:"";if(""!==l&&null!=l)try{const e=await h.Z.get("get_time_cart_reate_craft.php?site_cd=".concat(s,"&empId=").concat(l));if(e.data.data.result.length>0){let t=e.data.data.result.map((e=>({label:e.emp_ls1_craft+" : "+e.crf_mst_desc,value:e.emp_ls1_craft,rate:e.emp_ls1_charge_rate})));X(t),$(e.data.data.result[0].emp_ls1_craft),Re(e.data.data.result[0].emp_ls1_charge_rate)}}catch(i){S().close(),S().fire({icon:"error",title:"Oops get_sitecode...",text:i})}})(0,t),renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Craft:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:V,value:J,onChange:(e,t)=>{$(t||null),Re(t?t.rate:null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Time Card Date:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(Z.x,{value:ee,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{te(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Time Card End Date:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(Z.x,{value:se,format:"dd/MM/yyyy HH:mm",className:"Extrasize",sx:{fontSize:"0.875rem"},onChange:e=>{ae(e)},slotProps:{textField:{fullWidth:!0}}})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Hour Type:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:le,value:re,onChange:(e,t)=>(async(e,t)=>{ne(t);const s=t?t.label.split(" : "):[],a=s.length>0?s[0]:"";if(""!==a&&null!=a)try{const e=await h.Z.get("TimeCartHourTypeGet.php?site_cd=".concat(C,"&hourstype=").concat(a));if(e.data.data.result.length>0){Pe(e.data.data.result[0].hours_type_adder),Me(e.data.data.result[0].hours_type_multiplier);const t=new Date(ee),s=new Date(se),a=(0,x.Z)(s,t),l=((0,u.Z)(s,t),Math.floor(a/36e5)),i=(Math.floor(a/6e4),Math.floor(a/6e4)),r=Math.floor(i/60),n=(parseFloat(l),parseFloat(Te)),o=parseFloat(e.data.data.result[0].hours_type_adder),d=parseFloat(e.data.data.result[0].hours_type_multiplier);Fe(r*(n+o)*d),de(l)}}catch(l){S().fire({icon:"error",title:"Oops get_sitecode...",text:l})}})(0,t),renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Actual Hour:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(z.Z,{variant:"outlined",size:"small",className:"Extrasize",fullWidth:!0,disabled:!0,value:oe,onChange:e=>{de(e.target.value)}})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Charge Cost Center:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:ce,value:xe,onChange:(e,t)=>{ue(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Charge Account:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:pe,value:he,onChange:(e,t)=>{ge(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Credit Cost Center:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:je,value:ye,onChange:(e,t)=>{ve(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:4,children:(0,D.jsx)("label",{children:"Credit Account:"})}),(0,D.jsx)(k.Z,{item:!0,xs:12,md:8,children:(0,D.jsx)(p.Z,{options:Se,value:be,onChange:(e,t)=>{Ae(t||null)},renderInput:e=>(0,D.jsx)("div",{children:(0,D.jsx)(z.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",className:"Extrasize"})})})})]})})}),(0,D.jsx)(y.Z,{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},children:(0,D.jsx)("div",{className:"timeCartSubmit",children:(0,D.jsx)(m.Z,{variant:"contained",color:"primary",type:"button",onClick:e=>{e.preventDefault(),Xe()},children:"Submit"})})})]})}),(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"}})]})})})})}},6405:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(72791),l=s(21830),i=s.n(l),r=s(15617),n=s.n(r),o=s(18709),d=s(40268),c=s(80184);const m=e=>{let{onRowClick:t}=e,s=localStorage.getItem("site_ID");const[l,r]=(0,a.useState)([]),[m,x]=(0,a.useState)(0),[u,p]=(0,a.useState)(null),[_,h]=(0,a.useState)(0);(0,a.useEffect)((()=>{i().fire({title:"Please Wait !",allowOutsideClick:!1}),i().showLoading(),o.Z.get("/get_stock_no_popup_data.php?site_cd="+s).then((e=>{i().close(),r(e.data.data),x(e.data.data.length)})).catch((e=>{console.log(e)}))}),[]);const g=[{title:"Stock No",field:"itm_mst_stockno",cellStyle:{width:"60px"},render:e=>j(e)},{title:"Description",field:"itm_mst_desc",cellStyle:{width:"350px"},render:e=>e.itm_mst_desc.length>40?"".concat(e.itm_mst_desc.substring(0,40),"..."):e.itm_mst_desc},{title:"Extended Description",field:"itm_mst_ext_desc",cellStyle:{width:"250px"}},{title:"Part No",field:"itm_mst_partno"},{title:"Total OH",field:"itm_mst_ttl_oh"},{title:"Type",field:"itm_mst_type"},{title:"Commodity Code",field:"itm_mst_com_code",cellStyle:{width:"250px"}},{title:"Stock Group",field:"itm_mst_itm_grp",cellStyle:{width:"200px"}}],j=e=>e.itm_mst_stockno===u?(0,c.jsxs)("div",{children:[(0,c.jsx)(d.Z,{icon:"simple-line-icons:check",style:{marginRight:"0px",marginTop:"2px",float:"left",fontSize:"16px",color:"#289e49"}}),e.itm_mst_stockno]}):(0,c.jsx)("div",{children:e.itm_mst_stockno});return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{children:(0,c.jsx)("div",{class:"container Ordertbl",children:(0,c.jsx)(n(),{title:"",data:l,columns:g,options:{search:!0,paging:!0,pageSize:10,pageSizeOptions:!1,overflowY:"auto",paginationPosition:"top",toolbarButtonAlignment:"right",paginationType:"normal",rowStyle:e=>({backgroundColor:e.itm_mst_stockno===u?"#a9ebb9":"#FFF",fontSize:"12px !important"})},onRowClick:(e,s)=>{u&&u===s.itm_mst_stockno&&t(s.itm_mst_stockno,s.itm_mst_desc,1),p(s.itm_mst_stockno),t(s.itm_mst_stockno,s.itm_mst_desc)}})})})})}},76977:(e,t,s)=>{e.exports=s.p+"static/media/Add_Image_icon.8572e93b1eb5ea4880b1.png"},42078:e=>{e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=2378.7e8bc153.chunk.js.map