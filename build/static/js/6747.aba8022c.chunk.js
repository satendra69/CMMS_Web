"use strict";(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[6747],{6747:(e,t,s)=>{s.r(t),s.d(t,{default:()=>me});var l=s(18111),a=s.n(l),r=s(72791),i=s(6907),o=s(57689),n=s(46314),c=s(24308),d=s(88588),h=s(15416),p=s(5849),u=s(97639),m=s(10266),x=s(62155),w=s(82626),_=s(90977),g=s(55261),j=s(9195),y=s(68745),k=s(53767),f=s(56832),v=s(72426),b=s.n(v),Z=s(38072),C=s(19208),S=s(83854),D=s(45363),N=s(62861),R=s(84701),A=s(22459),q=s(60720),O=s(93006),I=s(1382),W=s(40268),L=s(63454),E=s(3352),F=s(73379),P=s(18709),B=s(21830),T=s.n(B),z=s(77196),Q=s(62711),G=s(77512),U=s(5574),M=s(65661),Y=s(4899),V=s(77386),H=s(65639),K=s(25801),J=s(32746),$=s(96927),X=s(66934),ee=(s(87937),s(76948),s(13034)),te=s(80184);function se(e){let{row:t,selected:s,onSelectRow:l,onDeleteRow:a,onEditRow:r,onViewRow:i,onApprove:o,onDisApprove:n}=e;const{wkr_mst_wr_no:c,wkr_mst_wr_descs:d,wkr_mst_wr_status:h,wkr_mst_assetno:m,wkr_mst_chg_costcenter:x,wkr_mst_work_area:g,wkr_mst_assetlocn:k,wkr_mst_location:v,wkr_mst_temp_asset:b,wkr_mst_email_notification:Z,wkr_mst_work_type:C,wkr_mst_work_class:S,wkr_mst_work_group:D,wkr_mst_wo_status:N,wkr_mst_projectid:R,wkr_mst_originator:q,wkr_mst_phone:O,wkr_det_wo:I,wkr_det_approver:L,wkr_appr_date:F,wkr_det_reject_desc:P,wkr_det_reject_by:B,wkr_reject_date:T,wkr_mst_orig_priority:z,wkr_mst_org_date:Q,wkr_mst_due_date:G,wkr_mst_fault_code:U,wkr_mst_create_by:M,wkr_mst_create_date:Y}=t,V=(0,A.k)(),H=(0,f.S)(),K=e=>{if(!e)return"";if(e.startsWith("1900-01-01"))return"";const t=new Date(e),s=t.getDate().toString().padStart(2,"0"),l=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getFullYear(),r=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return"".concat(s,"-").concat(l,"-").concat(a," ").concat(r,":").concat(i)},J=d&&d.length>30?"".concat(d.substring(0,30),"..."):d;return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)(j.Z,{hover:!0,selected:s,children:[(0,te.jsx)(y.Z,{align:"right",children:(0,te.jsx)(_.Z,{color:H.open?"primary":"default",onClick:H.onOpen,children:(0,te.jsx)(W.Z,{icon:"eva:more-vertical-fill"})})}),(0,te.jsx)(y.Z,{children:c}),(0,te.jsx)(y.Z,{children:(0,te.jsx)(u.Z,{title:d,placement:"top",arrow:!0,children:(0,te.jsx)("span",{children:J})})}),(0,te.jsx)(y.Z,{children:"A"===h?(0,te.jsx)("div",{children:(0,te.jsxs)("span",{style:{backgroundColor:"rgb(0 167 111)",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:["Approve (",h,")"]})}):"D"===h?(0,te.jsx)("div",{children:(0,te.jsxs)("span",{style:{backgroundColor:"#FF6258",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:["Disapprove (",h,")"]})}):"W"===h?(0,te.jsx)("div",{children:(0,te.jsxs)("span",{style:{backgroundColor:"#2196F3",color:"white",padding:"2px 7px 6px 7px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold"},children:["Awaiting (",h,")"]})}):null}),(0,te.jsx)(y.Z,{children:m}),(0,te.jsx)(y.Z,{children:x}),(0,te.jsx)(y.Z,{children:g}),(0,te.jsx)(y.Z,{children:k}),(0,te.jsx)(y.Z,{children:v}),(0,te.jsx)(y.Z,{children:(0,te.jsx)(ee.Z,{checked:"1"===b,inputProps:{"aria-label":"disabled checkbox"},color:"primary"})}),(0,te.jsxs)(y.Z,{children:[" ",(0,te.jsx)(ee.Z,{checked:"1"===Z,inputProps:{"aria-label":"disabled checkbox"},color:"primary"})]}),(0,te.jsx)(y.Z,{children:C}),(0,te.jsx)(y.Z,{children:S}),(0,te.jsx)(y.Z,{children:D}),(0,te.jsx)(y.Z,{children:N}),(0,te.jsx)(y.Z,{children:R}),(0,te.jsx)(y.Z,{children:q}),(0,te.jsx)(y.Z,{children:O}),(0,te.jsx)(y.Z,{children:I}),(0,te.jsx)(y.Z,{children:L}),(0,te.jsx)(y.Z,{children:F?K(F.date):""}),(0,te.jsx)(y.Z,{children:P}),(0,te.jsx)(y.Z,{children:B}),(0,te.jsx)(y.Z,{children:T?K(T):""}),(0,te.jsx)(y.Z,{children:z}),(0,te.jsx)(y.Z,{children:K(Q.date)}),(0,te.jsx)(y.Z,{children:K(G.date)}),(0,te.jsx)(y.Z,{children:U}),(0,te.jsx)(y.Z,{children:M}),(0,te.jsx)(y.Z,{children:K(Y.date)})]}),(0,te.jsxs)(f.Z,{open:H.open,onClose:H.onClose,arrow:"right-top",sx:{width:140},children:[(0,te.jsxs)(w.Z,{onClick:()=>{o(),H.onClose()},sx:{color:"green"},children:[(0,te.jsx)(W.Z,{icon:"material-symbols:order-approve"}),"Approve"]}),(0,te.jsxs)(w.Z,{onClick:()=>{n(),H.onClose()},sx:{color:"error.main"},children:[(0,te.jsx)(W.Z,{icon:"fluent:text-change-reject-20-filled"}),"Disapprove"]}),(0,te.jsxs)(w.Z,{onClick:()=>{r(),H.onClose()},children:[(0,te.jsx)(W.Z,{icon:"solar:pen-bold"}),"Edit"]}),(0,te.jsxs)(w.Z,{onClick:()=>{a(),H.onClose()},sx:{color:"error.main"},children:[(0,te.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),(0,te.jsx)(E.Q,{open:V.value,onClose:V.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,te.jsx)(p.Z,{variant:"contained",color:"error",onClick:a,children:"Delete"})})]})}var le=s(64554),ae=s(85771),re=s(4841);function ie(e){let{filters:t,onFilters:s,onResetFilters:l,results:a,...r}=e;return(0,te.jsxs)(k.Z,{spacing:1.5,...r,children:[(0,te.jsxs)(le.Z,{sx:{typography:"body2"},children:[(0,te.jsx)("strong",{children:a}),(0,te.jsx)(le.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,te.jsxs)(k.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!t.stock.length&&(0,te.jsx)(oe,{label:"Stock:",children:t.stock.map((e=>(0,te.jsx)(ae.Z,{label:e,size:"small",onDelete:()=>(e=>{const l=t.stock.filter((t=>t!==e));s("stock",l)})(e)},e)))}),!!t.publish.length&&(0,te.jsx)(oe,{label:"Publish:",children:t.publish.map((e=>(0,te.jsx)(ae.Z,{label:e,size:"small",onDelete:()=>(e=>{const l=t.publish.filter((t=>t!==e));s("publish",l)})(e)},e)))}),(0,te.jsx)(p.Z,{color:"error",onClick:l,startIcon:(0,te.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function oe(e){let{label:t,children:s,sx:l,...a}=e;return(0,te.jsxs)(k.Z,{component:re.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...l},...a,children:[(0,te.jsx)(le.Z,{component:"span",sx:{typography:"subtitle2"},children:t}),(0,te.jsx)(k.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:s})]})}var ne=s(25415),ce=s.n(ne);const de=e=>{let{resultData:t}=e;if(""!==t&&void 0!==t){const e=new(ce().Workbook),s=e.addWorksheet("Word Order");s.columns=[{header:"Work Request No",key:"wkr_mst_wr_no",width:20},{header:"Description",key:"wkr_mst_wr_descs",width:50},{header:"Approval Status",key:"wkr_mst_wr_status",width:15},{header:"Asset No",key:"wkr_mst_assetno",width:15},{header:"Charge Cost Center",key:"wkr_mst_chg_costcenter",width:15},{header:"Work Area",key:"wkr_mst_work_area",width:20},{header:"Asset Location",key:"wkr_mst_assetlocn",width:20},{header:"Level",key:"wkr_mst_location",width:15},{header:"Temporary Asset",key:"wkr_mst_temp_asset",width:20},{header:"Email Notification",key:"wkr_mst_email_notification",width:20},{header:"Work Type",key:"wkr_mst_work_type",width:15},{header:"Work Class",key:"wkr_mst_work_class",width:15},{header:"Work Group",key:"wkr_mst_work_group",width:15},{header:"WR Status",key:"wkr_mst_wo_status",width:18},{header:"Project ID",key:"wkr_mst_projectid",width:20},{header:"Requestor",key:"wkr_mst_originator",width:20},{header:"Phone",key:"wkr_mst_phone",width:20},{header:"Work Order No",key:"wkr_det_wo",width:20},{header:"Approved By",key:"wkr_det_approver",width:20},{header:"Approved Date",key:"wkr_det_appr_date",width:20},{header:"Rejected Description",key:"wkr_det_reject_desc",width:20},{header:"Rejected By",key:"wkr_det_reject_by",width:20},{header:"Rejected Date",key:"wkr_det_reject_date",width:20},{header:"Original Priority",key:"wkr_mst_orig_priority",width:20},{header:"Origination Date",key:"wkr_mst_org_date",width:20},{header:"Due Date",key:"wkr_mst_due_date",width:20},{header:"Fault Code",key:"wkr_mst_fault_code",width:20},{header:"Created By",key:"wkr_mst_create_by",width:20},{header:"Create Date",key:"wkr_mst_create_date",width:20}],t.forEach((e=>{s.addRow(e)}));s.getRow(1);s.getRow(1).eachCell((e=>{e.font={size:12,bold:!0,color:{argb:"FFFFFF"}},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2F5597"}},e.alignment={horizontal:"center",vertical:"center"}})),s.eachRow(((e,t)=>{t>1&&(e.font={size:11,color:{argb:"#000"}},e.alignment={horizontal:"center",vertical:"middle"})})),e.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=document.createElement("a");s.href=window.URL.createObjectURL(t),s.download="WorkRequestReport.xlsx",s.click()}))}return(0,te.jsx)("div",{})},he=(0,X.ZP)(U.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),pe=[{id:"",label:"Action",width:60},{id:"wkr_mst_wr_no",label:"Work Request No",width:165},{id:"wkr_mst_wr_descs",label:"Description",width:220,padding:10},{id:"wkr_mst_wr_status",label:"Approval Status",width:160},{id:"wkr_mst_assetno",label:"Asset No",width:120},{id:"wkr_mst_chg_costcenter",label:"Charge Cost Center",width:180},{id:"wkr_mst_work_area",label:"Work Area",width:120},{id:"wkr_mst_assetlocn",label:"Asset Location",width:145},{id:"wkr_mst_location",label:"Level",width:100},{id:"wkr_mst_temp_asset",label:"Temporary Asset",width:160},{id:"wkr_mst_email_notification",label:"Email Notification",width:170},{id:"wkr_mst_work_type",label:"Work Type",width:120},{id:"wkr_mst_work_class",label:"Work Class",width:125},{id:"wkr_mst_work_group",label:"Work Group",width:125},{id:"wkr_mst_wo_status",label:"Wr Status",width:125},{id:"wkr_mst_projectid",label:"Project Id",width:125},{id:"wkr_mst_originator",label:"Requestor",width:100},{id:"wkr_mst_phone",label:"Phone",width:180},{id:"wkr_det_wo",label:"Work Order No",width:155},{id:"wkr_det_approver",label:"Approved By",width:135},{id:"wkr_det_appr_date",label:"Approved Date",width:145},{id:"wkr_det_reject_date",label:"Rejected Description",width:190},{id:"wkr_det_reject_by",label:"Rejected By",width:145},{id:"wkr_reject_date",label:"Rejected Date",width:150},{id:"wkr_mst_orig_priority",label:"Original Priority",width:160},{id:"wkr_mst_org_date",label:"Origination Date",width:160},{id:"wkr_mst_due_date",label:"Due Date",width:140},{id:"wkr_mst_fault_code",label:"Fault Code",width:140},{id:"wkr_mst_create_by",label:"Created By",width:140},{id:"wkr_mst_create_date",label:"Created Date",width:140}],ue={col1:"",publish:[],stock:[]};function me(){var e,t,s,l;const v=localStorage.getItem("site_ID"),B=localStorage.getItem("emp_mst_empl_id"),X=localStorage.getItem("emp_mst_login_id"),ee=(0,o.TH)(),[le,ae]=(0,r.useState)(null===(e=ee.state)||void 0===e?void 0:e.GaugeDashbordData),re=(null===(t=ee.state)||void 0===t?void 0:t.GaugeDashbordDataSort)||[],[oe,ne]=(0,r.useState)(!0),ce=(0,f.S)(),me=(0,C.tv)(),xe=(0,o.s0)(),we=(0,I.x6)(),_e=(0,q.K$)(),[ge,je]=(0,r.useState)("400px"),[ye,ke]=(0,r.useState)([]),[fe,ve]=(0,r.useState)(),[be,Ze]=(0,r.useState)(ue),[Ce,Se]=(0,r.useState)(""),De=(0,A.k)(),[Ne,Re]=(0,r.useState)(1),Ae=(0,r.useRef)(null),[qe,Oe]=(0,r.useState)(!1),[Ie,We]=(0,r.useState)(""),[Le,Ee]=(0,r.useState)(!1),[Fe,Pe]=(0,r.useState)([]),[Be,Te]=(0,r.useState)([]),[ze,Qe]=(0,r.useState)(!1),[Ge,Ue]=(0,r.useState)(!1),[Me,Ye]=(0,r.useState)(!1),[Ve,He]=(0,r.useState)(!1),[Ke,Je]=(0,r.useState)(""),[$e,Xe]=(0,r.useState)([]),[et,tt]=(0,r.useState)((null===(s=ee.state)||void 0===s?void 0:s.DropListId)||[]),[st,lt]=(0,r.useState)(),[at,rt]=(0,r.useState)(!1),[it,ot]=(0,r.useState)(!1),[nt,ct]=(0,r.useState)(!0),[dt,ht]=(0,r.useState)(!1),[pt,ut]=(0,r.useState)(!1),[mt,xt]=(0,r.useState)(!1),[wt,_t]=(0,r.useState)(!1),[gt,jt]=(0,r.useState)(""),[yt,kt]=(0,r.useState)(""),[ft,vt]=(0,r.useState)(!1),[bt,Zt]=(0,r.useState)([]),[Ct,St]=(0,r.useState)([]),[Dt,Nt]=(0,r.useState)(!1),Rt=()=>Nt(!1),[At,qt]=(0,r.useState)([]),[Ot,It]=(0,r.useState)([]),[Wt,Lt]=(0,r.useState)([]),[Et,Ft]=(0,r.useState)([]),[Pt,Bt]=(0,r.useState)([]),[Tt,zt]=(0,r.useState)([]),[Qt,Gt]=(0,r.useState)(""),[Ut,Mt]=(0,r.useState)(""),[Yt,Vt]=(0,r.useState)(!1),Ht=()=>Vt(!1),[Kt,Jt]=(0,r.useState)(new Date),[$t,Xt]=(0,r.useState)(""),[es,ts]=(0,r.useState)(!1),[ss,ls]=(0,r.useState)([{selectedOption:"",operator:"",logical:"",valuept:"",RowId:"",prompt:"",siteCd:v,queryTypedd:"F"}]),as=(0,r.useCallback)((async()=>{ne(!0);try{const e=await P.Z.get("/get_work_request_master_table_data.php?site_cd=".concat(v,"&page=").concat(Ne));ke(e.data.data.result),ve(e.data.total_count),ne(!1)}catch(e){console.error("Error fetching data:",e)}}),[v,Ne]),rs=async()=>{try{const e=await P.Z.get("/get_workReq_filter_dropdown.php?site_cd=".concat(v,"&auditUser=").concat(X));if(Xe(e.data),""!==et&&null!==et){const t=e.data.find((e=>e.RowID===et));if(t){const e=t.cf_query_title;Je(e)}}}catch(e){console.error("Error fetching data:",e)}},is=(0,r.useCallback)((async()=>{ne(!0);try{const e=await P.Z.post("/get_gauge_dashbord_work_request_data.php?page="+Ne,{rows:le,rowsort:re,site_cd:v,emp_ID:B});"SUCCESS"===e.data.status&&(e.data.data.result.length>0&&(ke(e.data.data.result),ve(e.data.total_count)),ne(!1))}catch(e){console.error("Error fetching data:",e)}}),[v,Ne]),os=(0,r.useCallback)((async()=>{ne(!0);try{const e=await P.Z.post("/getWorkReqOptionListData.php?site_cd=".concat(v,"&ItemID=").concat(yt,"&page=").concat(Ne,"&EmpId=").concat(B));e.data.data&&e.data.data.result&&e.data.data.result.length>0?(ke(e.data.data.result),ve(e.data.DashbrdCount),ne(!1)):(ke(""),ve(""),ne(!1),T().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}),[v,Ne,yt]);(0,r.useEffect)((()=>{""!=yt&&null!=yt?os():""!=bt&&null!=bt?Gs():Array.isArray(le)&&le.length>0?is():as(),rs(),(async()=>{try{const e=await P.Z.post("/getDropdownApprove.php?site_ID=".concat(v));if("SUCCESS"===e.data.status){let t=e.data.data.WorkorderStatus.map((e=>({label:e.wrk_sts_desc,value:e.wrk_sts_status+" : "+e.wrk_sts_desc})));qt(t);let s=e.data.data.WKO_Originator.map((e=>({label:e.emp_mst_empl_id+" : "+e.emp_mst_name,value:e.emp_mst_empl_id})));Lt(s);let l=e.data.data.WKO_Work_Group.map((e=>({label:e.wrk_grp_grp_cd+" : "+e.wrk_grp_desc,value:e.wrk_grp_grp_cd})));Bt(l),Gt("Approve")}else T().close(),T().fire({icon:"error",title:"Oops...",text:e.data.message})}catch(e){console.error("Error fetching data:",e)}})()}),[v,Ne,yt,as,os]);const ns=function(e){let{inputData:t,comparator:s,filters:l}=e;const{name:a}=l,r=t.map(((e,t)=>[e,t]));return r.sort(((e,t)=>{const l=s(e[0],t[0]);return 0!==l?l:e[1]-t[1]})),t=r.map((e=>e[0])),t}({inputData:Array.isArray(ye)?ye:[],comparator:(0,I.sQ)(we.order,we.orderBy),filters:be}),cs=ns.slice(we.page*we.rowsPerPage,we.page*we.rowsPerPage+we.rowsPerPage),ds=(we.dense,!a()(ue,be)),hs=(0,r.useCallback)(((e,t)=>{we.onResetPage(),Ze((s=>({...s,[e]:t})))}),[we]),ps=(0,r.useCallback)((async(e,t)=>{const s=t.RowID;if(""!==s){if("A"===t.wkr_mst_wr_status)return void T().fire({title:"Warning!",text:"You are not allowed to delete the work request. The work request ".concat(t.wkr_mst_wr_no," was approved."),icon:"warning"});if("D"===t.wkr_mst_wr_status)return void T().fire({title:"Deleted!",text:"You are not allowed to delete the work request. The work request ".concat(t.wkr_mst_wr_no," was disapproved."),icon:"warning"});T().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async e=>{if(e.isConfirmed){ne(!0);try{const e=await P.Z.get("/work_request_delete_record.php?site_cd=".concat(v,"&mst_id=").concat(s));"SUCCESS"==e.data.status&&T().fire({title:"Deleted!",text:e.data.message,icon:"success"}),"ERROR"==e.data.status&&T().fire({title:"Oops!",text:e.data.message,icon:"error"}),ne(!1)}catch(t){console.error("Error fetching data:",t)}}}))}}),[ye,me,v]),us=(0,r.useCallback)((()=>{const e=ye.filter((e=>!we.selected.includes(e.id)));ke(e),we.onUpdatePageDeleteRows({totalRows:ye.length,totalRowsInPage:cs.length,totalRowsFiltered:ns.length})}),[ns.length,cs.length,we,ye]),ms=(0,r.useCallback)(((e,t)=>{const s=e,l=t.wkr_mst_assetno;""!==s&&""!==l&&xe("/dashboard/work/newRequest",{state:{RowID:s,Ast_no:l,currentPage:Ne,selectedOption:Ce}})}),[me,Ne,Ce]),xs=((0,r.useCallback)((e=>{me.push(Z.H.dashboard.product.details(e))}),[me]),(0,r.useCallback)((()=>{Ze(ue),Ae.current.value="",as()}),[as]));(0,r.useEffect)((()=>{const e=()=>{const e=window.innerHeight,t=Math.floor(.6*e)+"px";je(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const[ws,_s]=(0,r.useState)([{selectedOption:"",operator:"Like",logical:"AND",prompt:"0",valuept:"",siteCd:v,queryTypedd:"F"}]),[gs,js]=(0,r.useState)([{selectedOptionShort:"",promptAsd:"ASC",siteCd:v,queryType:"S"}]),ys=ws.some((e=>""===e.selectedOption)),ks=[{value:"(",label:"("},{value:"",label:""}],fs=[{value:"(",label:")"},{value:"",label:""}],vs=[{value:"like",label:"Like"},{value:"not like",label:"Not Like"},{value:"I=",label:"Is"},{value:"!=",label:"Is not"},{value:"=",label:"Equal to"},{value:">",label:"Greater than"},{value:"<",label:"Less than"},{value:">=",label:"Greater than or equal to"},{value:"<=",label:"Less than or equal to"},{value:"<>",label:"Not equal to"}],bs=[{value:"And",label:"And"},{value:"Or",label:"Or"}],Zs=e=>{if(ws.length>1){const t=[...ws];t.splice(e,1),_s(t)}},Cs=()=>{if(ws.length>1){const e=[ws[0]];_s(e)}if(gs.length>1){const e=[gs[0]];js(e)}Oe(!1)},Ss=Be.map((e=>({value:e.column_name,label:"".concat(e.default_label)}))),Ds=async()=>{try{const e=await P.Z.get("/getWorkReqFilterName.php");"SUCCESS"==e.data.status&&Te(e.data.data)}catch(e){console.error("Error fetching data:",e)}},Ns=async()=>{Re(1),T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const e=await P.Z.post("/get_retrive_popup_work_request_filed_data.php?page="+Ne,{rows:ws,rowsort:gs,SiteCD:v,admin:B});if(e.data.data&&e.data.data.result&&e.data.data.result.length>0){ke(e.data.data.result),ve(e.data.total_count),Je(e.data.titleName),T().close(),Cs();const t=ws.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));_s(t);const s=ws.map((e=>({...e,selectedOptionShort:""})));js(s)}else T().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}})}catch(e){console.error("Error fetching data:",e)}},Rs=e=>{if(gs.length>1){const t=[...gs];t.splice(e,1),js(t)}},As=()=>{Ee(!1),Os({queryName:"",description:""})},[qs,Os]=(0,r.useState)([{queryName:"",description:"",availability:"G",site_cd:v,owner:B}]),Is=e=>{const{name:t,value:s}=e.target;Os((e=>({...e,[t]:s})))},Ws=async()=>{T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();const e={formDataSv:qs,rowsQrtData:ws,rowsortQrtData:gs,site_cd:v,owner:B,availability:"G"};try{const t=await P.Z.post("/InsertWorkReqFilterQueryListData.php",e);console.log("response___",t),"SUCCESS"==t.data.status&&(Je(t.data.Title),rs(),Ns(),Zs(),Rs(),T().close(),As(),Cs())}catch(t){console.error("Error fetching data:",t)}},[Ls,Es]=(0,r.useState)([{selectedOption:"",operator:"",logical:"",prompt:"",valuept:"",siteCd:v,queryTypedd:"F"}]),[Fs,Ps]=(0,r.useState)([{selectedOptionShort:"",promptAsd:"",siteCd:v,queryType:"S"}]),Bs=()=>{rt(!1),Cs(),As(),lt(""),Es([]),Ps([])},Ts=async()=>{T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const e=await P.Z.post("/get_retrive_popup_work_request_filed_data.php?page="+Ne,{rows:Ls,rowsort:Fs,SiteCD:v,admin:B});ke(e.data.data.result),ve(e.data.total_count),T().close(),Cs();const t=Ls.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));_s(t);const s=Fs.map((e=>({...e,selectedOptionShort:""})));js(s)}catch(e){console.error("Error fetching data:",e)}},zs=()=>{ot(!1),Os({queryName:"",description:""})},Qs=async()=>{const e=localStorage.getItem("site_ID"),t=localStorage.getItem("emp_mst_empl_id");T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();const s={formDataSv:qs,rowsQrtData:Ls,rowsortQrtData:Fs,SITE_CD:e,OWNER_ID:t,availability:"G"};try{const e=await P.Z.post("/InsertWorkReqQueryListSaveAsData.php",s);"SUCCESS"==e.data.status&&(Je(e.data.Title),rs(),Ts(),Es([]),lt(""),Ps([]),T().close(),As(),Cs(),zs(),Bs())}catch(l){console.error("Error fetching data:",l)}},Gs=async()=>{const e=Ae.current.value;if(""!==e&&null!==e){T().fire({title:"Please Wait!",allowOutsideClick:!1}),T().showLoading();try{const t=await P.Z.get("/get_SearchWorkReqModule.php?site_cd=".concat(v,"&searchTerm=").concat(e,"&page=").concat(Ne));if(t.data.data.result.length>0){Zt(t.data.data.result),ve(t.data.total_count);const s=t.data.data.result.filter((t=>{const s=e.toLowerCase(),l=(t.wkr_mst_wr_no||"").toLowerCase(),a=(t.wkr_mst_wr_descs||"").toLowerCase(),r=(t.wkr_mst_wr_status||"").toLowerCase(),i=(t.wkr_mst_assetno||"").toLowerCase(),o=(t.wkr_mst_chg_costcenter||"").toLowerCase(),n=(t.wkr_mst_work_area||"").toLowerCase(),c=(t.wkr_mst_assetlocn||"").toLowerCase(),d=(t.wkr_mst_location||"").toLowerCase(),h=(t.wkr_mst_wo_status||"").toLowerCase(),p=(t.wkr_mst_phone||"").toLowerCase(),u=(t.wkr_det_reject_desc||"").toLowerCase(),m=(t.wkr_mst_fault_code||"").toLowerCase(),x=(t.wkr_mst_create_by||"").toLowerCase();return l.includes(s)||a.includes(s)||r.includes(s)||i.includes(s)||o.includes(s)||n.includes(s)||c.includes(s)||d.includes(s)||h.includes(s)||p.includes(s)||u.includes(s)||m.includes(s)||x.includes(s)}));ke(s),ke(s),T().close()}else T().close(),T().fire({icon:"error",title:"Oops...",text:"No Record Found!"})}catch(t){console.error("Error fetching data:",t)}}},Us=async()=>{let e,t,s,l,a,r,i=localStorage.getItem("site_ID"),o=localStorage.getItem("emp_mst_empl_id"),n=localStorage.getItem("emp_mst_name"),c=localStorage.getItem("emp_mst_login_id");""==Ot||null==Ot?t="":(e=Ot.split(":"),t=e[0]),""==Et||null==Et?l="":(s=Et.label.split(":"),l=s[0],console.log("Originator ",s[0])),""==Tt||null==Tt?r="":(a=Tt.label.split(":"),r=a[0],console.log("WorkGroup ",a[0]));var d={site_cd:i,wko_mst_status:t.trim(),wkr_mst_originator:l.trim(),wkr_mst_work_group:r.trim(),RowID:Ct,EmpID:o,EmpName:n,LOGINID:c};T().fire({title:"Please Wait !",allowOutsideClick:!1}),T().showLoading();try{const e=await P.Z.post("/insert_work_request_approval.php",JSON.stringify(d));"SUCCESS"===e.data.status?(T().close(),as(),T().fire({icon:"success",customClass:{container:"swalcontainercustom"},title:e.data.status,text:e.data.message}).then((()=>{xe("/dashboard/work/list")}))):(T().close(),T().fire({icon:"error",title:"Oops...",text:e.data}))}catch(h){T().close(),console.error("Error fetching data:",h),T().fire({icon:"error",title:"Oops get_WorkRequest_select...",text:h})}},Ms=async()=>{let e=localStorage.getItem("site_ID"),t=localStorage.getItem("emp_mst_empl_id"),s=localStorage.getItem("emp_mst_name"),l=localStorage.getItem("emp_mst_login_id"),a="";a=""==Kt||null==Kt?"":b()(Kt).format("yyyy-MM-DD HH:mm:ss").trim();var r={site_cd:e,wkr_det_reject_by:l,wkr_det_reject_desc:$t.trim(),wkr_det_reject_date:a,RowID:Ct,EmpID:t,EmpName:s,LOGINID:l};T().fire({title:"Please Wait !",allowOutsideClick:!1}),T().showLoading();try{const e=await P.Z.post("/insert_work_request_disapproval.php",JSON.stringify(r));"SUCCESS"===e.data.status?(T().close(),as(),T().fire({icon:"success",customClass:{container:"swalcontainercustom"},title:e.data.status,text:e.data.message}).then((()=>{xe("/dashboard/work/list")}))):(T().close(),T().fire({icon:"error",title:"Oops...",text:e.data}))}catch(i){T().close(),console.error("Error fetching data:",i),T().fire({icon:"error",title:"Oops get_WorkRequest_select...",text:i})}},Ys=(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&(ls([{selectedOption:"",operator:"",logical:"",valuept:"",RowId:"",prompt:"",siteCd:v,queryTypedd:"F"}]),ts(!1))};return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)(i.ql,{children:[(0,te.jsx)("title",{children:"CMMS System"}),(0,te.jsx)("meta",{name:"description",content:"Work Request List"})]}),(0,te.jsxs)(m.Z,{maxWidth:!_e.themeStretch&&"lg",children:[(0,te.jsx)("div",{className:"CustomBreadAsset",children:(0,te.jsx)(F.Z,{heading:"Work Request List",links:[],action:(0,te.jsx)(p.Z,{component:S.r,variant:"contained",className:"AddNewButton",startIcon:(0,te.jsx)(W.Z,{icon:"mingcute:add-line"}),to:{pathname:"/dashboard/work/newRequest",state:{select:"New_WorkRequest"}},children:"New"}),sx:{mb:{xs:3,md:5}}})}),(0,te.jsx)("div",{className:"workReqpage",children:(0,te.jsxs)(d.Z,{children:[(0,te.jsxs)(k.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1},marginTop:"20px"},children:[(0,te.jsxs)(p.Z,{className:"AssetFilterBtn",variant:"outlined",sx:{flexShrink:0},onClick:()=>{if(ws.length>1){const e=[ws[0]];_s(e)}if(gs.length>1){const e=[gs[0]];js(e)}Oe(!0),Ds()},children:[(0,te.jsx)(Q.JO,{icon:"fluent:filter-12-filled",style:{marginRight:"5px"}})," Filter"]}),(0,te.jsxs)(D.Z,{sx:{flexShrink:0,width:{xs:1,md:300}},className:"selectOptioncls",children:[(0,te.jsx)(N.Z,{id:"select-label",className:""!==Ke||Ce?"selectedcss":"",children:"Select an Option"}),(0,te.jsx)(R.Z,{labelId:"select-label",id:"select",input:(0,te.jsx)(z.Z,{label:"Select an option"}),value:""!==Ke?Ke:Ce,onChange:async(e,t)=>{var s;const l=(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)||Ce;Re(1);const a=$e.find((e=>e.cf_query_title===l));let r;if(Array.isArray(t)&&t.length>0&&(r=t.find((e=>e.cf_query_title===l))),a){const e=a.RowID,t=a.cf_query_list_prompt;if("1"==t){ts(!0),T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const s=await P.Z.get("/get_work_order_filter_query_data.php?site_cd="+v+"&RowID="+e);if(s.data.data&&s.data.data.list_typeF&&s.data.data.list_typeF.length>0){const l=s.data.data.list_typeF.map((s=>({selectedOption:s.cf_query_list_column,operator:s.cf_query_list_operator,valuept:s.cf_query_list_value,logical:s.cf_query_list_logical,siteCd:v,RowId:e,prompt:t,queryTypedd:"F"})));setTimeout((()=>{T().close(),ls(l)}),3e3)}else T().fire({icon:"error",customClass:{container:"swalcontainercustom"},title:"Oops...",text:"No record found Please try again !"})}catch(i){console.error("Error fetching data:",i)}return}jt(e),kt(e),Re(1),tt([]),Je("")}else{const e=r.RowID;jt(e),kt(e),Re(1),tt([]),Je("")}Se(l)},sx:{textTransform:"capitalize"},children:$e.map((e=>(0,te.jsxs)(w.Z,{value:e.cf_query_title,children:[(0,te.jsx)(W.Z,{icon:"mdi:sql-query",style:{display:"inline-flex",verticalAlign:"middle",marginRight:"6px",marginTop:"-5px",width:"16px",height:"16px"}}),(0,te.jsx)("span",{style:{verticalAlign:"middle"},children:e.cf_query_title})]},e.RowID)))})]}),(0,te.jsxs)(k.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,te.jsxs)("div",{className:"wordkOrdersearchInput",style:{display:"flex",alignItems:"center"},children:[(0,te.jsx)("input",{type:"text",className:"Seachrinput",placeholder:"Search..",ref:Ae,onKeyDown:e=>{if("Backspace"===e.key){e.preventDefault();const t=Ae.current.value.slice(0,-1);Ae.current.value=t,""===t&&xs()}"Enter"===e.key&&""!==Ae.current.value.trim()&&Gs()},onFocus:()=>{vt(!0)},onBlur:()=>{vt(!1)}}),(0,te.jsx)("div",{children:(0,te.jsx)(_.Z,{onClick:Gs,className:"customsearchbutton",children:(0,te.jsx)(W.Z,{icon:"eva:search-fill"})})})]}),(0,te.jsx)(_.Z,{onClick:ce.onOpen,children:(0,te.jsx)(W.Z,{icon:"eva:more-vertical-fill"})})]})]}),(0,te.jsx)(f.Z,{open:ce.open,onClose:ce.onClose,arrow:"right-top",sx:{width:180},children:(0,te.jsxs)(w.Z,{onClick:()=>{(async()=>{if(""!==gt){T().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const e=await P.Z.post("/getWorkReqListExcelData.php?site_cd=".concat(v,"&ItemID=").concat(gt));T().close(),e.data.data&&e.data.data.result&&e.data.data.result.length>0?(de({resultData:e.data.data.result}),ce.onClose(),T().close()):(ke(""),T().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}else{T().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const e=await P.Z.get("/getWorkReqListAllDataExcelSheet.php?site_cd=".concat(v));e.data.data&&e.data.data.result&&e.data.data.result.length>0?(de({resultData:e.data.data.result}),ce.onClose(),T().close()):(ke(""),T().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}})()},children:[(0,te.jsx)(W.Z,{icon:"solar:export-bold"}),"Export to Excel"]})}),ds&&(0,te.jsx)(ie,{filters:be,onFilters:hs,onResetFilters:xs,results:ns.length,sx:{p:2.5,pt:0}}),(0,te.jsxs)(g.Z,{sx:{position:"relative"},children:[(0,te.jsx)(I.Z4,{dense:we.dense,numSelected:(null===(l=we.selected)||void 0===l?void 0:l.length)||0,rowCount:(null===ye||void 0===ye?void 0:ye.length)||0,onSelectAllRows:e=>we.onSelectAllRows(e,ye.map((e=>e.id))),action:(0,te.jsx)(u.Z,{title:"Delete",children:(0,te.jsx)(_.Z,{color:"primary",onClick:De.onTrue,children:(0,te.jsx)(W.Z,{icon:"solar:trash-bin-trash-bold"})})})}),(0,te.jsx)(L.Z,{sx:{overflowX:"auto",maxHeight:ge},children:(0,te.jsxs)(h.Z,{size:we.dense?"small":"medium",sx:{minWidth:960},children:[(0,te.jsx)(I.K,{order:we.order,orderBy:we.orderBy,headLabel:pe,rowCount:ye.length,numSelected:we.selected.length,onSort:we.onSort,className:"stickyheader"}),(0,te.jsxs)(x.Z,{className:"AssetTable",children:[oe?(0,te.jsx)(j.Z,{children:(0,te.jsx)(y.Z,{colSpan:"71",className:"NoRecodcls",children:(0,te.jsxs)(U.Z,{open:oe,"aria-labelledby":"loading-dialog-title",PaperProps:{style:{backgroundColor:"transparent"}},BackdropProps:{className:"yourbackdropclass"},children:[(0,te.jsx)(M.Z,{id:"loading-dialog-title",style:{textAlign:"center"}}),(0,te.jsx)(Y.Z,{children:(0,te.jsx)("div",{style:{textAlign:"center",paddingTop:"10px"},children:(0,te.jsx)(G.Z1,{radius:"9",visible:!0,ariaLabel:"three-circles-loading",color:"green"})})})]})})}):(0,te.jsx)(te.Fragment,{children:0===ye.length?(0,te.jsx)(j.Z,{children:(0,te.jsx)(y.Z,{colSpan:"71",className:"NoRecodcls",children:"No Record Found"})}):(0,te.jsx)(te.Fragment,{children:ns.map((e=>(0,te.jsx)(se,{row:e,rowStats:Ie,selected:we.selected.includes(e.mst_RowID),onSelectRow:()=>we.onSelectRow(e.mst_RowID),onDeleteRow:()=>ps(e.mst_RowID,e),onEditRow:()=>ms(e.RowID,e),onDisApprove:()=>(e=>{"D"!==e.wkr_mst_wr_status?"A"!==e.wkr_mst_wr_status?(St(e.RowID),Vt(!0)):T().fire({icon:"warning",title:"Oops...",text:"The Work Request No ".concat(e.wkr_mst_wr_no," Already Approve.")}):T().fire({icon:"warning",title:"Oops...",text:"The Work Request No ".concat(e.wkr_mst_wr_no," Already Disapprove.")})})(e),onApprove:()=>((e,t)=>{"A"!==t.wkr_mst_wr_status?"D"!==t.wkr_mst_wr_status?(St(t.RowID),Nt(!0)):T().fire({icon:"warning",title:"Oops...",text:"The Work Request No ".concat(t.wkr_mst_wr_no," Already Disapprove.")}):T().fire({icon:"warning",title:"Oops...",text:"The Work Request No ".concat(t.wkr_mst_wr_no," Already Approve.")})})(e.mst_RowID,e)},e.id)))})}),(0,te.jsx)(I.$W,{emptyRows:(0,I.fQ)(we.page,we.rowsPerPage,ye.length)})]})]})})]}),(0,te.jsx)(I.S_,{count:fe>0?fe:ns.length,page:Ne-1,rowsPerPage:we.rowsPerPage,onPageChange:(e,t)=>{Re(t+1),we.onChangePage(e,t)},currentPage:Ne,onRowsPerPageChange:e=>{we.onChangeRowsPerPage(e)}})]})})]}),(0,te.jsx)(E.Q,{open:De.value,onClose:De.onFalse,title:"Delete",content:(0,te.jsxs)(te.Fragment,{children:["Are you sure want to delete ",(0,te.jsxs)("strong",{children:[" ",we.selected.length," "]})," items?"]}),action:(0,te.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>{us(),De.onFalse()},children:"Delete"})}),(0,te.jsxs)(he,{onClose:Cs,"aria-labelledby":"customized-dialog-title",open:qe,maxWidth:"md",fullWidth:!0,children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"mdi:sql-query"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:"Define Query"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:Cs,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsxs)(Y.Z,{dividers:!0,children:[(0,te.jsx)("div",{className:"queryBtn",children:(0,te.jsxs)(c.Z,{container:!0,spacing:1,children:[(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:()=>{rs(),rt(!0)},children:[(0,te.jsx)(W.Z,{icon:"carbon:query-queue"})," Query List"]})}),(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:()=>{ws.some((e=>""!==e.selectedOption))?Ns():(async()=>{T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const e=await P.Z.post("/get_retrive_work_request_all_data.php?page="+Ne,{SiteCD:v,admin:B});if(e.data.data&&e.data.data.result&&e.data.data.result.length>0){ke(e.data.data.result),ve(e.data.total_count),Je(e.data.titleName),T().close(),Cs();const t=ws.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));_s(t);const s=ws.map((e=>({...e,selectedOptionShort:""})));js(s)}else T().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}})}catch(e){console.error("Error fetching data:",e)}})()},children:[(0,te.jsx)(W.Z,{icon:"carbon:data-base"})," Retrive"]})}),(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:()=>{Ee(!0),rs()},disabled:ys,children:[(0,te.jsx)(W.Z,{icon:"mingcute:save-fill"}),"Save"]})})]})}),(0,te.jsx)("div",{className:"filterByorder",children:(0,te.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,te.jsx)("legend",{children:"Filter By"}),(0,te.jsxs)("table",{children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{style:{textAlign:"center"},children:" ( "}),(0,te.jsx)("th",{children:"Field Name"}),(0,te.jsx)("th",{children:"Operator"}),(0,te.jsx)("th",{children:"Prompt"}),(0,te.jsx)("th",{children:"Value"}),(0,te.jsx)("th",{children:"Logical"}),(0,te.jsx)("th",{style:{textAlign:"center"},children:" ) "})]})}),(0,te.jsx)("tbody",{children:ws.map(((e,t)=>(0,te.jsxs)("tr",{children:[(0,te.jsx)("td",{style:{width:"7%"},children:(0,te.jsx)(R.Z,{className:"custom-Astselect",style:{width:"100%"},children:ks.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"25%"},children:(0,te.jsx)(R.Z,{className:"custom-Astselect ".concat(t===ws.length-1&&ze?"error-border":"mammama"),style:{width:"100%"},onChange:e=>((e,t)=>{const s=[...ws];s[e].selectedOption=t,Qe(!1),_s(s)})(t,e.target.value),children:Ss.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"17%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect",onChange:e=>((e,t)=>{const s=[...ws];s[e].operator=t,_s(s)})(t,e.target.value),children:vs.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"8%"},children:(0,te.jsx)("input",{style:{width:"100%"},class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",onChange:e=>((e,t)=>{const s=[...ws];s[e].prompt=t?"1":"0",_s(s)})(t,e.target.checked)})}),(0,te.jsx)("td",{style:{width:"26%"},children:(0,te.jsx)("input",{type:"text",style:{width:"100%"},className:"custom-Astselect ".concat(t===ws.length-1&&Me?"error-border":"mammama"),oninput:"handleInput(event)",onChange:e=>((e,t)=>{const s=[...ws];s[e].valuept=t,Ye(!1),_s(s),!t&&s[e].selectedOption})(t,e.target.value)})}),(0,te.jsx)("td",{style:{width:"10%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===ws.length-1&&Ve?"error-border":"mammama"),onChange:e=>((e,t)=>{const s=[...ws];s[e].logical=t.target.value,He(!1),_s(s)})(t,e),children:bs.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"7%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect",children:fs.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{children:(0,te.jsx)(_.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>Zs(t),children:(0,te.jsx)(W.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,te.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,te.jsxs)(p.Z,{onClick:()=>{const e=ws.length>0&&(!ws[ws.length-1].selectedOption||""===ws[ws.length-1].selectedOption);e?(Qe(!e.selectedOption),Ye(!e.valuept),He(!e.logical)):(_s((e=>[...e,{selectedOption:"",operator:"Like",logical:"",prompt:"0",valuept:"",siteCd:v,queryTypedd:"F"}])),Qe(!1),Ye(!1),He(!1))},className:"AddFilterBtn",children:[(0,te.jsx)(W.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})}),(0,te.jsx)("div",{className:"filterShort",children:(0,te.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,te.jsx)("legend",{children:"Sort By"}),(0,te.jsxs)("table",{children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{children:"Field Name"}),(0,te.jsx)("th",{}),(0,te.jsx)("th",{}),(0,te.jsx)("th",{children:"Ascending?"})]})}),(0,te.jsx)("tbody",{children:gs.map(((e,t)=>(0,te.jsxs)("tr",{children:[(0,te.jsx)("td",{style:{width:"60%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect shrt ".concat(t===gs.length-1&&Ge?"error-border":"mammama"),onChange:e=>((e,t)=>{const s=[...gs];s[e].selectedOptionShort=t,Ue(!1),js(s)})(t,e.target.value),children:Ss.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"15%"}}),(0,te.jsx)("td",{style:{width:"15%"}}),(0,te.jsx)("td",{style:{width:"10%"},children:(0,te.jsx)("input",{class:"form-check-input",type:"checkbox",checked:"ASC"===gs[t].promptAsd,onChange:e=>((e,t)=>{const s=[...gs];s[e].promptAsd=t?"ASC":"DESC",js(s)})(t,e.target.checked),id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,te.jsx)("td",{}),(0,te.jsx)("td",{children:(0,te.jsx)(_.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>Rs(t),children:(0,te.jsx)(W.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,te.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,te.jsxs)(p.Z,{onClick:()=>{if(""===gs[gs.length-1].selectedOptionShort)Ue(""===gs[gs.length-1].selectedOptionShort);else{const e={selectedOptionShort:"",promptAsd:"ASC"};js([...gs,e])}},className:"AddFilterBtn",children:[(0,te.jsx)(W.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})]})]}),(0,te.jsxs)(he,{onClose:As,"aria-labelledby":"customized-dialog-title",open:Le,maxWidth:"md",fullWidth:!0,children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:"Save Query"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:As,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsx)(Y.Z,{dividers:!0,children:(0,te.jsxs)("div",{className:"astSubpopup",children:[(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Query name:"}),(0,te.jsxs)("div",{className:"form-group ",children:[(0,te.jsx)("input",{type:"text",id:"customInput",name:"queryName",value:qs.queryName,onChange:Is,className:"bsc_sav",list:"options",style:{width:"100%"}}),(0,te.jsx)("datalist",{id:"options",children:$e.map(((e,t)=>(0,te.jsx)("option",{value:e.cf_query_title},t.RowID)))})]})]}),(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Description:"}),(0,te.jsx)("div",{className:"form-group",children:(0,te.jsx)("textarea",{id:"w3review",name:"description",rows:"3",value:qs.description,onChange:Is,cols:"70",style:{width:"100%"}})})]}),(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Availability:"}),(0,te.jsxs)("div",{class:"form-check",children:[(0,te.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"G",checked:!0,onChange:Is}),(0,te.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Global(available to everyone)"}),(0,te.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"P",onChange:Is}),(0,te.jsx)("label",{class:"form-check-label",for:"exampleRadios2",children:"Personal"})]})]})]})}),(0,te.jsx)(V.Z,{children:(0,te.jsx)(p.Z,{color:"primary",onClick:()=>{if(""!==qs.queryName.trim()){const e=qs.queryName;$e.find((t=>t.cf_query_title===e))?T().fire({title:"Are you sure?",text:"Do you want to overwrite the query "+e,icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No"}).then((e=>{var t,s,l,a;e.isConfirmed&&(""!==(null===ws||void 0===ws||null===(t=ws.selectedOption)||void 0===t?void 0:t.trim())&&""!==(null===ws||void 0===ws||null===(s=ws.logical)||void 0===s?void 0:s.trim())&&""!==(null===ws||void 0===ws||null===(l=ws.valuept)||void 0===l?void 0:l.trim())&&""!==(null===gs||void 0===gs||null===(a=gs.selectedOptionShort)||void 0===a?void 0:a.trim())&&Ws())})):Ws()}else console.log("empty__")},children:"Save"})})]}),(0,te.jsxs)(he,{onClose:Bs,"aria-labelledby":"customized-dialog-title",open:at,maxWidth:"md",fullWidth:!0,children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"mdi:sql-query"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:" Query List"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:Bs,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsxs)(Y.Z,{dividers:!0,children:[(0,te.jsx)("div",{className:"queryBtn",children:(0,te.jsxs)(c.Z,{container:!0,spacing:1,children:[(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:async()=>{const[e,t]=st.split("-");if(st&&""!==t)try{T().fire({title:"Are you sure?",text:"You want to delete "+e+" query!",icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async e=>{if(e.isConfirmed){"SUCCESS"==(await P.Z.get("/WorkReqQueryListDataDelete.php?value="+t+"&siteId="+v)).data.status&&(rs(),lt(""),Es([]),Ps([]),T().fire("Deleted!","Your query has been deleted.","success"))}}))}catch(s){console.error("Error fetching data:",s)}else console.log("empty")},children:[(0,te.jsx)(W.Z,{icon:"fluent:delete-48-regular"})," Delete"]})}),(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:async()=>{const[e,t]=st.split("-");if(Fs.some((e=>!e.selectedOptionShort))&&""!=t);else{T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();const e={rowsQrtData:Ls,siteCd:v,owner:B,mst_RowID:t,rowsortQrtData:Fs};try{const t=await P.Z.post("/insert_work_req_query_listsave_data.php",e);console.log("response__SaveBytncf__",t),"SUCCESS"==t.data.status&&(T().close(),T().fire({title:"Success!",text:"Your query update successfully.",icon:"success",confirmButtonText:"OK",customClass:{container:"swalcontainercustom"}}).then((e=>{e.isConfirmed&&(Ts(),Es([]),lt(""),Ps([]),js([]),_s([]),Bs())})))}catch(s){console.error("Error fetching data:",s)}}},children:[(0,te.jsx)(W.Z,{icon:"ic:outline-save-as"})," Save"]})}),(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:()=>{ot(!0)},children:[(0,te.jsx)(W.Z,{icon:"fad:saveas"}),"Save As"]})})]})}),(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{className:"shortBydd list mt-4",children:(0,te.jsx)("div",{className:"table-containeR",children:(0,te.jsxs)("fieldset",{className:"Query-by-fieldset",children:[(0,te.jsx)("legend",{children:"Query Name"}),(0,te.jsxs)("table",{className:"custom-tablE",children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{style:{width:"100%"},children:"Query Title"}),(0,te.jsx)("th",{style:{width:"10%"},children:"Default?"})]})}),(0,te.jsxs)("tbody",{children:[(0,te.jsx)(R.Z,{id:"select",style:{width:"60%"},value:st,onChange:e=>(async e=>{let t,s;if(lt(e),1===e.split("-").length-1)[t,s]=e.split("-");else{const l=e.split("-");t=l[0].trim(),s=l[l.length-1].trim()}if(Je(t),Es([]),Ps([]),""!==e){T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();try{const e=await P.Z.get("/get_work_order_filter_query_data.php?site_cd="+v+"&RowID="+s);if(e.data.data&&e.data.data.list_typeF&&e.data.data.list_typeF.length>0){const t=e.data.data.list_typeF.map((e=>({selectedOption:e.cf_query_list_column,operator:e.cf_query_list_operator,prompt:e.cf_query_list_prompt,valuept:e.cf_query_list_value,logical:e.cf_query_list_logical,siteCd:v,queryTypedd:"F"})));setTimeout((()=>{T().close(),Es((e=>[...e,...t]))}),3e3)}else T().fire({icon:"error",customClass:{container:"swalcontainercustom"},title:"Oops...",text:"No record found Please try again !"});if(e.data.data&&e.data.data.list_typeS.length>0){const t=e.data.data.list_typeS.map((e=>({selectedOptionShort:e.cf_query_list_column,promptAsd:e.cf_query_list_order_by,queryType:"S",siteCd:v})));setTimeout((()=>{T().close(),Ps((e=>[...e,...t]))}),3e3)}}catch(l){console.error("Error fetching data:",l)}}})(e.target.value),sx:{textTransform:"capitalize"},children:$e.map((e=>(0,te.jsx)(w.Z,{value:"".concat(e.cf_query_title,"-").concat(e.RowID),children:e.cf_query_title},e.RowID)))}),(0,te.jsx)("td",{children:(0,te.jsx)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",checked:nt,onChange:()=>{ct(!nt)},style:{width:"65px",height:"15px",marginTop:"-5px"}})})]})]})]})})}),(0,te.jsx)("div",{className:"FiltrBydd mt-2",children:(0,te.jsx)("div",{children:(0,te.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,te.jsx)("legend",{children:"Filter By"}),(0,te.jsxs)("table",{style:{borderCollapse:"collapse"},children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{style:{textAlign:"center",width:"7%"},children:"("}),(0,te.jsx)("th",{style:{width:"25%"},children:"Field Name"}),(0,te.jsx)("th",{style:{width:"17%"},children:"Operator"}),(0,te.jsx)("th",{style:{width:"8%"},children:"Prompt"}),(0,te.jsx)("th",{style:{width:"26%"},children:"Value"}),(0,te.jsx)("th",{style:{width:"10%"},children:"Logical"}),(0,te.jsx)("th",{style:{textAlign:"center",width:"7%"},children:")"})]})}),(0,te.jsx)("tbody",{children:Ls.map(((e,t)=>(0,te.jsx)(r.Fragment,{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("td",{style:{width:"7%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect",children:ks.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"25%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===Ls.length-1&&dt?"error-border":"mammama"),value:e.selectedOption||"",onChange:e=>((e,t)=>{const s=[...Ls];s[e].selectedOption=t,ht(!1),Es(s)})(t,e.target.value),children:Ss.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"17%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect",value:e.operator||"Like",onChange:e=>((e,t)=>{const s=[...Ls];s[e].operator=t,Es(s)})(t,e.target.value),children:vs.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"8%"},children:(0,te.jsx)("input",{class:"form-check-input",type:"checkbox",onChange:e=>((e,t)=>{const s=[...Ls];s[e].prompt=t?"1":"0",Es(s)})(t,e.target.checked),checked:"1"===e.prompt,id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,te.jsx)("td",{style:{width:"26%"},children:(0,te.jsx)("input",{type:"text",style:{width:"100%"},className:"custom-Astselect ".concat(t===Ls.length-1&&pt?"error-border":"mammama"),value:e.valuept||"",oninput:"handleInput(event)",onChange:e=>((e,t)=>{const s=[...Ls];s[e].valuept=t,Es(s)})(t,e.target.value)})}),(0,te.jsx)("td",{style:{width:"10%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===Ls.length-1&&mt?"error-border":"mammama"),value:e.logical||"",children:bs.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"7%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect",children:fs.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{children:(0,te.jsx)(_.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(Ls.length>1){const t=[...Ls];t.splice(e,1),Es(t)}})(t),children:(0,te.jsx)(W.Z,{icon:"carbon:close"})})})]},t)},t)))})]}),(0,te.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,te.jsxs)(p.Z,{onClick:()=>{const e=Ls.length>0&&(!Ls[Ls.length-1].selectedOption||""===Ls[Ls.length-1].selectedOption);e?(ht(!e.selectedOption),ut(!e.valuept),xt(!e.logical)):(Es((e=>[...e,{selectedOption:"",operator:"Like",logical:"",prompt:"0",valuept:"",siteCd:v,queryTypedd:"F"}])),ht(!1),ut(!1),xt(!1))},className:"AddFilterBtn",children:[(0,te.jsx)(W.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})}),(0,te.jsx)("div",{className:"shortBydd mt-4 shtQtr",children:(0,te.jsx)("div",{children:(0,te.jsxs)("fieldset",{className:"short-by-fieldset",children:[(0,te.jsx)("legend",{children:"Sort By"}),(0,te.jsxs)("table",{style:{borderCollapse:"collapse"},children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{children:"Field Name"}),(0,te.jsx)("th",{}),(0,te.jsx)("th",{}),(0,te.jsx)("th",{children:"Ascending?"})]})}),(0,te.jsx)("tbody",{children:Fs.map(((e,t)=>(0,te.jsxs)("tr",{children:[(0,te.jsx)("td",{style:{width:"60%"},children:(0,te.jsx)(R.Z,{style:{width:"100%"},className:"custom-Astselect sht ".concat(t===Fs.length-1&&wt?"error-border":"mammama"),onChange:e=>((e,t)=>{const s=[...Fs];s[e].selectedOptionShort=t,_t(!1),Ps(s)})(t,e.target.value),value:e.selectedOptionShort||"",children:Ss.map(((e,t)=>(0,te.jsx)(w.Z,{value:e.value,children:e.label},t)))})}),(0,te.jsx)("td",{style:{width:"15%"}}),(0,te.jsx)("td",{style:{width:"15%"}}),(0,te.jsx)("td",{style:{width:"8%"},children:(0,te.jsx)("input",{class:"form-check-input",type:"checkbox",checked:"ASC"===Fs[t].promptAsd,onChange:e=>((e,t)=>{const s=[...Fs];s[e].promptAsd=t?"ASC":"DESC",Ps(s)})(t,e.target.checked),id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,te.jsx)("td",{}),(0,te.jsx)("td",{children:(0,te.jsx)(_.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(Fs.length>1){const t=[...Fs];t.splice(e,1),Ps(t)}})(t),children:(0,te.jsx)(W.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,te.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,te.jsxs)(p.Z,{onClick:()=>{const e=Fs.length>0&&(!Fs[Fs.length-1].selectedOptionShort||""===Fs[Fs.length-1].selectedOptionShort);e?_t(!e.selectedOptionShort):(Ps((e=>[...e,{selectedOptionShort:"",promptAsd:"",siteCd:v,queryType:"S"}])),_t(!1))},className:"AddFilterBtn",children:[(0,te.jsx)(W.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})})]})]})]}),(0,te.jsxs)(he,{onClose:zs,"aria-labelledby":"customized-dialog-title",open:it,maxWidth:"md",fullWidth:!0,children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:"Save Query As"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:zs,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsx)(Y.Z,{dividers:!0,children:(0,te.jsxs)("div",{className:"astSubpopup",children:[(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Query name:"}),(0,te.jsxs)("div",{className:"form-group ",children:[(0,te.jsx)("input",{type:"text",id:"customInput",name:"queryName",value:qs.queryName,onChange:Is,className:"bsc_sav",list:"options",style:{width:"100%"}}),(0,te.jsx)("datalist",{id:"options",children:$e.map(((e,t)=>(0,te.jsx)("option",{value:e.cf_query_title},t.RowID)))})]})]}),(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Description:"}),(0,te.jsx)("div",{className:"form-group",children:(0,te.jsx)("textarea",{id:"w3review",name:"description",rows:"3",value:qs.description,onChange:Is,cols:"70",style:{width:"100%"}})})]}),(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Availability:"}),(0,te.jsxs)("div",{class:"form-check",children:[(0,te.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"G",checked:!0,onChange:Is}),(0,te.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Global(available to everyone)"}),(0,te.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"P",onChange:Is}),(0,te.jsx)("label",{class:"form-check-label",for:"exampleRadios2",children:"Personal"})]})]})]})}),(0,te.jsx)(V.Z,{children:(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:()=>{if(""!==qs.queryName.trim()){const e=qs.queryName;$e.find((t=>t.cf_query_title===e))?T().fire({title:"Are you sure?",text:"Do you want to overwrite the query "+e,icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No"}).then((e=>{var t,s,l,a;e.isConfirmed&&(""!==(null===Ls||void 0===Ls||null===(t=Ls.selectedOption)||void 0===t?void 0:t.trim())&&""!==(null===Ls||void 0===Ls||null===(s=Ls.logical)||void 0===s?void 0:s.trim())&&""!==(null===Ls||void 0===Ls||null===(l=Ls.valuept)||void 0===l?void 0:l.trim())&&""!==(null===Fs||void 0===Fs||null===(a=Fs.selectedOptionShort)||void 0===a?void 0:a.trim())&&Qs())})):Qs()}else console.log("empty__")},children:[(0,te.jsx)(W.Z,{icon:"mingcute:save-line"})," Save"]})})})]}),(0,te.jsxs)(he,{onClose:Rt,"aria-labelledby":"customized-dialog-title",open:Dt,maxWidth:"md",fullWidth:!0,className:"approveModel",children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"marketeq:file-folder-approved-2"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:"Approve Work Request"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:Rt,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsx)(Y.Z,{dividers:!0,children:(0,te.jsxs)("div",{className:"astSubpopup",children:[(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,te.jsx)(c.Z,{item:!0,xs:4,sx:{pl:2},children:(0,te.jsx)(K.Z,{control:(0,te.jsx)("div",{}),label:"Status:"})}),(0,te.jsx)(c.Z,{item:!0,xs:8,children:At.map((e=>(0,te.jsx)(K.Z,{value:e.value,control:(0,te.jsx)(H.Z,{}),label:e.label,checked:Ot===e.value,onChange:e=>{It(e.target.value),Mt("")}},e.value)))})]}),(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,te.jsx)(c.Z,{item:!0,xs:4,sx:{pl:2},children:(0,te.jsx)(K.Z,{control:(0,te.jsx)("div",{}),label:"Assign to:"})}),(0,te.jsx)(c.Z,{item:!0,xs:8,children:(0,te.jsx)(n.Z,{options:Wt,defaultValue:Et,onChange:(e,t)=>{Ft(t),Mt("")},renderInput:e=>(0,te.jsx)(O.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",fullWidth:!0})})})]}),(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,te.jsx)(c.Z,{item:!0,xs:4,sx:{pl:2},children:(0,te.jsx)(K.Z,{control:(0,te.jsx)("div",{}),label:"Work Group:"})}),(0,te.jsx)(c.Z,{item:!0,xs:8,children:(0,te.jsx)(n.Z,{options:Pt,defaultValue:Tt,onChange:(e,t)=>{zt(t),Mt("")},renderInput:e=>(0,te.jsx)(O.Z,{...e,size:"small",placeholder:"Select...",variant:"outlined",fullWidth:!0})})})]})]})}),(0,te.jsx)(V.Z,{children:(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[Ut&&(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsx)("div",{style:{color:"red",marginRight:"10px"},children:Ut})}),(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",className:"SaveButton",style:{color:"#fff"},onClick:()=>{0==Ot||null==Ot?Mt("Please select a status."):0==Et||null==Et?Mt("Please Select the Originator."):0==Tt||null==Tt?Mt("Please Select the Work Group."):"Approve"==Qt&&(Rt(),Us())},children:[(0,te.jsx)(W.Z,{icon:"mingcute:save-line"})," Approve"]})})]})})]}),(0,te.jsxs)(he,{onClose:Ht,"aria-labelledby":"customized-dialog-title",open:Yt,maxWidth:"md",fullWidth:!0,className:"approveModel",children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:"Disapprove Work Request"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:Ht,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsx)(Y.Z,{dividers:!0,children:(0,te.jsxs)("div",{className:"astSubpopup",children:[(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,te.jsx)(c.Z,{item:!0,xs:4,sx:{pl:2},children:(0,te.jsx)(K.Z,{control:(0,te.jsx)("div",{}),label:"Reject By:"})}),(0,te.jsx)(c.Z,{item:!0,xs:8,children:(0,te.jsx)(O.Z,{id:"outlined-basic",size:"small",variant:"outlined",className:"Extrasize",fullWidth:!0,defaultValue:X,disabled:!0})})]}),(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,te.jsx)(c.Z,{item:!0,xs:4,sx:{pl:2},children:(0,te.jsx)(K.Z,{control:(0,te.jsx)("div",{}),label:"Reject Date:"})}),(0,te.jsx)(c.Z,{item:!0,xs:8,children:(0,te.jsx)(J.x,{value:Kt,format:"dd/MM/yyyy HH:mm",className:"Extrasize",onChange:e=>{Jt(e)},slotProps:{textField:{fullWidth:!0}}})})]}),(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[(0,te.jsx)(c.Z,{item:!0,xs:4,sx:{pl:2},children:(0,te.jsx)(K.Z,{control:(0,te.jsx)("div",{}),label:"Rejected Description:"})}),(0,te.jsx)(c.Z,{item:!0,xs:8,children:(0,te.jsx)($.u,{"aria-label":"empty textarea",placeholder:"",style:{width:"100%"},minRows:6.5,defaultValue:$t,onChange:e=>{Xt(e.target.value)}})})]})]})}),(0,te.jsx)(V.Z,{children:(0,te.jsxs)(c.Z,{container:!0,spacing:2,alignItems:"center",children:[Ut&&(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsx)("div",{style:{color:"red",marginRight:"10px"},children:Ut})}),(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:()=>{""==$t?Mt("Please Enter the Rejected Description."):(Ht(),Ms(),console.log("Disapprove button clicked here!"))},children:[(0,te.jsx)(W.Z,{icon:"mingcute:save-line"})," Disapprove"]})})]})})]}),(0,te.jsxs)(he,{onClose:Ys,"aria-labelledby":"customized-dialog-title",open:es,maxWidth:"md",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[(0,te.jsxs)(M.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,te.jsx)(W.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,te.jsx)("span",{style:{marginLeft:"2px"},children:"Query Prompter"})]}),(0,te.jsx)(_.Z,{"aria-label":"close",onClick:()=>Ys(),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,te.jsx)(W.Z,{icon:"material-symbols:close"})}),(0,te.jsx)(Y.Z,{dividers:!0,children:(0,te.jsx)("div",{className:"astSubpopup",children:(0,te.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,te.jsx)("legend",{children:"Please Fill In The Value"}),(0,te.jsxs)("table",{style:{width:"100%"},children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{children:"Column"}),(0,te.jsx)("th",{children:"Operator"}),(0,te.jsx)("th",{children:"Value"}),(0,te.jsx)("th",{children:"Logical"})]})}),(0,te.jsx)("tbody",{children:ss.map(((e,t)=>!e.selectedOption&&!e.operator&&!e.valuept?null:(0,te.jsxs)("tr",{children:[(0,te.jsx)("td",{style:{width:"25%"},children:(0,te.jsx)("input",{type:"text",style:{width:"100%"},disabled:!0,value:e.selectedOption||"",className:"custom-Astselect ".concat(t===ws.length-1&&Me?"error-border":"mammama"),oninput:"handleInput(event)"})}),(0,te.jsx)("td",{style:{width:"25%"},children:(0,te.jsx)("input",{type:"text",style:{width:"100%"},value:e.operator||"",disabled:!0,className:"custom-Astselect ".concat(t===ws.length-1&&Me?"error-border":"mammama"),oninput:"handleInput(event)"})}),(0,te.jsx)("td",{style:{width:"25%"},children:(0,te.jsx)("input",{type:"text",style:{width:"100%"},value:e.valuept||"",className:"custom-Astselect ".concat(t===ws.length-1&&Me?"error-border":"mammama"),onChange:e=>((e,t)=>{ls((s=>s.map(((s,l)=>l===e?{...s,valuept:t}:s))))})(t,e.target.value)})}),(0,te.jsx)("td",{style:{width:"25%"},children:(0,te.jsx)("input",{type:"text",style:{width:"100%"},disabled:!0,value:e.logical||"",className:"custom-Astselect ".concat(t===ws.length-1&&Me?"error-border":"mammama"),oninput:"handleInput(event)"})})]},t)))})]})]})})}),(0,te.jsx)(V.Z,{children:(0,te.jsx)(c.Z,{item:!0,children:(0,te.jsxs)(p.Z,{variant:"outlined",onClick:async()=>{const e=ss.some((e=>!e.valuept.trim())),t=ss.length>0?ss[0].RowId:null;if(e)T().fire({icon:"error",title:"Validation Error !",text:"Please fill in value field before saving.",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});else{T().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),T().showLoading();const e={rowsQrtData:ss,rowsortQrtData:"",siteCd:v,mst_RowID:t,owner:B};try{"SUCCESS"==(await P.Z.post("/insert_work_req_query_listsave_data.php",e)).data.status&&(T().close(),T().fire({title:"Success!",text:"Your query update successfully.",icon:"success",confirmButtonText:"OK",customClass:{container:"swalcontainercustom"}}).then((e=>{e.isConfirmed&&(async e=>{try{const t=await P.Z.post("/get_work_request_dropdown_prompt_data.php?page="+Ne,{rows:ss,rowsort:"",SiteCD:v,admin:B,RowId:e});ke(t.data.data.result),ve(t.data.total_count),Je(t.data.titleName),T().close(),Ys()}catch(t){console.error("Error fetching data:",t)}})(t)})))}catch(s){console.error("Error fetching data:",s)}}},children:[(0,te.jsx)(W.Z,{icon:"iconoir:submit-document"})," Save"]})})})]})]})}},87937:(e,t,s)=>{e.exports=s.p+"static/media/Work_order.49d454128c5891dab40a.gif"}}]);
//# sourceMappingURL=6747.aba8022c.chunk.js.map