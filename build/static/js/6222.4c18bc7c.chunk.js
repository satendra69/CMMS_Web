"use strict";(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[6222],{66222:(t,a,e)=>{e.r(a),e.d(a,{default:()=>x});var s=e(6907),r=e(72791),o=e(13967),l=e(10266),i=e(24308),c=e(57689),n=e(51318),d=(e(18306),e(60720)),_=(e(14305),e(64554)),u=e(53767),h=e(4567),m=e(88588),g=e(17070),b=e(40268),p=(e(3174),e(80184));function D(t){let{title:a,description:e,percent:s,total:r,data:l,sx:i,...c}=t;(0,o.Z)();const n=r<=parseInt(l.dsh_mst_critical_value),d=r>parseInt(l.dsh_mst_critical_value)&&r<parseInt(l.dsh_mst_alert_value),D=r>parseInt(l.dsh_mst_alert_value),f={isTarget:{name:"streamline:target",color:"#008135"},isCritical:{name:"streamline:target",color:"#fa6b00"},isAlert:{name:"ant-design:alert-outlined",color:"#cd0000"},defaultIcon:{name:"solar:double-alt-arrow-up-bold-duotone",color:"green"}},{name:w,color:S}=n?f.isTarget:d?f.isCritical:D?f.isAlert:f.defaultIcon;return(0,p.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",p:3,...i},...c,children:[(0,p.jsxs)(_.Z,{sx:{flexGrow:1},children:[(0,p.jsx)(h.Z,{className:"TITLECLS",children:a}),(0,p.jsx)(h.Z,{variant:"h3",children:(0,g.FK)(r)}),(0,p.jsx)(h.Z,{className:"DESCLS",children:e})]}),(0,p.jsx)(u.Z,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:(0,p.jsx)(b.Z,{width:24,icon:w,sx:{mr:1,color:S,...s<0&&{color:"error.main"}}})})]})}var f=e(18709),w=e(21830),S=e.n(w);function y(){let t=localStorage.getItem("site_ID"),a=localStorage.getItem("emp_mst_empl_id");const e=(0,c.s0)(),{user:s}=(0,n.I)(),_=((0,o.Z)(),(0,d.K$)()),[u,h]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[w,y]=(0,r.useState)([]),[x,I]=(0,r.useState)([]),[C,j]=(0,r.useState)([]),[k,Z]=(0,r.useState)([]),[R,G]=(0,r.useState)(0),[q,E]=(0,r.useState)(0);(0,r.useEffect)((()=>{(async()=>{try{const a=await f.Z.get("/get_dashboard_edit_flag_status.php?site_cd="+t);if("SUCCESS"===a.data.status){const t=a.data.data[0].EditFlag;G(t)}}catch(a){console.error("Error fetching data:",a)}})(),(async()=>{const e=await(async()=>{try{const a=await f.Z.get("/get_dashboardRefshTime.php?site_cd="+t);if("SUCCESS"===a.data.status)return 6e4*a.data.data[0].RefshTime}catch(a){console.error("Error fetching data:",a)}})();await v();const s=setInterval((()=>{E((t=>t+1)),(async()=>{try{const e=await f.Z.get("/getGaugeDashbordData.php?site_cd="+t+"&admin="+a);"SUCCESS"===e.data.status&&(h(e.data.data),j(e.data.PRM_MST),Z(e.data.DashbrdCount),g(e.data.RowDataFltBy),y(e.data.RowDataSortBy),I(e.data.RowDataSortPrm_mst))}catch(e){console.error("Error fetching data:",e)}})()}),e||5e3)})()}),[]);const v=async()=>{S().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),S().showLoading();try{const e=await f.Z.get("/getGaugeDashbordData.php?site_cd="+t+"&admin="+a);console.log("response____dash__",e),"SUCCESS"===e.data.status?(h(e.data.data),j(e.data.PRM_MST),Z(e.data.DashbrdCount),g(e.data.RowDataFltBy),y(e.data.RowDataSortBy),I(e.data.RowDataSortPrm_mst),S().close()):S().close()}catch(e){console.error("Error fetching data:",e)}},L=[...u].sort(((t,a)=>parseInt(t.dsh_mst_display_order)-parseInt(a.dsh_mst_display_order)));return(0,p.jsxs)(l.Z,{maxWidth:!_.themeStretch&&"xl",children:[(0,p.jsx)(i.Z,{container:!0,justifyContent:"flex-end",alignItems:"center",rowSpacing:0,children:(0,p.jsx)(i.Z,{item:!0,children:(0,p.jsx)("button",{className:"RefshBtn",onClick:()=>{v()},children:(0,p.jsx)(b.Z,{icon:"ic:sharp-refresh",width:24,height:24,style:{fontSize:"22px",marginRight:"2px"}})})})}),(0,p.jsx)(i.Z,{container:!0,rowSpacing:2,columnSpacing:{xs:1,sm:2,md:3},mb:2,children:L.map(((t,a)=>(0,p.jsx)(i.Z,{item:!0,xs:12,md:4,className:"1"===R?"gaugeDBDisable":"gaugeDB",children:(0,p.jsx)(D,{data:t,total:parseInt(k[t.cf_query_RowID]),description:t.dsh_mst_desc,onClick:"1"===R?void 0:()=>(async t=>{S().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});const a=t;let s=null,r=null,o=null;if(Object.keys(m).map((t=>(a===t&&(s=m[t]),null))),Object.keys(w).map((t=>(a===t&&(r=w[t]),null))),Object.keys(x).map((t=>(a===t&&(o=x[t]),null))),S().showLoading(),console.log("newArrayFltr____",s),s&&s.length>0){const t=s[0];"ast_mst"===t.cf_query_list_table||"ast_det"===t.cf_query_list_table?(e("/dashboard/asset/list",{state:{GaugeDashbordData:s,GaugeDashbordDataSort:r,DropListId:a}}),S().close()):"wko_mst"===t.cf_query_list_table||"wko_det"===t.cf_query_list_table?(e("/dashboard/work/order",{state:{GaugeDashbordData:s,GaugeDashbordDataSort:r,DropListId:a}}),S().close()):"wkr_mst"===t.cf_query_list_table||"wkr_det"===t.cf_query_list_table?(e("/dashboard/work/list",{state:{GaugeDashbordData:s,GaugeDashbordDataSort:r,DropListId:a}}),S().close()):"itm_mst"===t.cf_query_list_table||"itm_det"===t.cf_query_list_table?(e("/dashboard/InventoryMaster/list",{state:{GaugeDashbordData:s,GaugeDashbordDataSort:r,DropListId:a}}),S().close()):"prm_mst"!==t.cf_query_list_table&&"prm_det"!==t.cf_query_list_table||(S().close(),S().fire({icon:"warning",title:"Opps !",html:"<b>This Module Is Not Ready To View!</b>",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}))}else o&&o.length>0&&e("/dashboard/work/order",{state:{GaugeDashbordData:s,GaugeDashbordDataSort:r,GetDashbordDataPrmMst:o,DropListId:a}})})(t.cf_query_RowID)})},a)))})]})}function x(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.ql,{children:(0,p.jsx)("title",{children:" Dashboard"})}),(0,p.jsx)(y,{})]})}}}]);
//# sourceMappingURL=6222.4c18bc7c.chunk.js.map