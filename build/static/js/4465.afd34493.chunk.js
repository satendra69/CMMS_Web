"use strict";(self.webpackChunkcmms_web=self.webpackChunkcmms_web||[]).push([[4465],{74465:(e,t,s)=>{s.r(t),s.d(t,{default:()=>X});var l=s(18111),a=s.n(l),i=s(72791),o=s(6907),n=s(57689),r=s(24308),c=s(88588),d=s(15416),h=s(5849),u=s(97639),p=s(10266),m=s(62155),x=s(82626),g=s(90977),y=s(55261),j=s(9195),f=s(68745),v=s(53767),w=s(56832),C=s(38072),b=s(19208),_=s(83854),S=s(45363),Z=s(62861),k=s(84701),N=s(22459),A=s(60720),D=s(1382),O=s(40268),R=s(63454),q=s(3352),I=s(73379),P=s(18709),B=s(21830),L=s.n(B),F=s(77196),E=s(62711),T=s(5574),W=s(65661),Q=s(4899),z=s(77386),G=s(77512),U=s(75985),M=(s(5462),s(66934)),Y=s(75052),K=s(96268),V=s(76948),H=s(80184);const J=(0,M.ZP)(T.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),$={col1:"",publish:[],stock:[]};function X(){var e,t,s,l;const B=localStorage.getItem("site_ID"),M=localStorage.getItem("emp_mst_empl_id"),X=localStorage.getItem("emp_mst_login_id"),ee=(0,n.TH)(),[te,se]=(0,i.useState)(null===(e=ee.state)||void 0===e?void 0:e.GaugeDashbordData),le=(null===(t=ee.state)||void 0===t?void 0:t.GaugeDashbordDataSort)||[],[ae,ie]=(0,i.useState)((null===(s=ee.state)||void 0===s?void 0:s.DropListId)||[]),[oe,ne]=(0,i.useState)(!0),re=(0,w.S)(),ce=(0,b.tv)(),de=(0,n.s0)(),he=(0,D.x6)(),ue=(0,A.K$)(),[pe,me]=(0,i.useState)("400px"),[xe,ge]=(0,i.useState)([]),[ye,je]=(0,i.useState)(),[fe,ve]=(0,i.useState)([]),[we,Ce]=(0,i.useState)($),[be,_e]=(0,i.useState)(""),Se=(0,N.k)(),[Ze,ke]=(0,i.useState)(1),Ne=(0,i.useRef)(null),[Ae,De]=(0,i.useState)(!1),[Oe,Re]=(0,i.useState)(""),[qe,Ie]=(0,i.useState)(!1),[Pe,Be]=(0,i.useState)(!1),[Le,Fe]=(0,i.useState)(!1),[Ee,Te]=(0,i.useState)([]),[We,Qe]=(0,i.useState)(!1),[ze,Ge]=(0,i.useState)(!1),[Ue,Me]=(0,i.useState)(!1),[Ye,Ke]=(0,i.useState)(!1),[Ve,He]=(0,i.useState)(""),[Je,$e]=(0,i.useState)([]),[Xe,et]=(0,i.useState)(),[tt,st]=(0,i.useState)(!1),[lt,at]=(0,i.useState)(!1),[it,ot]=(0,i.useState)(!1),[nt,rt]=(0,i.useState)(!1),[ct,dt]=(0,i.useState)(!1),[ht,ut]=(0,i.useState)(!1),[pt,mt]=(0,i.useState)(""),[xt,gt]=(0,i.useState)(""),[yt,jt]=(0,i.useState)(!1),[ft,vt]=(0,i.useState)([]),[wt,Ct]=(0,i.useState)([]),[bt,_t]=(0,i.useState)(""),[St,Zt]=(0,i.useState)(!1),[kt,Nt]=(0,i.useState)("selected1"),[At,Dt]=(0,i.useState)(""),[Ot,Rt]=(0,i.useState)(""),[qt,It]=(0,i.useState)(!1),[Pt,Bt]=(0,i.useState)([{selectedOption:"",operator:"",logical:"",valuept:"",RowId:"",prompt:"",siteCd:B,Column:"",queryTypedd:"F"}]),Lt=(0,i.useCallback)((async()=>{ne(!0);try{const e=await P.Z.get("/get_asset_master_table_data.php?site_cd=".concat(B,"&page=").concat(Ze));ve(e.data.data.header),ge(e.data.data.result),je(e.data.total_count),ne(!1)}catch(e){console.error("Error fetching data:",e)}}),[B,Ze]),Ft=async()=>{try{const e=await P.Z.get("/get_asset_filter_dropdown.php?site_cd=".concat(B,"&auditUser=").concat(X));if($e(e.data),""!==ae&&null!==ae){const t=e.data.find((e=>e.RowID===ae));if(t){const e=t.cf_query_title;He(e)}}}catch(e){console.error("Error fetching data:",e)}},Et=(0,i.useCallback)((async()=>{ne(!0);try{const e=await P.Z.post("/get_gauge_dashbord_asset_data.php?page="+Ze,{rows:te,rowsort:le,site_cd:B,emp_ID:M});console.log("response_____using _dashbord",e),"SUCCESS"===e.data.status&&(e.data.data.result.length>0&&(ve(e.data.data.header),ge(e.data.data.result),je(e.data.total_count)),ne(!1))}catch(e){console.error("Error fetching data:",e)}}),[B,Ze]),Tt=(0,i.useCallback)((async()=>{ne(!0);try{const e=await P.Z.post("/get_asset_list_selectoption_data.php?site_cd=".concat(B,"&ItemID=").concat(xt,"&page=").concat(Ze,"&EmpId=").concat(M));e.data.data&&e.data.data.result&&e.data.data.result.length>0?(ge(e.data.data.result),je(e.data.DashbrdCount),ne(!1)):(ge(""),je(""),ne(!1),L().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}),[B,Ze,xt]),Wt=function(e){let{inputData:t,comparator:s,filters:l}=e;const{name:a}=l,i=t.map(((e,t)=>[e,t]));return i.sort(((e,t)=>{const l=s(e[0],t[0]);return 0!==l?l:e[1]-t[1]})),t=i.map((e=>e[0])),t}({inputData:Array.isArray(xe)?xe:[],comparator:(0,D.sQ)(he.order,he.orderBy),filters:we}),Qt=Wt.slice(he.page*he.rowsPerPage,he.page*he.rowsPerPage+he.rowsPerPage),zt=(he.dense,!a()($,we)),Gt=(0,i.useCallback)(((e,t)=>{he.onResetPage(),Ce((s=>({...s,[e]:t})))}),[he]),Ut=(0,i.useCallback)((async(e,t)=>{const s=e,l=t.col1;""!==s&&""!==l&&L().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async e=>{if(e.isConfirmed){ne(!0);try{const e=await P.Z.get("/asset_list_delete_record.php?site_cd=".concat(B,"&mst_id=").concat(s,"&ast_no=").concat(l));"SUCCESS"==e.data.status&&(L().fire({title:"Deleted!",text:"Asset Record Delete Successfully",icon:"success"}),Lt()),"ERROR"==e.data.status&&L().fire({title:"Oops!",text:e.data.message,icon:"error"}),ne(!1)}catch(t){console.error("Error fetching data:",t)}}}))}),[xe,ce,B]),Mt=(0,i.useCallback)((()=>{const e=xe.filter((e=>!he.selected.includes(e.id)));ge(e),he.onUpdatePageDeleteRows({totalRows:xe.length,totalRowsInPage:Qt.length,totalRowsFiltered:Wt.length})}),[Wt.length,Qt.length,he,xe]),Yt=(0,i.useCallback)(((e,t)=>{const s=e,l=t.col1;""!==s&&""!==l&&de("/dashboard/asset/newasset",{state:{RowID:s,Ast_no:l,currentPage:Ze,selectedOption:be}})}),[ce,Ze,be]),Kt=(0,i.useCallback)(((e,t)=>{const s=e,l=t.col1;""!==s&&de("/dashboard/asset/newasset",{state:{DuplicatRowid:s,DupRowID:s,DupAst_no:l,currentPage:Ze,selectedOption:be}})}),[ce,Ze,be]),Vt=(0,i.useCallback)((e=>{Zt(!0);Dt(e)})),Ht=()=>{Zt(!1)},Jt=((0,i.useCallback)((e=>{ce.push(C.H.dashboard.product.details(e))}),[ce]),(0,i.useCallback)((()=>{Ce($),Ne.current.value="",Lt()}),[Lt]));(0,i.useEffect)((()=>{const e=()=>{const e=window.innerHeight,t=Math.floor(.6*e)+"px";me(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const[$t,Xt]=(0,i.useState)([{selectedOption:"",operator:"",logical:"AND",prompt:"0",valuept:"",siteCd:B,queryTypedd:"F"}]),[es,ts]=(0,i.useState)([{selectedOptionShort:"",promptAsd:"ASC",siteCd:B,queryType:"S"}]),ss=$t.some((e=>""===e.selectedOption)),ls=[{value:"(",label:"("},{value:"",label:""}],as=[{value:"(",label:")"},{value:"",label:""}],is=[{value:"like",label:"Like"},{value:"not like",label:"Not Like"},{value:"I=",label:"Is"},{value:"!=",label:"Is not"},{value:"=",label:"Equal to"},{value:">",label:"Greater than"},{value:"<",label:"Less than"},{value:">=",label:"Greater than or equal to"},{value:"<=",label:"Less than or equal to"},{value:"<>",label:"Not equal to"}],os=[{value:"And",label:"And"},{value:"Or",label:"Or"}],ns=e=>{if($t.length>1){const t=[...$t];t.splice(e,1),Xt(t)}},rs=()=>{if($t.length>1){const e=[$t[0]];Xt(e)}if(es.length>1){const e=[es[0]];ts(e)}De(!1)},cs=Ee.map((e=>({value:e.column_name,label:"".concat(e.default_label)}))),ds=async()=>{try{const e=await P.Z.get("/getAssetFilterFileName.php");"SUCCESS"==e.data.status&&Te(e.data.data)}catch(e){console.error("Error fetching data:",e)}},hs=(0,i.useCallback)((async()=>{let e=!1,t=!1;for(const l of $t)l.operator||(e=!0),l.valuept||(t=!0);if(""===bt&&(e||t)){let s="";return e?s="Operator":t&&(s="Value"),L().close(),U.Am.error("Please fill the required field: ".concat(s),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:U.sm,style:{width:"400px"}}),!1}L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const e=await P.Z.post("/get_retrive_popup_asset_filed_data.php?page="+Ze,{rows:$t,rowsort:es,SiteCD:B,admin:M});e.data.data&&e.data.data.result&&e.data.data.result.length>0?(ge(e.data.data.result),je(e.data.total_count),He(e.data.titleName),_t("RetriveData"),L().close(),rs()):L().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}})}catch(s){console.error("Error fetching data:",s)}}),[B,Ze,$t,es]),us=(0,i.useCallback)((async()=>{L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const e=await P.Z.post("/get_retrive_asset_all_data.php?page="+Ze,{SiteCD:B,admin:M});e.data.data&&e.data.data.result&&e.data.data.result.length>0?(ge(e.data.data.result),je(e.data.total_count),He(e.data.titleName),L().close(),rs()):L().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}})}catch(e){console.error("Error fetching data:",e)}}),[B,Ze]),ps=e=>{if(es.length>1){const t=[...es];t.splice(e,1),ts(t)}},ms=()=>{Fe(!1),gs({queryName:"",description:""})},[xs,gs]=(0,i.useState)([{queryName:"",description:"",availability:"G",site_cd:B,owner:M}]),ys=e=>{const{name:t,value:s}=e.target;gs((e=>({...e,[t]:s})))},js=e=>{Nt(e.target.value)},fs=async()=>{L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();const e={formDataSv:xs,rowsQrtData:$t,rowsortQrtData:es,site_cd:B,owner:M,availability:"G"};try{const t=await P.Z.post("/insert_asset_filter_query_list_data.php",e);"SUCCESS"==t.data.status&&(He(t.data.Title),Ft(),hs(),ns(),ps(),L().close(),ms(),rs())}catch(t){console.error("Error fetching data:",t)}},[vs,ws]=(0,i.useState)([{selectedOption:"",operator:"",logical:"",prompt:"",valuept:"",siteCd:B,queryTypedd:"F"}]),[Cs,bs]=(0,i.useState)([{selectedOptionShort:"",promptAsd:"",siteCd:B,queryType:"S"}]),_s=()=>{st(!1),rs(),ms(),et(""),ws([]),bs([])},Ss=async()=>{L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const e=await P.Z.post("/get_retrive_popup_asset_filed_data.php?page="+Ze,{rows:vs,rowsort:Cs,SiteCD:B,admin:M});ge(e.data.data.result),je(e.data.total_count),L().close(),rs();const t=vs.map((e=>({...e,selectedOption:"",logical:"",valuept:""})));Xt(t);const s=Cs.map((e=>({...e,selectedOptionShort:""})));ts(s)}catch(e){console.error("Error fetching data:",e)}},Zs=()=>{at(!1),gs({queryName:"",description:""})},ks=async()=>{const e=localStorage.getItem("site_ID"),t=localStorage.getItem("emp_mst_empl_id");L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();const s={formDataSv:xs,rowsQrtData:vs,rowsortQrtData:Cs,SITE_CD:e,OWNER_ID:t,availability:"G"};try{const e=await P.Z.post("/insert_asset_query_list_save_as_data.php",s);console.log("saveAsQuery_____",e),"SUCCESS"==e.data.status&&(He(e.data.Title),Ft(),Ss(),ws([]),et(""),bs([]),L().close(),ms(),rs(),Zs(),_s())}catch(l){console.error("Error fetching data:",l)}},Ns=async()=>{const e=Ne.current.value;if(""!==e&&null!==e){L().fire({title:"Please Wait!",allowOutsideClick:!1}),L().showLoading();try{const t=await P.Z.get("/get_search_asset_module.php?site_cd=".concat(B,"&searchTerm=").concat(e,"&page=").concat(Ze));if(t.data.data.result.length>0){vt(t.data.data.result),je(t.data.total_count);const s=t.data.data.result.filter((t=>{const s=e.toLowerCase(),l=(t.col1||"").toLowerCase(),a=(t.col2||"").toLowerCase(),i=(t.col3||"").toLowerCase(),o=(t.col4||"").toLowerCase(),n=(t.col5||"").toLowerCase(),r=(t.col6||"").toLowerCase(),c=(t.col7||"").toLowerCase(),d=(t.col8||"").toLowerCase(),h=(t.col9||"").toLowerCase(),u=(t.col10||"").toLowerCase(),p=(t.col11||"").toLowerCase(),m=(t.col12||"").toLowerCase(),x=(t.col58||"").toLowerCase();return l.includes(s)||a.includes(s)||i.includes(s)||o.includes(s)||n.includes(s)||r.includes(s)||c.includes(s)||d.includes(s)||h.includes(s)||u.includes(s)||p.includes(s)||m.includes(s)||x.includes(s)}));ge(s),ge(s),L().close()}else L().close(),L().fire({icon:"error",title:"Oops...",text:"No Record Found!"})}catch(t){console.error("Error fetching data:",t)}}},As=(e,t)=>{"backdropClick"!==t&&"escapeKeyDown"!==t&&(Bt([{selectedOption:"",operator:"",logical:"",valuept:"",RowId:"",prompt:"",siteCd:B,Column:"",queryTypedd:"F"}]),It(!1))},Ds=(0,i.useCallback)(Lt,[B,Ze]),Os=(0,i.useCallback)(Tt,[xt]),Rs=(0,i.useCallback)(hs,[bt,Ze]);(0,i.useEffect)((()=>{""!=xt&&null!=xt?Os():""!=ft&&null!=ft?Ns():""!==bt&&"RetriveData"===bt?Rs():Array.isArray(te)&&te.length>0?(console.log("Enter____here___"),Et()):Ds(),Ft()}),[B,Ze,xt,Ds,Os,Rs,Et]);const qs=fe.map(((e,t)=>{const s=[115,170,120,125,150,160,125,130,170,170,120,145,80,145,125,120,180,180,130,155,170,180,160,170,170,160,170,170,160,160,180,160,160,170,195,140,80,80,100,140,155,100,85,125,125,150,150,150,150,150,150,150,150,150,150,150,150,150,150,130][t];return{id:e.accessor,label:e.Header,width:s}}));return qs.unshift({id:"",label:"Action",width:60}),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(o.ql,{children:[(0,H.jsx)("title",{children:"CMMS System"}),(0,H.jsx)("meta",{name:"description",content:"CMMS System"})]}),(0,H.jsxs)(p.Z,{maxWidth:!ue.themeStretch&&"lg",children:[(0,H.jsx)("div",{className:"CustomBreadAsset",children:(0,H.jsx)(I.Z,{heading:"CMMS System",links:[],action:(0,H.jsx)(h.Z,{component:_.r,variant:"contained",className:"AddNewButton",startIcon:(0,H.jsx)(O.Z,{icon:"mingcute:add-line"}),to:{pathname:"/dashboard/asset/newasset",state:{select:"New_Asset"}},children:"New"}),sx:{mb:{xs:3,md:5}}})}),(0,H.jsx)("div",{className:"workReqpage",children:(0,H.jsxs)(c.Z,{children:[(0,H.jsxs)(v.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1},marginTop:"20px"},children:[(0,H.jsxs)(h.Z,{className:"AssetFilterBtn",variant:"outlined",sx:{flexShrink:0},onClick:()=>{ke(1);const e=$t.map((e=>({...e,selectedOption:"",logical:"",operator:"",valuept:"",logical:""})));Xt(e);const t=$t.map((e=>({...e,selectedOptionShort:""})));if(ts(t),_t(""),$t.length>1){const e=[$t[0]];Xt(e)}if(es.length>1){const e=[es[0]];ts(e)}De(!0),ds()},children:[(0,H.jsx)(E.JO,{icon:"fluent:filter-12-filled",style:{marginRight:"5px"}})," Filter"]}),(0,H.jsxs)(S.Z,{sx:{flexShrink:0,width:{xs:1,md:300}},className:"selectOptioncls",children:[(0,H.jsx)(Z.Z,{id:"select-label",className:""!==Ve||be?"selectedcss":"",children:"Select an Query"}),(0,H.jsx)(k.Z,{labelId:"select-label",id:"select",input:(0,H.jsx)(F.Z,{label:"Select an option"}),value:""!==Ve?Ve:be,onChange:async(e,t)=>{var s;const l=(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)||be;ke(1);const a=Je.find((e=>e.cf_query_title===l));let i;if(Array.isArray(t)&&t.length>0&&(i=t.find((e=>e.cf_query_title===l))),a){const e=a.RowID,t=a.cf_query_list_prompt;if("1"==t){It(!0),L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const s=await P.Z.get("/get_work_order_filter_query_data.php?site_cd="+B+"&RowID="+e);if(s.data.data&&s.data.data.list_typeF&&s.data.data.list_typeF.length>0){const l=s.data.data.list_typeF.map((s=>({selectedOption:s.cf_query_list_column,operator:s.cf_query_list_operator,valuept:s.cf_query_list_value,logical:s.cf_query_list_logical,siteCd:B,RowId:e,prompt:t,Column:s.customize_header,queryTypedd:"F"})));setTimeout((()=>{L().close(),Bt(l)}),3e3)}else L().fire({icon:"error",customClass:{container:"swalcontainercustom"},title:"Oops...",text:"No record found Please try again !"})}catch(o){console.error("Error fetching data:",o)}return}mt(e),gt(e),ke(1),ie([]),se([]),He("")}else{const e=i.RowID;mt(e),gt(e),ke(1),ie([]),se([]),He("")}_e(l)},sx:{textTransform:"capitalize"},children:Je.map((e=>(0,H.jsxs)(x.Z,{value:e.cf_query_title,children:[(0,H.jsx)(O.Z,{icon:"mdi:sql-query",style:{display:"inline-flex",verticalAlign:"middle",marginRight:"6px",marginTop:"-5px",width:"16px",height:"16px"}}),(0,H.jsx)("span",{style:{verticalAlign:"middle"},children:e.cf_query_title})]},e.RowID)))})]}),(0,H.jsx)(u.Z,{title:"Refresh",placement:"top",arrow:!0,children:(0,H.jsx)("span",{className:"ListDataRefBtn",onClick:Lt,style:{border:"0px"},children:(0,H.jsx)(E.JO,{icon:"iconoir:refresh-double",style:{width:"20px",height:"20px"}})})}),(0,H.jsxs)(v.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,H.jsxs)("div",{className:"wordkOrdersearchInput",style:{display:"flex",alignItems:"center"},children:[(0,H.jsx)("input",{type:"text",className:"Seachrinput",placeholder:"Search..",ref:Ne,onKeyDown:e=>{if("Backspace"===e.key){e.preventDefault();const t=Ne.current.value.slice(0,-1);Ne.current.value=t,""===t&&Jt()}"Enter"===e.key&&""!==Ne.current.value.trim()&&Ns()},onFocus:()=>{jt(!0)},onBlur:()=>{jt(!1)}}),(0,H.jsx)("div",{children:(0,H.jsx)(g.Z,{onClick:Ns,className:"customsearchbutton",children:(0,H.jsx)(O.Z,{icon:"eva:search-fill"})})})]}),(0,H.jsx)(g.Z,{onClick:re.onOpen,children:(0,H.jsx)(O.Z,{icon:"eva:more-vertical-fill"})})]})]}),(0,H.jsx)(w.Z,{open:re.open,onClose:re.onClose,arrow:"right-top",sx:{width:180},children:(0,H.jsxs)(x.Z,{onClick:()=>{(async()=>{if(""!==pt){L().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const e=await P.Z.post("/getAssetListExcelData.php?site_cd=".concat(B,"&ItemID=").concat(pt));L().close(),e.data.data&&e.data.data.result&&e.data.data.result.length>0?((0,V.Z)({resultData:e.data.data.result}),re.onClose(),L().close()):(ge(""),L().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}else{L().fire({title:"Please Wait!",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const e=await P.Z.get("/getAssetListAllDataExcelsheet.php?site_cd=".concat(B));e.data.data&&e.data.data.result&&e.data.data.result.length>0?((0,V.Z)({resultData:e.data.data.result}),re.onClose(),L().close()):(ge(""),L().fire({title:"Opps..!",text:"No Record Found!",icon:"success",customClass:{container:"swalcontainercustom"}}))}catch(e){console.error("Error fetching data:",e)}}})()},children:[(0,H.jsx)(O.Z,{icon:"solar:export-bold"}),"Export to Excel"]})}),zt&&(0,H.jsx)(K.Z,{filters:we,onFilters:Gt,onResetFilters:Jt,results:Wt.length,sx:{p:2.5,pt:0}}),(0,H.jsxs)(y.Z,{sx:{position:"relative"},children:[(0,H.jsx)(D.Z4,{dense:he.dense,numSelected:(null===(l=he.selected)||void 0===l?void 0:l.length)||0,rowCount:(null===xe||void 0===xe?void 0:xe.length)||0,onSelectAllRows:e=>he.onSelectAllRows(e,xe.map((e=>e.id))),action:(0,H.jsx)(u.Z,{title:"Delete",children:(0,H.jsx)(g.Z,{color:"primary",onClick:Se.onTrue,children:(0,H.jsx)(O.Z,{icon:"solar:trash-bin-trash-bold"})})})}),(0,H.jsx)(R.Z,{sx:{overflowX:"auto",maxHeight:pe},children:(0,H.jsxs)(d.Z,{size:he.dense?"small":"medium",sx:{minWidth:960},children:[(0,H.jsx)(D.K,{order:he.order,orderBy:he.orderBy,headLabel:qs,rowCount:xe.length,numSelected:he.selected.length,onSort:he.onSort,className:"stickyheader"}),(0,H.jsxs)(m.Z,{className:"AssetTable",children:[oe?(0,H.jsx)(j.Z,{children:(0,H.jsx)(f.Z,{colSpan:"71",className:"NoRecodcls",children:(0,H.jsxs)(T.Z,{open:oe,"aria-labelledby":"loading-dialog-title",PaperProps:{style:{backgroundColor:"transparent"}},BackdropProps:{className:"yourbackdropclass"},children:[(0,H.jsx)(W.Z,{id:"loading-dialog-title",style:{textAlign:"center"}}),(0,H.jsx)(Q.Z,{children:(0,H.jsx)("div",{style:{textAlign:"center",paddingTop:"10px"},children:(0,H.jsx)(G.Z1,{radius:"9",visible:!0,ariaLabel:"three-circles-loading",color:"green"})})})]})})}):(0,H.jsx)(H.Fragment,{children:0===xe.length?(0,H.jsx)(j.Z,{children:(0,H.jsx)(f.Z,{colSpan:"71",className:"NoRecodcls",children:"No Record Found"})}):(0,H.jsx)(H.Fragment,{children:Wt.map((e=>(0,H.jsx)(Y.Z,{row:e,rowStats:Oe,selected:he.selected.includes(e.col61),onSelectRow:()=>he.onSelectRow(e.col61),onDeleteRow:()=>Ut(e.col61,e),onEditRow:()=>Yt(e.col61,e),onDuplicateRow:()=>Kt(e.col61,e),onPrintQrCode:()=>Vt(e.col61,e)},e.id)))})}),(0,H.jsx)(D.$W,{emptyRows:(0,D.fQ)(he.page,he.rowsPerPage,xe.length)})]})]})})]}),(0,H.jsx)(D.S_,{count:ye>0?ye:Wt.length,page:Ze-1,rowsPerPage:he.rowsPerPage,onPageChange:(e,t)=>{ke(t+1),he.onChangePage(e,t)},currentPage:Ze,onRowsPerPageChange:e=>{he.onChangeRowsPerPage(e)}})]})})]}),(0,H.jsx)(q.Q,{open:Se.value,onClose:Se.onFalse,title:"Delete",content:(0,H.jsxs)(H.Fragment,{children:["Are you sure want to delete ",(0,H.jsxs)("strong",{children:[" ",he.selected.length," "]})," items?"]}),action:(0,H.jsx)(h.Z,{variant:"contained",color:"error",onClick:()=>{Mt(),Se.onFalse()},children:"Delete"})}),(0,H.jsxs)(J,{onClose:rs,"aria-labelledby":"customized-dialog-title",open:Ae,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(W.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(O.Z,{icon:"mdi:sql-query"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Define Query"})]}),(0,H.jsx)(g.Z,{"aria-label":"close",onClick:rs,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.Z,{icon:"material-symbols:close"})}),(0,H.jsxs)(Q.Z,{dividers:!0,children:[(0,H.jsx)("div",{className:"queryBtn",children:(0,H.jsxs)(r.Z,{container:!0,spacing:1,children:[(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{Ft(),st(!0)},children:[(0,H.jsx)(O.Z,{icon:"carbon:query-queue"})," Query List"]})}),(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{$t.some((e=>""!==e.selectedOption))?hs():us()},children:[(0,H.jsx)(O.Z,{icon:"carbon:data-base"})," Retrive"]})}),(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{Fe(!0),Ft()},disabled:ss,children:[(0,H.jsx)(O.Z,{icon:"mingcute:save-fill"}),"Save"]})})]})}),(0,H.jsx)("div",{className:"filterByorder",children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,H.jsx)("legend",{children:"Filter By"}),(0,H.jsxs)("table",{children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:{textAlign:"center"},children:" ( "}),(0,H.jsx)("th",{children:"Field Name"}),(0,H.jsx)("th",{children:"Operator"}),(0,H.jsx)("th",{children:"Prompt"}),(0,H.jsx)("th",{children:"Value"}),(0,H.jsx)("th",{children:"Logical"}),(0,H.jsx)("th",{style:{textAlign:"center"},children:" ) "})]})}),(0,H.jsx)("tbody",{children:$t.map(((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(k.Z,{className:"custom-Astselect",style:{width:"100%"},children:ls.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)(k.Z,{className:"custom-Astselect ".concat(t===$t.length-1&&We?"error-border":"mammama"),style:{width:"100%"},onChange:e=>((e,t)=>{const s=[...$t];s[e].selectedOption=t,Qe(!1),Xt(s)})(t,e.target.value),children:cs.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"17%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect",onChange:e=>((e,t)=>{const s=[...$t];s[e].operator=t,Xt(s)})(t,e.target.value),children:is.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"8%"},children:(0,H.jsx)("input",{style:{width:"100%"},class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",onChange:e=>((e,t)=>{const s=[...$t];s[e].prompt=t?"1":"0",Xt(s)})(t,e.target.checked)})}),(0,H.jsx)("td",{style:{width:"26%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},className:"custom-Astselect ".concat(t===$t.length-1&&Ue?"error-border":"mammama"),oninput:"handleInput(event)",onChange:e=>((e,t)=>{const s=[...$t];s[e].valuept=t,Me(!1),Xt(s),!t&&s[e].selectedOption})(t,e.target.value)})}),(0,H.jsx)("td",{style:{width:"10%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===$t.length-1&&Ye?"error-border":"mammama"),onChange:e=>((e,t)=>{const s=[...$t];s[e].logical=t.target.value,Ke(!1),Xt(s)})(t,e),children:os.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect",children:as.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{children:(0,H.jsx)(g.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>ns(t),children:(0,H.jsx)(O.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{const e=$t.length>0&&(!$t[$t.length-1].selectedOption||""===$t[$t.length-1].selectedOption);e?(Qe(!e.selectedOption),Me(!e.valuept),Ke(!e.logical)):(Xt((e=>[...e,{selectedOption:"",operator:"",logical:"",prompt:"0",valuept:"",siteCd:B,queryTypedd:"F"}])),Qe(!1),Me(!1),Ke(!1))},className:"AddFilterBtn",children:[(0,H.jsx)(O.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})}),(0,H.jsx)("div",{className:"filterShort",children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,H.jsx)("legend",{children:"Sort By"}),(0,H.jsxs)("table",{children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"Field Name"}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{children:"Ascending?"})]})}),(0,H.jsx)("tbody",{children:es.map(((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"60%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect shrt ".concat(t===es.length-1&&ze?"error-border":"mammama"),onChange:e=>((e,t)=>{const s=[...es];s[e].selectedOptionShort=t,Ge(!1),ts(s)})(t,e.target.value),children:cs.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"10%"},children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",checked:"ASC"===es[t].promptAsd,onChange:e=>((e,t)=>{const s=[...es];s[e].promptAsd=t?"ASC":"DESC",ts(s)})(t,e.target.checked),id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,H.jsx)("td",{}),(0,H.jsx)("td",{children:(0,H.jsx)(g.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>ps(t),children:(0,H.jsx)(O.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{if(""===es[es.length-1].selectedOptionShort)Ge(""===es[es.length-1].selectedOptionShort);else{const e={selectedOptionShort:"",promptAsd:"ASC"};ts([...es,e])}},className:"AddFilterBtn",children:[(0,H.jsx)(O.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})]})]}),(0,H.jsxs)(J,{onClose:ms,"aria-labelledby":"customized-dialog-title",open:Le,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(W.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(O.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Save Query"})]}),(0,H.jsx)(g.Z,{"aria-label":"close",onClick:ms,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(Q.Z,{dividers:!0,children:(0,H.jsxs)("div",{className:"astSubpopup",children:[(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Query name:"}),(0,H.jsxs)("div",{className:"form-group ",children:[(0,H.jsx)("input",{type:"text",id:"customInput",name:"queryName",value:xs.queryName,onChange:ys,className:"bsc_sav",list:"options",style:{width:"100%"}}),(0,H.jsx)("datalist",{id:"options",children:Je.map(((e,t)=>(0,H.jsx)("option",{value:e.cf_query_title},t.RowID)))})]})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Description:"}),(0,H.jsx)("div",{className:"form-group",children:(0,H.jsx)("textarea",{id:"w3review",name:"description",rows:"3",value:xs.description,onChange:ys,cols:"70",style:{width:"100%"}})})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Availability:"}),(0,H.jsxs)("div",{class:"form-check",children:[(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"G",checked:!0,onChange:ys}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Global(available to everyone)"}),(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"P",onChange:ys}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios2",children:"Personal"})]})]})]})}),(0,H.jsx)(z.Z,{children:(0,H.jsx)(h.Z,{color:"primary",onClick:()=>{if(""!==xs.queryName.trim()){const e=xs.queryName;Je.find((t=>t.cf_query_title===e))?L().fire({title:"Are you sure?",text:"Do you want to overwrite the query "+e,icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No"}).then((e=>{var t,s,l,a;e.isConfirmed&&(""!==(null===$t||void 0===$t||null===(t=$t.selectedOption)||void 0===t?void 0:t.trim())&&""!==(null===$t||void 0===$t||null===(s=$t.logical)||void 0===s?void 0:s.trim())&&""!==(null===$t||void 0===$t||null===(l=$t.valuept)||void 0===l?void 0:l.trim())&&""!==(null===es||void 0===es||null===(a=es.selectedOptionShort)||void 0===a?void 0:a.trim())&&fs())})):fs()}else console.log("empty__")},children:"Save"})})]}),(0,H.jsxs)(J,{onClose:_s,"aria-labelledby":"customized-dialog-title",open:tt,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(W.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(O.Z,{icon:"mdi:sql-query"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:" Query List"})]}),(0,H.jsx)(g.Z,{"aria-label":"close",onClick:_s,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.Z,{icon:"material-symbols:close"})}),(0,H.jsxs)(Q.Z,{dividers:!0,children:[(0,H.jsx)("div",{className:"queryBtn",children:(0,H.jsxs)(r.Z,{container:!0,spacing:1,children:[(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:async()=>{const[e,t]=Xe.split("-");if(Xe&&""!==t)try{L().fire({title:"Are you sure?",text:"You want to delete "+e+" query!",icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async e=>{if(e.isConfirmed){"SUCCESS"==(await P.Z.get("/AssetsRegQueryListDataDelete.php?value="+t+"&siteId="+B)).data.status&&(Ft(),et(""),ws([]),bs([]),L().fire("Deleted!","Your query has been deleted.","success"))}}))}catch(s){console.error("Error fetching data:",s)}else console.log("empty")},children:[(0,H.jsx)(O.Z,{icon:"fluent:delete-48-regular"})," Delete"]})}),(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:async()=>{const[e,t]=Xe.split("-");if(Cs.some((e=>!e.selectedOptionShort))&&""!=t);else{L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});const e={rowsQrtData:vs,siteCd:B,owner:M,mst_RowID:t,defaultFlag:qe,rowsortQrtData:Cs};try{const t=await P.Z.post("/insert_asset_query_list_save_data.php",e);console.log("response__SaveBytncf__",t),"SUCCESS"==t.data.status&&(L().close(),L().fire({title:"Success!",text:"Your query update successfully.",icon:"success",confirmButtonText:"OK",customClass:{container:"swalcontainercustom"}}).then((e=>{e.isConfirmed&&(Ie(!1),Ss(),ws([]),et(""),bs([]),ts([]),Xt([]),_s())})))}catch(s){console.error("Error fetching data:",s)}}},children:[(0,H.jsx)(O.Z,{icon:"ic:outline-save-as"})," Save"]})}),(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{at(!0)},children:[(0,H.jsx)(O.Z,{icon:"fad:saveas"}),"Save As"]})})]})}),(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{className:"shortBydd list mt-4",children:(0,H.jsx)("div",{className:"table-containeR",children:(0,H.jsxs)("fieldset",{className:"Query-by-fieldset",children:[(0,H.jsx)("legend",{children:"Query Name"}),(0,H.jsxs)("table",{className:"custom-tablE",children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:{width:"100%"},children:"Query Title"}),(0,H.jsx)("th",{style:{width:"10%"},children:"Default?"})]})}),(0,H.jsxs)("tbody",{children:[(0,H.jsx)(k.Z,{id:"select",style:{width:"60%"},value:Xe,onChange:e=>(async e=>{let t,s;if(et(e),1===e.split("-").length-1)[t,s]=e.split("-");else{const l=e.split("-");t=l[0].trim(),s=l[l.length-1].trim()}if(He(t),""!==s&&""!==t){Rt(s);const e=Je.some((e=>e.RowID===s&&e.cf_query_title===t&&"1"===e.cf_query_default_flag));Ie(e)}else Ie(!1);if(ws([]),bs([]),""!==e){L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();try{const e=await P.Z.get("/get_work_order_filter_query_data.php?site_cd="+B+"&RowID="+s);if(e.data.data&&e.data.data.list_typeF&&e.data.data.list_typeF.length>0){const t=e.data.data.list_typeF.map((e=>({selectedOption:e.cf_query_list_column,operator:e.cf_query_list_operator,prompt:e.cf_query_list_prompt,valuept:e.cf_query_list_value,logical:e.cf_query_list_logical,siteCd:B,queryTypedd:"F"})));setTimeout((()=>{L().close(),ws((e=>[...e,...t]))}),3e3)}else L().fire({icon:"error",customClass:{container:"swalcontainercustom"},title:"Oops...",text:"No record found Please try again !"});if(e.data.data&&e.data.data.list_typeS.length>0){const t=e.data.data.list_typeS.map((e=>({selectedOptionShort:e.cf_query_list_column,promptAsd:e.cf_query_list_order_by,queryType:"S",siteCd:B})));setTimeout((()=>{L().close(),bs((e=>[...e,...t]))}),3e3)}}catch(l){console.error("Error fetching data:",l)}}})(e.target.value),sx:{textTransform:"capitalize"},children:Je.map((e=>(0,H.jsx)(x.Z,{value:"".concat(e.cf_query_title,"-").concat(e.RowID),children:e.cf_query_title},e.RowID)))}),(0,H.jsx)("td",{children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",checked:qe,onChange:()=>{Ie(!qe)},style:{width:"65px",height:"15px",marginTop:"-5px"}})})]})]})]})})}),(0,H.jsx)("div",{className:"FiltrBydd mt-2",children:(0,H.jsx)("div",{children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset2",children:[(0,H.jsx)("legend",{children:"Filter By"}),(0,H.jsxs)("table",{style:{borderCollapse:"collapse"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{style:{textAlign:"center",width:"7%"},children:"("}),(0,H.jsx)("th",{style:{width:"25%"},children:"Field Name"}),(0,H.jsx)("th",{style:{width:"17%"},children:"Operator"}),(0,H.jsx)("th",{style:{width:"8%"},children:"Prompt"}),(0,H.jsx)("th",{style:{width:"26%"},children:"Value"}),(0,H.jsx)("th",{style:{width:"10%"},children:"Logical"}),(0,H.jsx)("th",{style:{textAlign:"center",width:"7%"},children:")"})]})}),(0,H.jsx)("tbody",{children:vs.map(((e,t)=>(0,H.jsx)(i.Fragment,{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect",children:ls.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"25%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===vs.length-1&&it?"error-border":"mammama"),value:e.selectedOption||"",onChange:e=>((e,t)=>{const s=[...vs];s[e].selectedOption=t,ot(!1),ws(s)})(t,e.target.value),children:cs.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"17%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect",value:e.operator||"Like",onChange:e=>((e,t)=>{const s=[...vs];s[e].operator=t,ws(s)})(t,e.target.value),children:is.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"8%"},children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",onChange:e=>((e,t)=>{const s=[...vs];s[e].prompt=t?"1":"0",ws(s)})(t,e.target.checked),checked:"1"===e.prompt,id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,H.jsx)("td",{style:{width:"26%"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%"},className:"custom-Astselect ".concat(t===vs.length-1&&nt?"error-border":"mammama"),value:e.valuept||"",oninput:"handleInput(event)",onChange:e=>((e,t)=>{const s=[...vs];s[e].valuept=t,ws(s)})(t,e.target.value)})}),(0,H.jsx)("td",{style:{width:"10%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect ".concat(t===vs.length-1&&ct?"error-border":"mammama"),value:e.logical||"",children:os.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"7%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect",children:as.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{children:(0,H.jsx)(g.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(vs.length>1){const t=[...vs];t.splice(e,1),ws(t)}})(t),children:(0,H.jsx)(O.Z,{icon:"carbon:close"})})})]},t)},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{const e=vs.length>0&&(!vs[vs.length-1].selectedOption||""===vs[vs.length-1].selectedOption);e?(ot(!e.selectedOption),rt(!e.valuept),dt(!e.logical)):(ws((e=>[...e,{selectedOption:"",operator:"Like",logical:"",prompt:"0",valuept:"",siteCd:B,queryTypedd:"F"}])),ot(!1),rt(!1),dt(!1))},className:"AddFilterBtn",children:[(0,H.jsx)(O.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})}),(0,H.jsx)("div",{className:"shortBydd mt-4 shtQtr",children:(0,H.jsx)("div",{children:(0,H.jsxs)("fieldset",{className:"short-by-fieldset",children:[(0,H.jsx)("legend",{children:"Sort By"}),(0,H.jsxs)("table",{style:{borderCollapse:"collapse"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"Field Name"}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{}),(0,H.jsx)("th",{children:"Ascending?"})]})}),(0,H.jsx)("tbody",{children:Cs.map(((e,t)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"60%"},children:(0,H.jsx)(k.Z,{style:{width:"100%"},className:"custom-Astselect sht ".concat(t===Cs.length-1&&ht?"error-border":"mammama"),onChange:e=>((e,t)=>{const s=[...Cs];s[e].selectedOptionShort=t,ut(!1),bs(s)})(t,e.target.value),value:e.selectedOptionShort||"",children:cs.map(((e,t)=>(0,H.jsx)(x.Z,{value:e.value,children:e.label},t)))})}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"15%"}}),(0,H.jsx)("td",{style:{width:"8%"},children:(0,H.jsx)("input",{class:"form-check-input",type:"checkbox",checked:"ASC"===Cs[t].promptAsd,onChange:e=>((e,t)=>{const s=[...Cs];s[e].promptAsd=t?"ASC":"DESC",bs(s)})(t,e.target.checked),id:"flexCheckDefault",style:{width:"65px",height:"15px",marginTop:"-5px"}})}),(0,H.jsx)("td",{}),(0,H.jsx)("td",{children:(0,H.jsx)(g.Z,{className:"clsBtn","aria-label":"delete",size:"small",onClick:()=>(e=>{if(Cs.length>1){const t=[...Cs];t.splice(e,1),bs(t)}})(t),children:(0,H.jsx)(O.Z,{icon:"carbon:close"})})})]},t)))})]}),(0,H.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,H.jsxs)(h.Z,{onClick:()=>{const e=Cs.length>0&&(!Cs[Cs.length-1].selectedOptionShort||""===Cs[Cs.length-1].selectedOptionShort);e?ut(!e.selectedOptionShort):(bs((e=>[...e,{selectedOptionShort:"",promptAsd:"",siteCd:B,queryType:"S"}])),ut(!1))},className:"AddFilterBtn",children:[(0,H.jsx)(O.Z,{icon:"material-symbols:add",style:{verticalAlign:"0px",fontSize:"16px",marginRight:"2px"}}),"Add new filter"]})})]})})})]})]})]}),(0,H.jsxs)(J,{onClose:Zs,"aria-labelledby":"customized-dialog-title",open:lt,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(W.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(O.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Save Query As"})]}),(0,H.jsx)(g.Z,{"aria-label":"close",onClick:Zs,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(Q.Z,{dividers:!0,children:(0,H.jsxs)("div",{className:"astSubpopup",children:[(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Query name:"}),(0,H.jsxs)("div",{className:"form-group ",children:[(0,H.jsx)("input",{type:"text",id:"customInput",name:"queryName",value:xs.queryName,onChange:ys,className:"bsc_sav",list:"options",style:{width:"100%"}}),(0,H.jsx)("datalist",{id:"options",children:Je.map(((e,t)=>(0,H.jsx)("option",{value:e.cf_query_title},t.RowID)))})]})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Description:"}),(0,H.jsx)("div",{className:"form-group",children:(0,H.jsx)("textarea",{id:"w3review",name:"description",rows:"3",value:xs.description,onChange:ys,cols:"70",style:{width:"100%"}})})]}),(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Availability:"}),(0,H.jsxs)("div",{class:"form-check",children:[(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"G",checked:!0,onChange:ys}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Global(available to everyone)"}),(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"P",onChange:ys}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios2",children:"Personal"})]})]})]})}),(0,H.jsx)(z.Z,{children:(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:()=>{if(""!==xs.queryName.trim()){const e=xs.queryName;Je.find((t=>t.cf_query_title===e))?L().fire({title:"Are you sure?",text:"Do you want to overwrite the query "+e,icon:"warning",customClass:{container:"swalcontainercustom"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No"}).then((e=>{var t,s,l,a;e.isConfirmed&&(""!==(null===vs||void 0===vs||null===(t=vs.selectedOption)||void 0===t?void 0:t.trim())&&""!==(null===vs||void 0===vs||null===(s=vs.logical)||void 0===s?void 0:s.trim())&&""!==(null===vs||void 0===vs||null===(l=vs.valuept)||void 0===l?void 0:l.trim())&&""!==(null===Cs||void 0===Cs||null===(a=Cs.selectedOptionShort)||void 0===a?void 0:a.trim())&&ks())})):ks()}else console.log("empty__")},children:[(0,H.jsx)(O.Z,{icon:"mingcute:save-line"})," Save"]})})})]}),(0,H.jsxs)(J,{onClose:Ht,"aria-labelledby":"customized-dialog-title",open:St,maxWidth:"md",fullWidth:!0,children:[(0,H.jsxs)(W.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(O.Z,{icon:"fluent:print-48-regular"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Asset QRCode Printing Selection"})]}),(0,H.jsx)(g.Z,{"aria-label":"close",onClick:Ht,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(Q.Z,{dividers:!0,children:(0,H.jsx)("div",{className:"astSubpopup",children:(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Asset Selection:"}),(0,H.jsxs)("div",{class:"form-check",children:[(0,H.jsxs)("div",{style:{marginBottom:"5px"},children:[(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios1",value:"selected1",checked:"selected1"===kt,onChange:js}),(0,H.jsx)("label",{class:"form-check-label",for:"exampleRadios1",children:"Print 1 Selected Asset QRCode."})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("input",{class:"form-check-input",type:"radio",name:"availability",id:"exampleRadios2",value:"All",checked:"All"===kt,onChange:js}),(0,H.jsxs)("label",{class:"form-check-label",for:"exampleRadios2",children:["Print All ",ye," Asset QRCode."]})]})]})]})})}),(0,H.jsx)(z.Z,{children:(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{className:"SaveButton",variant:"outlined",style:{backgroundColor:"#4CAF50",color:"white",marginRight:"10px"},onClick:()=>{""!==At&&null!==kt&&de("/dashboard/asset/assetPrintQr",{state:{RowID:At,selectedVlue:kt,ItemID:xt}})},children:[(0,H.jsx)(O.Z,{icon:"fluent:print-48-regular"})," Print"]})})})]}),(0,H.jsxs)(J,{onClose:As,"aria-labelledby":"customized-dialog-title",open:qt,maxWidth:"md",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[(0,H.jsxs)(W.Z,{sx:{m:0,p:2,display:"flex",alignItems:"center"},id:"customized-dialog-title",className:"dailogTitWork",children:[(0,H.jsx)(O.Z,{icon:"material-symbols-light:file-save-sharp"}),(0,H.jsx)("span",{style:{marginLeft:"2px"},children:"Query Prompter"})]}),(0,H.jsx)(g.Z,{"aria-label":"close",onClick:()=>As(),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.Z,{icon:"material-symbols:close"})}),(0,H.jsx)(Q.Z,{dividers:!0,children:(0,H.jsx)("div",{className:"astSubpopup",children:(0,H.jsxs)("fieldset",{className:"Subpopup-fieldset",children:[(0,H.jsx)("legend",{children:"Please Fill In The Value"}),(0,H.jsxs)("table",{style:{width:"100%"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"Column"}),(0,H.jsx)("th",{children:"Operator"}),(0,H.jsx)("th",{children:"Value"}),(0,H.jsx)("th",{children:"Logical"})]})}),(0,H.jsx)("tbody",{children:Pt.map(((e,t)=>!e.selectedOption&&!e.operator&&!e.valuept?null:(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{style:{width:"25%",textAlign:"center"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%",textAlign:"center"},disabled:!0,value:e.Column||"",className:"custom-Astselect ".concat(t===$t.length-1&&Ue?"error-border":"mammama"),oninput:"handleInput(event)"})}),(0,H.jsx)("td",{style:{width:"25%",textAlign:"center"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%",textAlign:"center"},value:e.operator||"",disabled:!0,className:"custom-Astselect ".concat(t===$t.length-1&&Ue?"error-border":"mammama"),oninput:"handleInput(event)"})}),(0,H.jsx)("td",{style:{width:"25%",textAlign:"center"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%",textAlign:"center"},value:e.valuept||"",className:"custom-Astselect ".concat(t===$t.length-1&&Ue?"error-border":"mammama"),onChange:e=>((e,t)=>{Bt((s=>s.map(((s,l)=>l===e?{...s,valuept:t}:s))))})(t,e.target.value)})}),(0,H.jsx)("td",{style:{width:"25%",textAlign:"center"},children:(0,H.jsx)("input",{type:"text",style:{width:"100%",textAlign:"center"},disabled:!0,value:e.logical||"",className:"custom-Astselect ".concat(t===$t.length-1&&Ue?"error-border":"mammama"),oninput:"handleInput(event)"})})]},t)))})]})]})})}),(0,H.jsx)(z.Z,{children:(0,H.jsx)(r.Z,{item:!0,children:(0,H.jsxs)(h.Z,{variant:"outlined",onClick:async()=>{const e=Pt.some((e=>!e.valuept.trim())),t=Pt.length>0?Pt[0].RowId:null;if(e)L().fire({icon:"error",title:"Validation Error !",text:"Please fill in value field before saving.",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}});else{L().fire({title:"Please Wait !",allowOutsideClick:!1,customClass:{container:"swalcontainercustom"}}),L().showLoading();const e={rowsQrtData:Pt,siteCd:B,RowId:t,owner:M};try{"SUCCESS"==(await P.Z.post("/insert_asset_query_list_prompt_save_data.php",e)).data.status&&(L().close(),L().fire({title:"Success!",text:"Your query update successfully.",icon:"success",confirmButtonText:"OK",customClass:{container:"swalcontainercustom"}}).then((e=>{e.isConfirmed&&(async e=>{try{const t=await P.Z.post("/get_asset_dropdown_prompt_data.php?page="+Ze,{rows:Pt,rowsort:"",SiteCD:B,admin:M,RowId:e});ge(t.data.data.result),je(t.data.total_count),He(t.data.titleName),L().close(),As()}catch(t){console.error("Error fetching data:",t)}})(t)})))}catch(s){console.error("Error fetching data:",s)}}},children:[(0,H.jsx)(O.Z,{icon:"iconoir:submit-document"})," Save"]})})})]}),(0,H.jsx)(U.Ix,{})]})}}}]);
//# sourceMappingURL=4465.afd34493.chunk.js.map